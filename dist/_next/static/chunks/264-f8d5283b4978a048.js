"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{8584:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(7437),o=r(2988),a=r(2265),i=r(7776),s=r(9373);let u=a.forwardRef(function({children:e,follow:t=!0,lockX:r=!1,lockY:n=!1,lockZ:u=!1,...c},l){let d=a.useRef(null),h=a.useRef(null),m=new i.Quaternion;return(0,s.A)(({camera:e})=>{if(!t||!h.current)return;let o=h.current.rotation.clone();h.current.updateMatrix(),h.current.updateWorldMatrix(!1,!1),h.current.getWorldQuaternion(m),e.getWorldQuaternion(d.current.quaternion).premultiply(m.invert()),r&&(h.current.rotation.x=o.x),n&&(h.current.rotation.y=o.y),u&&(h.current.rotation.z=o.z)}),a.useImperativeHandle(l,()=>h.current,[]),a.createElement("group",(0,o.Z)({ref:h,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},c),a.createElement("group",{ref:d},e))});var c=r(9429);let l=a.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:n="middle",font:i,fontSize:u=1,children:l,characters:d,onSync:h,...m},p)=>{let{Text:f,preloadFont:x}=(0,c.Rq)(async()=>Promise.all([r.e(918),r.e(610)]).then(r.bind(r,5212)),[]),M=(0,s.z)(({invalidate:e})=>e),[y]=a.useState(()=>new f),[v,g]=a.useMemo(()=>{let e=[],t="";return a.Children.forEach(l,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[l]);return(0,c.Rq)(()=>new Promise(e=>x({font:i,characters:d},e)),["troika-text",i,d]),a.useLayoutEffect(()=>void y.sync(()=>{M(),h&&h(y)})),a.useEffect(()=>()=>y.dispose(),[y]),a.createElement("primitive",(0,o.Z)({object:y,ref:p,font:i,text:g,anchorX:t,anchorY:n,fontSize:u,sdfGlyphSize:e},m),v)});var d=function(e){let{name:t,text:r,size:o=1,position:a=[0,3,0],color:i,handleClick:s,handlePointerDown:c,font:d="../assets/fonts/Termina_Black.ttf"}=e;return(0,n.jsx)(u,{onClick:s,onPointerDown:c,onPointerOver:()=>{s&&(document.body.style.cursor="pointer")},onPointerOut:()=>{s&&(document.body.style.cursor="auto")},children:(0,n.jsx)(l,{position:a,scale:o,color:i,font:d,anchorX:"center",anchorY:"middle",children:r.toUpperCase()})})}},625:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(7871),u=r(2325),c=r(8384),l=r(8942),d=r(878),h=r(6209);let m=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:m,parentName:p}=e,{name:f,orbitalRadius:x,radius:M,color:y,orbitalPeriod:v,orbitalInclination:g,eccentricity:b}=r,P="Moon"===f?(0,s.m)("../assets/earth/moon/moon.jpg"):null,j=t||(0,o.useRef)(),w=(0,o.useRef)(2*Math.random()*Math.PI),R=(0,o.useRef)(),E=(0,o.useMemo)(()=>({radius:M*l.sh,orbitalRadius:x*l.H_,meanMotion:2*Math.PI/(86400*v)}),[M,x,v]),{isSurfaceCameraActive:k,satelliteCamera:C,toggleSatelliteCamera:Z,setAutoRotate:I,autoRotate:S,activeCamera:L,switchToPlanetCamera:z,toggleCameraTransitioning:Y,switchToMoonCamera:X}=(0,c.g5)(),{simSpeed:T,toggleDetailsMenu:U}=(0,c.ZP)(),{selectedMoon:A,setSelectedMoon:D,displayLabels:W,orbitPaths:_,updateMoonPosition:V,updateMoonWorldPosition:N}=(0,c.d2)(),O=A?.name===f,F=(0,o.useMemo)(()=>new a.SphereGeometry(E.radius,O?32:14,O?16:12),[E.radius,O]),G=(0,o.useMemo)(()=>new a.MeshStandardMaterial({metalness:.5,roughness:.8,map:P||null,color:P?null:y}),[P,y]),$=(0,o.useCallback)(e=>{e.stopPropagation(),O||(U(!0),D(r),X(p,f))},[O,r,p,f]);return(0,i.A)((e,t)=>{if(!j.current)return;w.current-=E.meanMotion*(t*T);let r=w.current;for(let e=0;e<10;e++){let e=(r-b*Math.sin(r)-w.current)/(1-b*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+b)/(1-b))*Math.tan(r/2)),o=E.orbitalRadius*(1-b*b)/(1+b*Math.cos(n)),i=o*Math.sin(-n),s=Math.PI/180*g,u=Math.sin(s)*i,c=Math.cos(s)*i;if(j.current.position.set(o*Math.cos(-n),u,c),O||f===L?.name){let e=j.current.getWorldPosition(new a.Vector3);V(f,{x:e.x,y:e.y,z:e.z}),N(f,{x:e.x,y:e.y,z:e.z})}"Moon"===f&&m&&j.current.lookAt(new a.Vector3(...m))}),(0,n.jsxs)(n.Fragment,{children:[L?.name===f&&j.current&&(0,n.jsx)(h.Z,{target:j.current,targetName:f,size:E.radius}),(0,n.jsxs)("group",{ref:j,children:[(0,n.jsxs)("mesh",{ref:R,onClick:$,onDoubleClick:e=>{e.stopPropagation(),I(!S)},rotation:"Moon"===f?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("primitive",{object:F}),(0,n.jsx)("primitive",{object:G})]},f),(W||O)&&(0,n.jsx)(u.V,{position:[0,1.2*E.radius,0],center:!0,zIndexRange:[100,0],occlude:T<2e4,style:O?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:$,style:{color:y,fontSize:O?"14px":"12px",cursor:"pointer"},children:f})})]}),_&&(0,n.jsx)(d.Z,{origin:[0,0,0],radius:E.orbitalRadius,eccentricity:b,orbitalInclination:g,color:y,name:`${f}-orbit-path`,hiRes:O,lineType:"solid",lineWidth:O?1:.4,position:j.current?.position})]})});t.Z=o.memo(m)},5264:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(2325),u=r(8384),c=r(2079),l=r(878),d=r(1675),h=r(625),m=r(8584);r(8942);var p=r(1045),f=r(8236);let x=(e,t)=>2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(e/2)),M=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6,a=e;for(let e=0;e<n;e++){let e=(a-t*Math.sin(a)-r)/(1-t*Math.cos(a));if(a-=e,Math.abs(e)<o)break}return a},y=(e,t,r)=>{let n=x(M(e,t,e),t),o=r*(1-t*t)/(1+t*Math.cos(n));return{x:o*Math.cos(-n),baseZ:o*Math.sin(-n)}};t.Z=e=>{let{name:t="Earth",textures:r}=e,{planetsData:x,moonsData:M}=(0,u.d2)(),v={...x[t]},{radius:g=1,orbitalOrigin:b,orbitalRadius:P=1,orbitalPeriod:j=1,orbitalInclination:w=0,axialTilt:R=0,rotationPeriod:E=1,color:k="#ffffff",initialOrbitalAngle:C=0,eccentricity:Z=0,mass:I}=v,{simSpeed:S,toggleDetailsMenu:L}=(0,u.ZP)(),{planetAngles:z,updatePlanetPosition:Y,selectedPlanet:X,setSelectedPlanet:T,displayLabels:U,selectedMoon:A,setSelectedMoon:D,orbitPaths:W}=(0,u.d2)(),{isSurfaceCameraActive:_,satelliteCamera:V,toggleSatelliteCamera:N,setAutoRotate:O,autoRotate:F,activeCamera:G,switchToPlanetCamera:$,toggleCameraTransitioning:q}=(0,u.g5)(),B=(0,o.useRef)(),Q=(0,o.useRef)(z[t]||0),H=(0,o.useRef)(),J=(0,o.useRef)(null),[K,ee]=(0,o.useState)(!1),[et,er]=(0,o.useState)(!1),[en,eo]=(0,o.useState)(!1),ea=(0,o.useRef)({x:0,y:0}),ei=X&&X.name===t,es=()=>!!ei||A?.parentName===t,eu=(0,o.useMemo)(()=>({scaledOrbitalRadius:P*(_?1e-4:c.Hm),scaledRadius:g*c.YB,rotationSpeed:E?2*Math.PI/(3600*E)*c.E_:0,detailLevel:ei||es()?64:16}),[P,_,g,E,ei,es()]),{scaledOrbitalRadius:ec,scaledRadius:el,rotationSpeed:ed,detailLevel:eh}=eu,em=(0,o.useRef)(eu.scaledRadius),ep=(0,o.useRef)(1),[ef,ex]=(0,o.useState)(!1),[eM,ey]=(0,o.useState)(1);(0,o.useEffect)(()=>()=>{if(J.current){let e=J.current.geometry,t=J.current.material;e.dispose(),Array.isArray(t)?t.forEach(e=>e.dispose()):t&&t.dispose()}},[]);let ev=(0,o.useCallback)((e,r)=>{let n=r*S,o=2*Math.PI/(86400*j);if(0===Q.current?Q.current=Math.PI/180*C:Q.current-=o*n,B.current){let{x:r,baseZ:o}=y(Q.current,Z,ec),i=Math.PI/180*w,s=Math.sin(i)*o,u=Math.cos(i)*o;if(B.current.position.set(r,s,u),Y(t,{x:r,y:s,z:u}),E&&J.current){let e=2*Math.PI/(3600*E)*n,t=new a.Vector3(0,1,0);J.current.rotateOnAxis(t,e),B.current.rotation.y>=2*Math.PI&&ei&&(B.current.rotation.y%=2*Math.PI),H.current&&(H.current.rotation.y+=1.1*e)}let c=B.current.position.distanceTo(e.camera.position);c/1e3<=el?em.current=el:em.current=c/1e3,ep.current&&(ep.current=.02*c),ex("moon"===G.type||c<500);let l=100*el,d=1*el;ey(Math.max(0,Math.min(1,(c-d)/(l-d))))}},[S,j,C,Z,ec,w,E,t,ei,el,G.type,500]);(0,i.A)(ev),(0,o.useEffect)(()=>{J.current&&(J.current.rotation.order="YXZ",J.current.rotation.y=0,J.current.rotation.x=a.MathUtils.degToRad(R))},[R,X]);let eg=(0,o.useCallback)(e=>{e.stopPropagation(),et||G.name===t||(L(!0),D(null),T(v),$(t))},[et,G.name,t,v]),eb=e=>{e.stopPropagation(),er(!1),ea.current={x:e.clientX,y:e.clientY}},eP=e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&er(!0)},ej=e=>{er(!1)},ew=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eo(!0)},eR=e=>{e.stopPropagation(),document.body.style.cursor="auto",eo(!1)},eE=M[t]||[];return(0,n.jsxs)(n.Fragment,{children:[G?.name===t&&B.current&&(0,n.jsx)(d.Z,{target:B.current,targetName:t,size:el,bodyType:"planet"}),(0,n.jsxs)("group",{ref:B,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eg,onPointerDown:eb,onPointerMove:eP,onPointerUp:ej,onPointerOver:ew,onPointerOut:eR,children:G?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[es()?el:8*em.current,8,8]})}),(0,n.jsxs)("mesh",{ref:J,onDoubleClick:e=>{e.stopPropagation(),O(!F)},children:[(0,n.jsx)("sphereGeometry",{args:[es()?el:8*em.current,eh,eh/2]}),ei||es()||!K?(0,n.jsxs)(n.Fragment,{children:["Earth"===t&&ei&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:H,children:[(0,n.jsx)("sphereGeometry",{args:[Math.min(1.008*el),eh,eh/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[Math.min(1.02*el),eh,eh/2]}),(0,n.jsx)("shaderMaterial",{args:[p.et]})]},`${t}-atmosphere_texture`)]}),(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map,onBuild:()=>ee(!0)})]}):(0,n.jsx)("meshBasicMaterial",{color:k})]},ei?t+"-textured":t+"-basic"),"Saturn"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.2*el,outerRadius:2*el,height:0,rotation:[a.MathUtils.degToRad(R),0,0],texture:ei?r?.ringTexture:null,detail:Math.max(eh,32)},eh+t+"-ring"),"Uranus"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.5*el,outerRadius:1.9*el,height:0,texture:ei?r?.ringTexture:null,detail:Math.max(eh,32),rotation:[a.MathUtils.degToRad(R),0,0]},eh+t+"-ring"),!ei&&(U||en&&!ei)&&(0,n.jsx)(m.Z,{text:t,size:ep?.current,position:[0,1.2*em.current+ep?.current,0],color:k,handleClick:eg,handlePointerDown:eb,font:"../assets/fonts/Termina_Black.ttf"},t),U&&ei&&(0,n.jsx)(s.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":1.12*el,zIndexRange:[100,0],style:ei?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:eg,onPointerDown:eb,onPointerMove:eP,onPointerUp:ej,onPointerOver:ew,onPointerOut:eR,children:t})}),es()&&eE.map((e,r)=>{let o=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:o?[a.MathUtils.degToRad(R),0,0]:[0,0,0],children:(0,n.jsx)(h.Z,{moonData:e,planetPosition:B.current?.position,parentName:t},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),W&&(0,n.jsx)(l.Z,{origin:b,radius:ec,eccentricity:Z,orbitalInclination:w,color:k,name:t+"-orbit-path",lineWidth:ei?2:.5,opacity:eM,hiRes:ei,position:B.current?.position})]})}},8236:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:i=0,rotation:s,texture:u,detail:c=16}=e,l=(0,o.useMemo)(()=>{let e=new a.CylinderGeometry(r,t,i,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,i]),d=(0,o.useMemo)(()=>new a.MeshBasicMaterial({map:u,side:a.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:d,rotation:s})}},1675:function(e,t,r){var n=r(7437),o=r(2265),a=r(9373),i=r(5533),s=r(7776),u=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:l="planet"}=e,{toggleCameraTransitioning:d,setAutoRotate:h,autoRotate:m,toggleSatelliteCamera:p,satelliteCamera:f,activeCamera:x,setSatelliteCameraState:M}=(0,u.g5)(),{prevSpeed:y,setSimSpeed:v}=(0,u.ZP)(),{gl:g,camera:b}=(0,a.z)(),P=(0,o.useRef)(),j=(0,o.useRef)(!1),w=(0,o.useRef)({x:0,y:0}),R=(0,o.useRef)(new s.Spherical(6*r,Math.PI/2,0)),E=2.8*r,k=(0,o.useCallback)(()=>{h(!1)},[h]),C=(0,o.useCallback)(e=>{j.current=!0,w.current={x:e.clientX,y:e.clientY}},[]),Z=(0,o.useCallback)(()=>{j.current=!1},[]),I=(0,o.useCallback)(e=>{if(!j.current)return;k();let t=e.clientX-w.current.x,r=e.clientY-w.current.y,n=R.current.phi-.45*r*.01,o=R.current.theta-.45*t*.01;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),R.current.theta=o,w.current={x:e.clientX,y:e.clientY}},[k]),S=(0,o.useCallback)(e=>{if(!f)return;let t=.1*e.deltaY,r=s.MathUtils.clamp(R.current.radius+t,E,300);R.current.radius=r,k()},[f,r,l,k]),L=(0,o.useCallback)(e=>{j.current=!0,e.touches?(e.preventDefault(),w.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):w.current={x:e.clientX,y:e.clientY}},[]),z=(0,o.useCallback)(e=>{if(!j.current)return;k();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-w.current.x,o=r-w.current.y,a=R.current.phi-.003*o,i=R.current.theta-.003*n;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,a)),R.current.theta=i,w.current={x:t,y:r}},[k]);(0,a.A)((e,n)=>{if(!P.current||!t)return;let o=new s.Vector3;t.getWorldPosition(o);let a=t.position.clone();m&&(R.current.theta+=.05*n);let i=new s.Vector3().setFromSpherical(R.current).add(a);if(P.current.position.copy(i),P.current.lookAt(a),P.current.updateMatrixWorld(),f){let e=new s.Vector3;P.current.getWorldPosition(e);let t=new s.Quaternion;P.current.getWorldQuaternion(t),M(e,new s.Euler().setFromQuaternion(t),o)}x.name===c&&!f&&b.position.distanceTo(o)<=4.5*r&&Y(b,o)});let Y=(0,o.useCallback)((e,r)=>{let n=e.position.clone(),o=t.parent.matrixWorld.clone().invert(),a=n.applyMatrix4(o),i=t.position.clone(),u=a.sub(i);R.current.setFromVector3(u),R.current.radius=s.MathUtils.clamp(R.current.radius,E,300),P.current.position.copy(a),P.current.lookAt(i),p(!0),d(!1),v(y)},[t,l,r,p,d,v,y]);return(0,o.useEffect)(()=>{let e=g.domElement;return e.addEventListener("mousedown",C),window.addEventListener("mousemove",I),window.addEventListener("mouseup",Z),e.addEventListener("wheel",S,{passive:!0}),e.addEventListener("touchstart",L),e.addEventListener("touchmove",z),e.addEventListener("touchend",Z),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",C),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",Z),e.removeEventListener("wheel",S),e.removeEventListener("touchstart",L),e.removeEventListener("touchmove",z),e.removeEventListener("touchend",Z),e.removeEventListener("contextmenu",e=>e.preventDefault()),f&&p(!1)}},[C,I,Z,S,L,z,g.domElement,f,p]),(0,n.jsx)(i.c,{ref:P,name:"satellite-camera-"+c,makeDefault:f,fov:50,near:.01,far:12e5},c)}}}]);