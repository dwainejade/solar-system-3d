"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{625:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(7871),l=r(2325),c=r(8384),u=r(8942),d=r(878),h=r(6209),m=r(1577);let p=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:p,parentName:f,parentMeshRef:M}=e,{name:x,orbitalRadius:v,radius:g,color:y,orbitalPeriod:P,orbitalInclination:w,eccentricity:b}=r,j=t||(0,o.useRef)(),R=(0,o.useRef)(2*Math.random()*Math.PI),C=(0,o.useRef)(),E=(0,o.useRef)(new a.Vector3),k="Moon"===x?(0,s.m)("../assets/earth/moon/moon.jpg"):null,S=(0,o.useMemo)(()=>({radius:g*u.sh,orbitalRadius:v*u.H_,meanMotion:2*Math.PI/(86400*P),inclination:Math.PI/180*w}),[g,v,P,w]),{activeCamera:I,setAutoRotate:L,autoRotate:Z,switchToMoonCamera:z}=(0,c.g5)(),{simSpeed:V,toggleDetailsMenu:Y}=(0,c.ZP)(),{selectedMoon:$,setSelectedMoon:T,displayLabels:U,orbitPaths:A,updateMoonPosition:N,updateMoonWorldPosition:X}=(0,c.d2)(),_=$?.name===x,D=x===I?.name;(0,o.useEffect)(()=>{k&&(k.colorSpace=a.SRGBColorSpace,k.needsUpdate=!0)},[]);let W=(0,o.useCallback)(e=>{e.stopPropagation(),_||(Y(!0),T(r),z(f,x))},[_,r,f,x]);(0,o.useCallback)(e=>{e.stopPropagation(),L(!Z)},[Z,L]);let B=(0,o.useMemo)(()=>new a.Vector3,[]),G=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,i.A)((e,t)=>{if(!j.current)return;R.current-=S.meanMotion*(t*V);let r=R.current;for(let e=0;e<10;e++){let e=(r-b*Math.sin(r)-R.current)/(1-b*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+b)/(1-b))*Math.tan(r/2)),o=S.orbitalRadius*(1-b*b)/(1+b*Math.cos(n)),a=o*Math.sin(-n),i=Math.sin(S.inclination)*a,s=Math.cos(S.inclination)*a;if(G.set(o*Math.cos(-n),i,s),j.current.position.copy(G),_||D){j.current.getWorldPosition(E.current);let e=E.current;N(x,{x:e.x,y:e.y,z:e.z}),X(x,{x:e.x,y:e.y,z:e.z})}"Moon"===x&&p&&(B.set(...p),j.current.lookAt(B))}),(0,n.jsxs)(n.Fragment,{children:[D&&j.current&&(0,n.jsx)(h.Z,{target:j.current,targetName:x,size:S.radius}),(0,n.jsxs)("group",{ref:j,children:[(0,n.jsxs)("mesh",{ref:C,onClick:W,rotation:"Moon"===x?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("sphereGeometry",{args:[S.radius,_?32:14,_?20:12]}),(0,n.jsx)("meshStandardMaterial",{metalness:.2,roughness:.8,map:k||null,color:k?null:y})]},x),_&&U&&(0,n.jsx)(l.V,{position:[0,1.2*S.radius,0],center:!0,zIndexRange:[100,0],style:_?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:W,style:{color:y,fontSize:"12px",cursor:"pointer"},children:x})}),U&&!_&&(0,n.jsx)(m.Z,{text:x,size:12,position:[0,1.2*S.radius,0],color:y,handleClick:W,font:"../assets/fonts/Termina_Black.ttf"})]}),A&&(0,n.jsx)(d.Z,{origin:[0,0,0],radius:S.orbitalRadius,eccentricity:b,orbitalInclination:w,color:y,name:`${x}-orbit-path`,hiRes:_,lineWidth:_?2:1,position:j.current?.position,arcLength:.75,orbitalPeriod:P})]})});t.Z=o.memo(p)},5264:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(2325),l=r(8384),c=r(2079),u=r(878),d=r(1675),h=r(625),m=r(1577),p=r(4242),f=r(8236);let M=(e,t)=>2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(e/2)),x=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6,a=e;for(let e=0;e<n;e++){let e=(a-t*Math.sin(a)-r)/(1-t*Math.cos(a));if(a-=e,Math.abs(e)<o)break}return a},v=(e,t,r)=>{let n=M(x(e,t,e),t),o=r*(1-t*t)/(1+t*Math.cos(n));return{x:o*Math.cos(-n),baseZ:o*Math.sin(-n)}};t.Z=e=>{let{name:t="Earth",textures:r}=e,{planetsData:M,moonsData:x}=(0,l.d2)(),g={...M[t]},{radius:y=1,orbitalRadius:P=1,orbitalPeriod:w=1,orbitalInclination:b=0,axialTilt:j=0,rotationPeriod:R=1,color:C="#ffffff",initialOrbitalAngle:E=0,eccentricity:k=0}=g,S=(0,l.ZP)(e=>e.simSpeed),I=(0,l.ZP)(e=>e.toggleDetailsMenu),L=(0,l.d2)(e=>e.planetAngles),Z=(0,l.d2)(e=>e.updatePlanetPosition),z=(0,l.d2)(e=>e.selectedPlanet),V=(0,l.d2)(e=>e.setSelectedPlanet),Y=(0,l.d2)(e=>e.displayLabels),$=(0,l.d2)(e=>e.selectedMoon),T=(0,l.d2)(e=>e.setSelectedMoon),U=(0,l.d2)(e=>e.orbitPaths),A=(0,l.g5)(e=>e.isSurfaceCameraActive);(0,l.g5)(e=>e.setAutoRotate),(0,l.g5)(e=>e.autoRotate);let N=(0,l.g5)(e=>e.activeCamera),X=(0,l.g5)(e=>e.switchToPlanetCamera),_=(0,o.useRef)(),D=(0,o.useRef)(L[t]||0),W=(0,o.useRef)(),B=(0,o.useRef)(null),[G,F]=(0,o.useState)(!1),[O,q]=(0,o.useState)(!1),Q=(0,o.useRef)({x:0,y:0}),H=N.name===t||z?.name===t,J=()=>!!H||$?.parentName===t,K=(0,o.useMemo)(()=>({scaledOrbitalRadius:P*(A?1e-4:c.Hm),scaledRadius:y*c.YB,rotationSpeed:R?2*Math.PI/(3600*R)*c.E_:0,detailLevel:H||J()?64:16}),[P,A,y,R,H,J]),{scaledOrbitalRadius:ee,scaledRadius:et,rotationSpeed:er,detailLevel:en}=K,eo=(0,o.useRef)(K.scaledRadius),[ea,ei]=(0,o.useState)(!1),[es,el]=(0,o.useState)(1);(0,o.useEffect)(()=>()=>{if(B.current){let e=B.current.geometry,t=B.current.material;e.dispose(),Array.isArray(t)?t.forEach(e=>e.dispose()):t&&t.dispose()}},[]);let ec=(0,o.useCallback)((e,r)=>{let n=r*S,o=2*Math.PI/(86400*w);if(0===D.current?D.current=Math.PI/180*E:D.current-=o*n,_.current){let{x:r,baseZ:o}=v(D.current,k,ee),i=Math.PI/180*b,s=Math.sin(i)*o,l=Math.cos(i)*o;if(_.current.position.set(r,s,l),Z(t,{x:r,y:s,z:l}),R&&B.current){let e=2*Math.PI/(3600*R)*n,t=new a.Vector3(0,1,0);B.current.rotateOnAxis(t,e),_.current.rotation.y>=2*Math.PI&&H&&(_.current.rotation.y%=2*Math.PI),W.current&&(W.current.rotation.y+=1.1*e)}let c=_.current.position.distanceTo(e.camera.position);c/1e3<=et?eo.current=et:eo.current=c/1e3,ei(H||c<700);let u=100*et,d=1*et;el(Math.max(0,Math.min(1,(c-d)/(u-d))))}},[S,w,E,k,ee,b,R,t,H,et,$,N.type,700]);(0,i.A)(ec),(0,o.useEffect)(()=>{B.current&&(B.current.rotation.order="YXZ",B.current.rotation.y=0,B.current.rotation.x=a.MathUtils.degToRad(j))},[j,z]);let eu=(0,o.useCallback)(e=>{e.stopPropagation(),G||N.name===t||(I(!0),T(null),V(g),X(t))},[G,N.name,t,g]),ed=e=>{e.stopPropagation(),F(!1),Q.current={x:e.clientX,y:e.clientY}},eh=e=>{Math.sqrt(Math.pow(e.clientX-Q.current.x,2)+Math.pow(e.clientY-Q.current.y,2))>5&&F(!0)},em=e=>{F(!1)},ep=e=>{e.stopPropagation(),document.body.style.cursor="pointer",q(!0)},ef=e=>{e.stopPropagation(),document.body.style.cursor="auto",q(!1)},eM=x[t]||[],ex=U&&(!z&&!$||O||H);return(0,o.useEffect)(()=>{r?.map&&(r.map.colorSpace=a.SRGBColorSpace,r.map.needsUpdate=!0),r?.clouds&&(r.clouds.colorSpace=a.SRGBColorSpace,r.clouds.needsUpdate=!0)},[]),(0,n.jsxs)(n.Fragment,{children:[N?.name===t&&_.current&&(0,n.jsx)(d.Z,{target:_.current,targetName:t,size:et,bodyType:"planet"}),(0,n.jsxs)("group",{ref:_,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eu,onPointerDown:ed,onPointerMove:eh,onPointerUp:em,onPointerOver:ep,onPointerOut:ef,children:N?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[J()?et:8*eo.current,8,8]})}),(0,n.jsxs)("mesh",{ref:B,castShadow:!0,children:[(0,n.jsx)("sphereGeometry",{args:[J()?et:8*eo.current,en,en/2]}),H?(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map}):(0,n.jsx)("meshBasicMaterial",{color:C}),"Earth"===t&&H&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:W,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*et,en,en/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8,depthWrite:!1})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.01*et,en,en]}),(0,n.jsx)("shaderMaterial",{args:[p.e],transparent:!0,opacity:.1,side:a.BackSide,depthWrite:!1,depthTest:!0})]},`${t}-atmosphere_texture`)]})]},H?`${t}-textured`:`${t}-basic`),"Saturn"===t&&ea&&(0,n.jsx)(f.Z,{innerRadius:1.2*et,outerRadius:2*et,height:0,rotation:[a.MathUtils.degToRad(j),0,0],texture:H?r?.ringTexture:null,detail:Math.max(en,32)},`${en}${t}-ring`),"Uranus"===t&&ea&&(0,n.jsx)(f.Z,{innerRadius:1.5*et,outerRadius:1.9*et,height:0,texture:H?r?.ringTexture:null,detail:Math.max(en,32),rotation:[a.MathUtils.degToRad(j),0,0]},`${en}${t}-ring`),!H&&(Y||O&&!H)&&(0,n.jsx)("group",{position:[0,0,0],children:(0,n.jsx)(m.Z,{text:t,size:16,position:[0,13*eo.current,0],color:C,handleClick:eu,handlePointerDown:ed,font:"../assets/fonts/Termina_Black.ttf"})}),Y&&H&&(0,n.jsx)(s.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":1.12*et,zIndexRange:[100,0],style:H?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",style:{color:C},onClick:eu,onPointerDown:ed,onPointerMove:eh,onPointerUp:em,onPointerOver:ep,onPointerOut:ef,children:t})}),J()&&eM.map((e,r)=>{let o=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:o?[a.MathUtils.degToRad(j),0,0]:[0,0,0],children:(0,n.jsx)(h.Z,{moonData:e,planetPosition:_.current?.position,parentName:t,parentMeshRef:B},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),ex&&(0,n.jsx)(u.Z,{radius:ee,eccentricity:k,orbitalInclination:b,color:C,name:`${t}-orbit-path`,lineWidth:1,opacity:es,hiRes:H,arcLength:.75,position:_.current?.position,orbitalPeriod:w})]})}},8236:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:i=0,rotation:s,texture:l,detail:c=16}=e,u=(0,o.useMemo)(()=>{let e=new a.CylinderGeometry(r,t,i,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,i]),d=(0,o.useMemo)(()=>new a.MeshBasicMaterial({map:l,side:a.DoubleSide,transparent:!0}),[l]);return(0,n.jsx)("mesh",{geometry:u,material:d,rotation:s})}},1675:function(e,t,r){var n=r(7437),o=r(2265),a=r(9373),i=r(5533),s=r(7776),l=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:u="planet"}=e,{toggleCameraTransitioning:d,setAutoRotate:h,autoRotate:m,toggleSatelliteCamera:p,satelliteCamera:f,activeCamera:M,setSatelliteCameraState:x}=(0,l.g5)(),{prevSpeed:v,setSimSpeed:g}=(0,l.ZP)(),{gl:y,camera:P}=(0,a.z)(),w=(0,o.useRef)(),b=(0,o.useRef)(!1),j=(0,o.useRef)({x:0,y:0}),R=(0,o.useRef)(new s.Spherical(5*r,Math.PI/2,0)),C=3*r,E=(0,o.useCallback)(()=>{h(!1)},[h]),k=(0,o.useCallback)(e=>{b.current=!0,j.current={x:e.clientX,y:e.clientY}},[]),S=(0,o.useCallback)(()=>{b.current=!1},[]),I=(0,o.useCallback)(e=>{if(!b.current)return;E();let t=e.clientX-j.current.x,r=e.clientY-j.current.y,n=R.current.phi-.45*r*.01,o=R.current.theta-.45*t*.01;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),R.current.theta=o,j.current={x:e.clientX,y:e.clientY}},[E]),L=(0,o.useCallback)(e=>{if(e.preventDefault(),!f)return;let t=.1*e.deltaY,r=s.MathUtils.clamp(R.current.radius+t,C,1e3);R.current.radius=r,E()},[f,r,u,E]),Z=(0,o.useCallback)(e=>{b.current=!0,e.touches?(e.preventDefault(),j.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):j.current={x:e.clientX,y:e.clientY}},[]),z=(0,o.useCallback)(e=>{if(!b.current)return;E();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-j.current.x,o=r-j.current.y,a=R.current.phi-.003*o,i=R.current.theta-.003*n;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,a)),R.current.theta=i,j.current={x:t,y:r}},[E]);(0,a.A)((e,n)=>{if(!w.current||!t)return;let o=new s.Vector3;t.getWorldPosition(o);let a=t.position.clone();m&&(R.current.theta+=.05*n);let i=new s.Vector3().setFromSpherical(R.current).add(a);if(w.current.position.copy(i),w.current.lookAt(a),w.current.updateMatrixWorld(),f){let e=new s.Vector3;w.current.getWorldPosition(e);let t=new s.Quaternion;w.current.getWorldQuaternion(t),x(e,new s.Euler().setFromQuaternion(t),o)}M.name===c&&!f&&P.position.distanceTo(o)<=Math.max(5*r,.1)&&V(P,o)});let V=(0,o.useCallback)((e,r)=>{let n=e.position.clone(),o=t.parent.matrixWorld.clone().invert(),a=n.applyMatrix4(o),i=t.position.clone(),l=a.sub(i);R.current.setFromVector3(l),R.current.radius=s.MathUtils.clamp(R.current.radius,C,1e3),w.current.position.copy(a),w.current.lookAt(i),p(!0),d(!1),g(v)},[t,u,r,p,d,g,v]);return(0,o.useEffect)(()=>{let e=y.domElement;return e.addEventListener("mousedown",k),window.addEventListener("mousemove",I),window.addEventListener("mouseup",S),e.addEventListener("wheel",L),e.addEventListener("touchstart",Z),e.addEventListener("touchmove",z),e.addEventListener("touchend",S),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",k),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",S),e.removeEventListener("wheel",L),e.removeEventListener("touchstart",Z),e.removeEventListener("touchmove",z),e.removeEventListener("touchend",S),e.removeEventListener("contextmenu",e=>e.preventDefault()),f&&p(!1)}},[k,I,S,L,Z,z,y.domElement,f,p]),(0,n.jsx)(i.c,{ref:w,name:"planet-satellite-camera-"+c,makeDefault:f,fov:50,near:1e-4,far:12e5},c)}},4242:function(e,t,r){r.d(t,{e:function(){return n}});let n={uniforms:{glowColor:{value:new(r(7776)).Color(3377407)},glowIntensity:{value:.6}},vertexShader:`
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        vNormal = normalize(normalMatrix * normal);
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        vViewPosition = -mvPosition.xyz;
        gl_Position = projectionMatrix * mvPosition;
      }
    `,fragmentShader:`
      uniform vec3 glowColor;
      uniform float glowIntensity;
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        float rim = 1.0 - max(dot(normalize(vViewPosition), vNormal), 0.0);
        rim = pow(rim, 3.0); // Increased power for sharper falloff
        gl_FragColor = vec4(glowColor, rim * glowIntensity);
      }
    `}}}]);