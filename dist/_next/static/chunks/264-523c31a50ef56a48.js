"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{625:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(7871),l=r(2325),c=r(8384),u=r(8942),d=r(878),h=r(6209),m=r(1577);let p=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:p,parentName:f,parentMeshRef:x}=e,{name:M,orbitalRadius:v,radius:g,color:y,orbitalPeriod:w,orbitalInclination:P,eccentricity:b}=r,j=t||(0,o.useRef)(),R=(0,o.useRef)(2*Math.random()*Math.PI),E=(0,o.useRef)(),k=(0,o.useRef)(new a.Vector3),C="Moon"===M?(0,s.m)("../assets/earth/moon/moon.jpg"):null,S=(0,o.useMemo)(()=>({radius:g*u.sh,orbitalRadius:v*u.H_,meanMotion:2*Math.PI/(86400*w),inclination:Math.PI/180*P}),[g,v,w,P]),{isSurfaceCameraActive:I,satelliteCamera:L,activeCamera:Z,setAutoRotate:z,autoRotate:V,switchToMoonCamera:Y}=(0,c.g5)(),{simSpeed:$,toggleDetailsMenu:U}=(0,c.ZP)(),{selectedMoon:N,setSelectedMoon:T,displayLabels:X,orbitPaths:_,updateMoonPosition:W,updateMoonWorldPosition:A}=(0,c.d2)(),B=N?.name===M,D=M===Z?.name;(0,o.useEffect)(()=>{C&&(C.colorSpace=a.SRGBColorSpace,C.needsUpdate=!0)},[]);let G=(0,o.useCallback)(e=>{e.stopPropagation(),B||(U(!0),T(r),Y(f,M))},[B,r,f,M]);(0,o.useCallback)(e=>{e.stopPropagation(),z(!V)},[V,z]);let F=(0,o.useMemo)(()=>new a.Vector3,[]),O=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,i.A)((e,t)=>{if(!j.current)return;R.current-=S.meanMotion*(t*$);let r=R.current;for(let e=0;e<10;e++){let e=(r-b*Math.sin(r)-R.current)/(1-b*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+b)/(1-b))*Math.tan(r/2)),o=S.orbitalRadius*(1-b*b)/(1+b*Math.cos(n)),a=o*Math.sin(-n),i=Math.sin(S.inclination)*a,s=Math.cos(S.inclination)*a;if(O.set(o*Math.cos(-n),i,s),j.current.position.copy(O),B||D){j.current.getWorldPosition(k.current);let e=k.current;W(M,{x:e.x,y:e.y,z:e.z}),A(M,{x:e.x,y:e.y,z:e.z})}"Moon"===M&&p&&(F.set(...p),j.current.lookAt(F))}),(0,n.jsxs)(n.Fragment,{children:[D&&j.current&&(0,n.jsx)(h.Z,{target:j.current,targetName:M,size:S.radius}),(0,n.jsxs)("group",{ref:j,children:[(0,n.jsxs)("mesh",{ref:E,onClick:G,rotation:"Moon"===M?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("sphereGeometry",{args:[S.radius,B?32:14,B?20:12]}),(0,n.jsx)("meshStandardMaterial",{metalness:.2,roughness:.8,map:C||null,color:C?null:y})]},M),B?(0,n.jsx)(l.V,{position:[0,1.2*S.radius,0],center:!0,zIndexRange:[100,0],style:B?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:G,style:{color:y,fontSize:"12px",cursor:"pointer"},children:M})}):(0,n.jsx)(m.Z,{text:M,size:12,position:[0,1.2*S.radius,0],color:y,handleClick:G,font:"../assets/fonts/Termina_Black.ttf"})]}),_&&(0,n.jsx)(d.Z,{origin:[0,0,0],radius:S.orbitalRadius,eccentricity:b,orbitalInclination:P,color:y,name:`${M}-orbit-path`,hiRes:B,lineWidth:B?2:1,position:j.current?.position,arcLength:.9,orbitalPeriod:w})]})});t.Z=o.memo(p)},5264:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(2325),l=r(8384),c=r(2079),u=r(878),d=r(1675),h=r(625),m=r(1577),p=r(4242),f=r(8236);let x=(e,t)=>2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(e/2)),M=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6,a=e;for(let e=0;e<n;e++){let e=(a-t*Math.sin(a)-r)/(1-t*Math.cos(a));if(a-=e,Math.abs(e)<o)break}return a},v=(e,t,r)=>{let n=x(M(e,t,e),t),o=r*(1-t*t)/(1+t*Math.cos(n));return{x:o*Math.cos(-n),baseZ:o*Math.sin(-n)}};t.Z=e=>{let{name:t="Earth",textures:r}=e,{planetsData:x,moonsData:M}=(0,l.d2)(),g={...x[t]},{radius:y=1,orbitalOrigin:w,orbitalRadius:P=1,orbitalPeriod:b=1,orbitalInclination:j=0,axialTilt:R=0,rotationPeriod:E=1,color:k="#ffffff",initialOrbitalAngle:C=0,eccentricity:S=0,mass:I}=g,{simSpeed:L,toggleDetailsMenu:Z}=(0,l.ZP)(),{planetAngles:z,updatePlanetPosition:V,selectedPlanet:Y,setSelectedPlanet:$,moonSelected:U,displayLabels:N,selectedMoon:T,setSelectedMoon:X,orbitPaths:_}=(0,l.d2)(),{isSurfaceCameraActive:W,satelliteCamera:A,toggleSatelliteCamera:B,setAutoRotate:D,autoRotate:G,activeCamera:F,switchToPlanetCamera:O,toggleCameraTransitioning:q}=(0,l.g5)(),Q=(0,o.useRef)(),H=(0,o.useRef)(z[t]||0),J=(0,o.useRef)(),K=(0,o.useRef)(null),[ee,et]=(0,o.useState)(!1),[er,en]=(0,o.useState)(!1),[eo,ea]=(0,o.useState)(!1),ei=(0,o.useRef)({x:0,y:0}),es=F.name===t||Y?.name===t,el=()=>!!es||T?.parentName===t,ec=(0,o.useMemo)(()=>({scaledOrbitalRadius:P*(W?1e-4:c.Hm),scaledRadius:y*c.YB,rotationSpeed:E?2*Math.PI/(3600*E)*c.E_:0,detailLevel:es||el()?64:16}),[P,W,y,E,es,el]),{scaledOrbitalRadius:eu,scaledRadius:ed,rotationSpeed:eh,detailLevel:em}=ec,ep=(0,o.useRef)(ec.scaledRadius),[ef,ex]=(0,o.useState)(!1),[eM,ev]=(0,o.useState)(1);(0,o.useEffect)(()=>()=>{if(K.current){let e=K.current.geometry,t=K.current.material;e.dispose(),Array.isArray(t)?t.forEach(e=>e.dispose()):t&&t.dispose()}},[]);let eg=(0,o.useCallback)((e,r)=>{let n=r*L,o=2*Math.PI/(86400*b);if(0===H.current?H.current=Math.PI/180*C:H.current-=o*n,Q.current){let{x:r,baseZ:o}=v(H.current,S,eu),i=Math.PI/180*j,s=Math.sin(i)*o,l=Math.cos(i)*o;if(Q.current.position.set(r,s,l),V(t,{x:r,y:s,z:l}),E&&K.current){let e=2*Math.PI/(3600*E)*n,t=new a.Vector3(0,1,0);K.current.rotateOnAxis(t,e),Q.current.rotation.y>=2*Math.PI&&es&&(Q.current.rotation.y%=2*Math.PI),J.current&&(J.current.rotation.y+=1.1*e)}let c=Q.current.position.distanceTo(e.camera.position);ex(es||c<700);let u=100*ed,d=1*ed;ev(Math.max(0,Math.min(1,(c-d)/(u-d))))}},[L,b,C,S,eu,j,E,t,es,ed,T,F.type,700]);(0,i.A)(eg),(0,o.useEffect)(()=>{K.current&&(K.current.rotation.order="YXZ",K.current.rotation.y=0,K.current.rotation.x=a.MathUtils.degToRad(R))},[R,Y]);let ey=(0,o.useCallback)(e=>{e.stopPropagation(),er||F.name===t||(Z(!0),X(null),$(g),O(t))},[er,F.name,t,g]),ew=e=>{e.stopPropagation(),en(!1),ei.current={x:e.clientX,y:e.clientY}},eP=e=>{Math.sqrt(Math.pow(e.clientX-ei.current.x,2)+Math.pow(e.clientY-ei.current.y,2))>5&&en(!0)},eb=e=>{en(!1)},ej=e=>{e.stopPropagation(),document.body.style.cursor="pointer",ea(!0)},eR=e=>{e.stopPropagation(),document.body.style.cursor="auto",ea(!1)},eE=M[t]||[],ek=_&&(!Y&&!T||eo||es);return(0,o.useEffect)(()=>{r?.map&&(r.map.colorSpace=a.SRGBColorSpace,r.map.needsUpdate=!0),r?.clouds&&(r.clouds.colorSpace=a.SRGBColorSpace,r.clouds.needsUpdate=!0)},[]),(0,n.jsxs)(n.Fragment,{children:[F?.name===t&&Q.current&&(0,n.jsx)(d.Z,{target:Q.current,targetName:t,size:ed,bodyType:"planet"}),(0,n.jsxs)("group",{ref:Q,children:[(0,n.jsx)("mesh",{visible:!1,onClick:ey,onPointerDown:ew,onPointerMove:eP,onPointerUp:eb,onPointerOver:ej,onPointerOut:eR,children:F?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[el()?ed:8*ep.current,8,8]})}),(0,n.jsxs)("mesh",{ref:K,castShadow:!0,children:[(0,n.jsx)("sphereGeometry",{args:[el()?ed:8*ep.current,em,em/2]}),es?(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map}):(0,n.jsx)("meshBasicMaterial",{color:k}),"Earth"===t&&es&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:J,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*ed,em,em/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8,depthWrite:!1})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.01*ed,em,em]}),(0,n.jsx)("shaderMaterial",{args:[p.e],transparent:!0,opacity:.1,side:a.BackSide,depthWrite:!1,depthTest:!0})]},`${t}-atmosphere_texture`)]})]},es?`${t}-textured`:`${t}-basic`),"Saturn"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.2*ed,outerRadius:2*ed,height:0,rotation:[a.MathUtils.degToRad(R),0,0],texture:es?r?.ringTexture:null,detail:Math.max(em,32)},`${em}${t}-ring`),"Uranus"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.5*ed,outerRadius:1.9*ed,height:0,texture:es?r?.ringTexture:null,detail:Math.max(em,32),rotation:[a.MathUtils.degToRad(R),0,0]},`${em}${t}-ring`),!es&&(N||eo&&!es)&&(0,n.jsx)("group",{position:[0,0,0],children:(0,n.jsx)(m.Z,{text:t,size:16,position:[0,13*ep.current,0],color:k,handleClick:ey,handlePointerDown:ew,font:"../assets/fonts/Termina_Black.ttf"})}),N&&es&&(0,n.jsx)(s.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":1.12*ed,zIndexRange:[100,0],style:es?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:ey,onPointerDown:ew,onPointerMove:eP,onPointerUp:eb,onPointerOver:ej,onPointerOut:eR,children:t})}),el()&&eE.map((e,r)=>{let o=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:o?[a.MathUtils.degToRad(R),0,0]:[0,0,0],children:(0,n.jsx)(h.Z,{moonData:e,planetPosition:Q.current?.position,parentName:t,parentMeshRef:K},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),ek&&(0,n.jsx)(u.Z,{radius:eu,eccentricity:S,orbitalInclination:j,color:k,name:`${t}-orbit-path`,lineWidth:1,opacity:eM,hiRes:es,arcLength:.9,position:Q.current?.position,orbitalPeriod:b})]})}},8236:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:i=0,rotation:s,texture:l,detail:c=16}=e,u=(0,o.useMemo)(()=>{let e=new a.CylinderGeometry(r,t,i,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,i]),d=(0,o.useMemo)(()=>new a.MeshBasicMaterial({map:l,side:a.DoubleSide,transparent:!0}),[l]);return(0,n.jsx)("mesh",{geometry:u,material:d,rotation:s})}},1675:function(e,t,r){var n=r(7437),o=r(2265),a=r(9373),i=r(5533),s=r(7776),l=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:u="planet"}=e,{toggleCameraTransitioning:d,setAutoRotate:h,autoRotate:m,toggleSatelliteCamera:p,satelliteCamera:f,activeCamera:x,setSatelliteCameraState:M}=(0,l.g5)(),{prevSpeed:v,setSimSpeed:g}=(0,l.ZP)(),{gl:y,camera:w}=(0,a.z)(),P=(0,o.useRef)(),b=(0,o.useRef)(!1),j=(0,o.useRef)({x:0,y:0}),R=(0,o.useRef)(new s.Spherical(6*r,Math.PI/2,0)),E=2.8*r,k=(0,o.useCallback)(()=>{h(!1)},[h]),C=(0,o.useCallback)(e=>{b.current=!0,j.current={x:e.clientX,y:e.clientY}},[]),S=(0,o.useCallback)(()=>{b.current=!1},[]),I=(0,o.useCallback)(e=>{if(!b.current)return;k();let t=e.clientX-j.current.x,r=e.clientY-j.current.y,n=R.current.phi-.45*r*.01,o=R.current.theta-.45*t*.01;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),R.current.theta=o,j.current={x:e.clientX,y:e.clientY}},[k]),L=(0,o.useCallback)(e=>{if(!f)return;let t=.1*e.deltaY,r=s.MathUtils.clamp(R.current.radius+t,E,1e3);R.current.radius=r,k()},[f,r,u,k]),Z=(0,o.useCallback)(e=>{b.current=!0,e.touches?(e.preventDefault(),j.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):j.current={x:e.clientX,y:e.clientY}},[]),z=(0,o.useCallback)(e=>{if(!b.current)return;k();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-j.current.x,o=r-j.current.y,a=R.current.phi-.003*o,i=R.current.theta-.003*n;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,a)),R.current.theta=i,j.current={x:t,y:r}},[k]);(0,a.A)((e,n)=>{if(!P.current||!t)return;let o=new s.Vector3;t.getWorldPosition(o);let a=t.position.clone();m&&(R.current.theta+=.05*n);let i=new s.Vector3().setFromSpherical(R.current).add(a);if(P.current.position.copy(i),P.current.lookAt(a),P.current.updateMatrixWorld(),f){let e=new s.Vector3;P.current.getWorldPosition(e);let t=new s.Quaternion;P.current.getWorldQuaternion(t),M(e,new s.Euler().setFromQuaternion(t),o)}x.name===c&&!f&&w.position.distanceTo(o)<=4.5*r&&V(w,o)});let V=(0,o.useCallback)((e,r)=>{let n=e.position.clone(),o=t.parent.matrixWorld.clone().invert(),a=n.applyMatrix4(o),i=t.position.clone(),l=a.sub(i);R.current.setFromVector3(l),R.current.radius=s.MathUtils.clamp(R.current.radius,E,1e3),P.current.position.copy(a),P.current.lookAt(i),p(!0),d(!1),g(v)},[t,u,r,p,d,g,v]);return(0,o.useEffect)(()=>{let e=y.domElement;return e.addEventListener("mousedown",C),window.addEventListener("mousemove",I),window.addEventListener("mouseup",S),e.addEventListener("wheel",L,{passive:!0}),e.addEventListener("touchstart",Z),e.addEventListener("touchmove",z),e.addEventListener("touchend",S),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",C),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",S),e.removeEventListener("wheel",L),e.removeEventListener("touchstart",Z),e.removeEventListener("touchmove",z),e.removeEventListener("touchend",S),e.removeEventListener("contextmenu",e=>e.preventDefault()),f&&p(!1)}},[C,I,S,L,Z,z,y.domElement,f,p]),(0,n.jsx)(i.c,{ref:P,name:"planet-satellite-camera-"+c,makeDefault:f,fov:50,near:1e-4,far:12e5},c)}},4242:function(e,t,r){r.d(t,{e:function(){return n}});let n={uniforms:{glowColor:{value:new(r(7776)).Color(3377407)},glowIntensity:{value:.6}},vertexShader:`
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        vNormal = normalize(normalMatrix * normal);
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        vViewPosition = -mvPosition.xyz;
        gl_Position = projectionMatrix * mvPosition;
      }
    `,fragmentShader:`
      uniform vec3 glowColor;
      uniform float glowIntensity;
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        float rim = 1.0 - max(dot(normalize(vViewPosition), vNormal), 0.0);
        rim = pow(rim, 3.0); // Increased power for sharper falloff
        gl_FragColor = vec4(glowColor, rim * glowIntensity);
      }
    `}}}]);