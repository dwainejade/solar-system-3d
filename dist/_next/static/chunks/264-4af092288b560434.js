"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{5264:function(e,t,r){var n=r(7437),a=r(2265),o=r(7776),s=r(9373),i=r(2325),u=r(8384),c=r(2079),l=r(878),h=r(1675),d=r(2167),m=r(1577),p=r(8942),x=r(1045),M=r(8236);t.Z=e=>{let{name:t="Earth",textures:r}=e,{planetsData:f}=(0,u.d2)(),v={...f[t]},{radius:g=1,orbitalOrigin:y,orbitalRadius:P=1,orbitalPeriod:w=1,orbitalInclination:j=0,axialTilt:E=0,rotationPeriod:b=1,color:k="#ffffff",initialOrbitalAngle:R=0,eccentricity:C=0}=v,{simSpeed:L,toggleDetailsMenu:Y}=(0,u.ZP)(),{planetAngles:S,updatePlanetPosition:Z,selectedPlanet:X,setSelectedPlanet:I,displayLabels:D,selectedMoon:T,setSelectedMoon:U,orbitPaths:_}=(0,u.d2)(),{isSurfaceCameraActive:F,satelliteCamera:N,toggleSatelliteCamera:V,setAutoRotate:$,autoRotate:A,activeCamera:B,switchToPlanetCamera:G,toggleCameraTransitioning:O}=(0,u.g5)(),W=(0,a.useRef)(),z=(0,a.useRef)(S[t]||0),Q=(0,a.useRef)(),q=(0,a.useRef)(null),[H,J]=(0,a.useState)(!1),[K,ee]=(0,a.useState)(!1),[et,er]=(0,a.useState)(!1),en=(0,a.useRef)({x:0,y:0}),ea=P*(F?1e-4:c.Hm),eo=g*c.YB;c.E_;let es=X&&X.name===t,ei=()=>!!es||T?.parentName===t,eu=es||ei()?64:16,[ec,el]=(0,a.useState)(eo),eh=(0,a.useRef)(1),[ed,em]=(0,a.useState)(!1),[ep,ex]=(0,a.useState)(1);(0,s.A)((e,r)=>{let n=r*L;0===z.current?z.current=Math.PI/180*R:z.current-=2*Math.PI/(86400*w)*n;let a=z.current;for(let e=0;e<10;e++){let e=(a-C*Math.sin(a)-z.current)/(1-C*Math.cos(a));if(a-=e,1e-6>Math.abs(e))break}let s=2*Math.atan(Math.sqrt((1+C)/(1-C))*Math.tan(a/2)),i=ea*(1-C*C)/(1+C*Math.cos(s)),u=i*Math.cos(-s),c=i*Math.sin(-s);if(W.current){let r=Math.PI/180*j,a=Math.sin(r)*c,s=Math.cos(r)*c;if(W.current.position.set(u,a,s),Z(t,{x:u,y:a,z:s}),b){let e=2*Math.PI/(3600*b)*n,t=new o.Vector3(0,1,0);q.current.rotateOnAxis(t,e),W.current.rotation.y>=2*Math.PI&&es&&(W.current.rotation.y%=2*Math.PI),Q.current&&(Q.current.rotation.y+=1.1*e)}let i=W.current.position.distanceTo(e.camera.position);i/1e3<=eo?el(eo):el(i/1e3),em("moon"===B.type||i<500);let l=100*eo,h=1*eo;ex(Math.max(0,Math.min(1,(i-h)/(l-h)))),eh.current&&(eh.current=.02*i)}}),(0,a.useEffect)(()=>{q.current&&(q.current.rotation.order="YXZ",q.current.rotation.y=0,q.current.rotation.x=o.MathUtils.degToRad(E))},[E,X]);let eM=e=>{e.stopPropagation(),K||B.name===t||(Y(!0),U(null),I(v),G(t))},ef=e=>{e.stopPropagation(),ee(!1),en.current={x:e.clientX,y:e.clientY}},ev=e=>{Math.sqrt(Math.pow(e.clientX-en.current.x,2)+Math.pow(e.clientY-en.current.y,2))>5&&ee(!0)},eg=e=>{ee(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",er(!0)},eP=e=>{e.stopPropagation(),document.body.style.cursor="auto",er(!1)},ew=p.ZP[t]||[];return(0,n.jsxs)(n.Fragment,{children:[B?.name===t&&W.current&&(0,n.jsx)(h.Z,{target:W.current,targetName:t,size:eo,bodyType:"planet"}),(0,n.jsxs)("group",{ref:W,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eM,onPointerDown:ef,onPointerMove:ev,onPointerUp:eg,onPointerOver:ey,onPointerOut:eP,children:B?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[ei()?eo:8*ec,8,8]})}),(0,n.jsxs)("mesh",{ref:q,onDoubleClick:e=>{e.stopPropagation(),$(!A)},children:[(0,n.jsx)("sphereGeometry",{args:[ei()?eo:8*ec,eu,eu/2]}),es||ei()||!H?(0,n.jsxs)(n.Fragment,{children:["Earth"===t&&es&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:Q,children:[(0,n.jsx)("sphereGeometry",{args:[Math.min(1.008*eo),eu,eu/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[Math.min(1.02*eo),eu,eu/2]}),(0,n.jsx)("shaderMaterial",{args:[x.et]})]},`${t}-atmosphere_texture`)]}),(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map,onBuild:()=>J(!0)})]}):(0,n.jsx)("meshBasicMaterial",{color:k})]},es?t+"-textured":t+"-basic"),"Saturn"===t&&ed&&(0,n.jsx)(M.Z,{innerRadius:1.2*eo,outerRadius:2*eo,height:0,rotation:[o.MathUtils.degToRad(E),0,0],texture:es?r?.ringTexture:null,detail:Math.max(eu,32)},eu+t+"-ring"),"Uranus"===t&&ed&&(0,n.jsx)(M.Z,{innerRadius:1.5*eo,outerRadius:1.9*eo,height:0,texture:es?r?.ringTexture:null,detail:Math.max(eu,32),rotation:[o.MathUtils.degToRad(E),0,0]},eu+t+"-ring"),(D&&!es||et&&!es)&&(0,n.jsx)(m.Z,{text:t,size:eh?.current,position:[0,1.2*ec+eh?.current,0],color:k,handleClick:eM,handlePointerDown:ef,font:"../assets/fonts/Termina_Black.ttf"},t),D&&es&&(0,n.jsx)(i.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":es?ec+.25*ec:4*ec,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:eM,onPointerDown:ef,onPointerMove:ev,onPointerUp:eg,onPointerOver:ey,onPointerOut:eP,children:t})}),ei()&&ew.map((e,r)=>{let a=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:a?[o.MathUtils.degToRad(E),0,0]:[0,0,0],children:(0,n.jsx)(d.Z,{moonData:e,planetPosition:W.current?.position,parentName:t},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),_&&(0,n.jsx)(l.Z,{origin:y,radius:ea,eccentricity:C,orbitalInclination:j,color:k,name:t+"-orbit-path",opacity:ep,hiRes:es})]})}},8236:function(e,t,r){var n=r(7437),a=r(2265),o=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:s=0,rotation:i,texture:u,detail:c=16}=e,l=(0,a.useMemo)(()=>{let e=new o.CylinderGeometry(r,t,s,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,s]),h=(0,a.useMemo)(()=>new o.MeshBasicMaterial({map:u,side:o.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:h,rotation:i})}},1675:function(e,t,r){var n=r(7437),a=r(2265),o=r(9373),s=r(5533),i=r(7776),u=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:l="planet"}=e,{toggleCameraTransitioning:h,setAutoRotate:d,autoRotate:m,toggleSatelliteCamera:p,satelliteCamera:x,activeCamera:M,setSatelliteCameraState:f}=(0,u.g5)(),{prevSpeed:v,setSimSpeed:g}=(0,u.ZP)(),{gl:y,camera:P}=(0,o.z)(),w=(0,a.useRef)(),j=(0,a.useRef)(!1),E=(0,a.useRef)({x:0,y:0}),b=(0,a.useRef)(new i.Spherical(6*r,Math.PI/2,0)),k=(0,a.useCallback)(()=>{d(!1)},[d]),R=(0,a.useCallback)(e=>{j.current=!0,E.current={x:e.clientX,y:e.clientY}},[]),C=(0,a.useCallback)(()=>{j.current=!1},[]),L=(0,a.useCallback)(e=>{if(!j.current)return;k();let t=e.clientX-E.current.x,r=e.clientY-E.current.y,n=b.current.phi-.45*r*.01,a=b.current.theta-.45*t*.01;b.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),b.current.theta=a,E.current={x:e.clientX,y:e.clientY}},[k]),Y=(0,a.useCallback)(e=>{if(!x)return;let t=.01*e.deltaY,r=i.MathUtils.clamp(b.current.radius+t,2,500);b.current.radius=r,k()},[x,r,k]),S=(0,a.useCallback)(e=>{j.current=!0,e.touches?(e.preventDefault(),E.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):E.current={x:e.clientX,y:e.clientY}},[]),Z=(0,a.useCallback)(e=>{if(!j.current)return;k();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-E.current.x,a=r-E.current.y,o=b.current.phi-.003*a,s=b.current.theta-.003*n;b.current.phi=Math.max(.1,Math.min(Math.PI-.1,o)),b.current.theta=s,E.current={x:t,y:r}},[k]);(0,o.A)((e,n)=>{if(!w.current||!t)return;let a=new i.Vector3;t.getWorldPosition(a);let o=t.position.clone();m&&(b.current.theta+=.05*n);let s=new i.Vector3().setFromSpherical(b.current).add(o);if(w.current.position.copy(s),w.current.lookAt(o),w.current.updateMatrixWorld(),x){let e=new i.Vector3;w.current.getWorldPosition(e);let t=new i.Quaternion;w.current.getWorldQuaternion(t),f(e,new i.Euler().setFromQuaternion(t),a)}M.name===c&&!x&&P.position.distanceTo(a)<=Math.max(4.5*r,.1)&&X(P,a)});let X=(0,a.useCallback)((e,r)=>{let n=e.position.clone(),a=t.parent.matrixWorld.clone().invert(),o=n.applyMatrix4(a),s=t.position.clone(),i=o.sub(s);b.current.setFromVector3(i),w.current.position.copy(o),w.current.lookAt(s),p(!0),h(!1),g(v)},[t,p,h,g,v]);return(0,a.useEffect)(()=>{let e=y.domElement;return e.addEventListener("mousedown",R),window.addEventListener("mousemove",L),window.addEventListener("mouseup",C),e.addEventListener("wheel",Y,{passive:!0}),e.addEventListener("touchstart",S),e.addEventListener("touchmove",Z),e.addEventListener("touchend",C),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",R),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",C),e.removeEventListener("wheel",Y),e.removeEventListener("touchstart",S),e.removeEventListener("touchmove",Z),e.removeEventListener("touchend",C),e.removeEventListener("contextmenu",e=>e.preventDefault()),x&&p(!1)}},[R,L,C,Y,S,Z,y.domElement,x,p]),(0,n.jsx)(s.c,{ref:w,name:"satellite-camera-"+c,makeDefault:x,fov:50,near:.01,far:12e5},c)}}}]);