"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{3537:function(e,t,r){r.d(t,{V:function(){return s}});var n=r(2988),o=r(2265),a=r(7776),i=r(9373);let s=o.forwardRef(function({children:e,follow:t=!0,lockX:r=!1,lockY:s=!1,lockZ:u=!1,...c},l){let d=o.useRef(null),h=o.useRef(null),m=new a.Quaternion;return(0,i.A)(({camera:e})=>{if(!t||!h.current)return;let n=h.current.rotation.clone();h.current.updateMatrix(),h.current.updateWorldMatrix(!1,!1),h.current.getWorldQuaternion(m),e.getWorldQuaternion(d.current.quaternion).premultiply(m.invert()),r&&(h.current.rotation.x=n.x),s&&(h.current.rotation.y=n.y),u&&(h.current.rotation.z=n.z)}),o.useImperativeHandle(l,()=>h.current,[]),o.createElement("group",(0,n.Z)({ref:h,matrixAutoUpdate:!1,matrixWorldAutoUpdate:!1},c),o.createElement("group",{ref:d},e))})},4379:function(e,t,r){r.d(t,{x:function(){return s}});var n=r(2988),o=r(2265),a=r(9373),i=r(9429);let s=o.forwardRef(({sdfGlyphSize:e=64,anchorX:t="center",anchorY:s="middle",font:u,fontSize:c=1,children:l,characters:d,onSync:h,...m},p)=>{let{Text:f,preloadFont:x}=(0,i.Rq)(async()=>Promise.all([r.e(918),r.e(610)]).then(r.bind(r,5212)),[]),v=(0,a.z)(({invalidate:e})=>e),[M]=o.useState(()=>new f),[g,y]=o.useMemo(()=>{let e=[],t="";return o.Children.forEach(l,r=>{"string"==typeof r||"number"==typeof r?t+=r:e.push(r)}),[e,t]},[l]);return(0,i.Rq)(()=>new Promise(e=>x({font:u,characters:d},e)),["troika-text",u,d]),o.useLayoutEffect(()=>void M.sync(()=>{v(),h&&h(M)})),o.useEffect(()=>()=>M.dispose(),[M]),o.createElement("primitive",(0,n.Z)({object:M,ref:p,font:u,text:y,anchorX:t,anchorY:s,fontSize:c,sdfGlyphSize:e},m),g)})},1577:function(e,t,r){var n=r(7437),o=r(3537),a=r(4379);t.Z=function(e){let{name:t,text:r,size:i=1,position:s=[0,3,0],color:u,handleClick:c,handlePointerDown:l,font:d="../assets/fonts/Termina_Black.ttf"}=e;return(0,n.jsx)(o.V,{onClick:c,onPointerDown:e=>l(e,"down"),onPointerOver:()=>{c&&(document.body.style.cursor="pointer")},onPointerOut:()=>{c&&(document.body.style.cursor="auto")},children:(0,n.jsx)(a.x,{position:s,scale:i,color:u,font:d,anchorX:"center",anchorY:"middle",children:r.toUpperCase()})})}},625:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(7871),u=r(2325),c=r(8384),l=r(8942),d=r(878),h=r(6209);let m=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:m,parentName:p,parentMeshRef:f}=e,{name:x,orbitalRadius:v,radius:M,color:g,orbitalPeriod:y,orbitalInclination:w,eccentricity:P}=r,b=t||(0,o.useRef)(),j=(0,o.useRef)(2*Math.random()*Math.PI),R=(0,o.useRef)(),E=(0,o.useRef)(new a.Vector3),C="Moon"===x?(0,s.m)("../assets/earth/moon/moon.jpg"):null,k=(0,o.useMemo)(()=>({radius:M*l.sh,orbitalRadius:v*l.H_,meanMotion:2*Math.PI/(86400*y),inclination:Math.PI/180*w}),[M,v,y,w]),{isSurfaceCameraActive:S,satelliteCamera:I,activeCamera:L,setAutoRotate:Z,autoRotate:z,switchToMoonCamera:V}=(0,c.g5)(),{simSpeed:Y,toggleDetailsMenu:W}=(0,c.ZP)(),{selectedMoon:X,setSelectedMoon:_,displayLabels:T,orbitPaths:U,updateMoonPosition:A,updateMoonWorldPosition:D}=(0,c.d2)(),N=X?.name===x,O=x===L?.name,B=(0,o.useMemo)(()=>new a.SphereGeometry(k.radius,N?32:14,N?16:12),[k.radius,N]),F=(0,o.useMemo)(()=>new a.MeshStandardMaterial({metalness:.2,roughness:.8,map:C||null,color:C?null:g,onBeforeCompile:e=>{e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",`
        #include <map_fragment>
        diffuseColor.rgb *= .7;
        diffuseColor.rgb = pow(diffuseColor.rgb, vec3(1.5));
        `)}}),[C,g]),G=(0,o.useCallback)(e=>{e.stopPropagation(),N||(W(!0),_(r),V(p,x))},[N,r,p,x]),$=(0,o.useCallback)(e=>{e.stopPropagation(),Z(!z)},[z,Z]),q=(0,o.useMemo)(()=>new a.Vector3,[]),Q=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,i.A)((e,t)=>{if(!b.current)return;j.current-=k.meanMotion*(t*Y);let r=j.current;for(let e=0;e<10;e++){let e=(r-P*Math.sin(r)-j.current)/(1-P*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+P)/(1-P))*Math.tan(r/2)),o=k.orbitalRadius*(1-P*P)/(1+P*Math.cos(n)),a=o*Math.sin(-n),i=Math.sin(k.inclination)*a,s=Math.cos(k.inclination)*a;if(Q.set(o*Math.cos(-n),i,s),b.current.position.copy(Q),N||O){b.current.getWorldPosition(E.current);let e=E.current;A(x,{x:e.x,y:e.y,z:e.z}),D(x,{x:e.x,y:e.y,z:e.z})}"Moon"===x&&m&&(q.set(...m),b.current.lookAt(q))}),(0,n.jsxs)(n.Fragment,{children:[O&&b.current&&(0,n.jsx)(h.Z,{target:b.current,targetName:x,size:k.radius}),(0,n.jsxs)("group",{ref:b,children:[(0,n.jsxs)("mesh",{ref:R,onClick:G,onDoubleClick:$,rotation:"Moon"===x?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("primitive",{object:B}),(0,n.jsx)("primitive",{object:F})]},x),(T||N)&&(0,n.jsx)(u.V,{position:[0,1.2*k.radius,0],center:!0,zIndexRange:[100,0],occlude:f?[f]:void 0,occludeOptions:{threshold:.1,recursive:!1},style:N?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:G,style:{color:g,fontSize:N?"14px":"12px",cursor:"pointer"},children:x})})]}),U&&(0,n.jsx)(d.Z,{origin:[0,0,0],radius:k.orbitalRadius,eccentricity:P,orbitalInclination:w,color:g,name:`${x}-orbit-path`,hiRes:N,lineWidth:N?2:1,position:b.current?.position,arcLength:.8})]})});t.Z=o.memo(m)},5264:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776),i=r(9373),s=r(2325),u=r(8384),c=r(2079),l=r(878),d=r(1675),h=r(625),m=r(1577);r(8942);var p=r(4242),f=r(8236);let x=(e,t)=>2*Math.atan(Math.sqrt((1+t)/(1-t))*Math.tan(e/2)),v=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e-6,a=e;for(let e=0;e<n;e++){let e=(a-t*Math.sin(a)-r)/(1-t*Math.cos(a));if(a-=e,Math.abs(e)<o)break}return a},M=(e,t,r)=>{let n=x(v(e,t,e),t),o=r*(1-t*t)/(1+t*Math.cos(n));return{x:o*Math.cos(-n),baseZ:o*Math.sin(-n)}};t.Z=e=>{let{name:t="Earth",textures:r}=e,{planetsData:x,moonsData:v}=(0,u.d2)(),g={...x[t]},{radius:y=1,orbitalOrigin:w,orbitalRadius:P=1,orbitalPeriod:b=1,orbitalInclination:j=0,axialTilt:R=0,rotationPeriod:E=1,color:C="#ffffff",initialOrbitalAngle:k=0,eccentricity:S=0,mass:I}=g,{simSpeed:L,toggleDetailsMenu:Z}=(0,u.ZP)(),{planetAngles:z,updatePlanetPosition:V,selectedPlanet:Y,setSelectedPlanet:W,displayLabels:X,selectedMoon:_,setSelectedMoon:T,orbitPaths:U}=(0,u.d2)(),{isSurfaceCameraActive:A,satelliteCamera:D,toggleSatelliteCamera:N,setAutoRotate:O,autoRotate:B,activeCamera:F,switchToPlanetCamera:G,toggleCameraTransitioning:$}=(0,u.g5)(),q=(0,o.useRef)(),Q=(0,o.useRef)(z[t]||0),H=(0,o.useRef)(),J=(0,o.useRef)(null),[K,ee]=(0,o.useState)(!1),[et,er]=(0,o.useState)(!1),[en,eo]=(0,o.useState)(!1),ea=(0,o.useRef)({x:0,y:0}),ei=Y&&Y.name===t,es=()=>!!ei||_?.parentName===t,eu=(0,o.useMemo)(()=>({scaledOrbitalRadius:P*(A?1e-4:c.Hm),scaledRadius:y*c.YB,rotationSpeed:E?2*Math.PI/(3600*E)*c.E_:0,detailLevel:ei||es()?64:16}),[P,A,y,E,ei,es()]),{scaledOrbitalRadius:ec,scaledRadius:el,rotationSpeed:ed,detailLevel:eh}=eu,em=(0,o.useRef)(eu.scaledRadius),ep=(0,o.useRef)(1),[ef,ex]=(0,o.useState)(!1),[ev,eM]=(0,o.useState)(1);(0,o.useEffect)(()=>()=>{if(J.current){let e=J.current.geometry,t=J.current.material;e.dispose(),Array.isArray(t)?t.forEach(e=>e.dispose()):t&&t.dispose()}},[]);let eg=(0,o.useCallback)((e,r)=>{let n=r*L,o=2*Math.PI/(86400*b);if(0===Q.current?Q.current=Math.PI/180*k:Q.current-=o*n,q.current){let{x:r,baseZ:o}=M(Q.current,S,ec),i=Math.PI/180*j,s=Math.sin(i)*o,u=Math.cos(i)*o;if(q.current.position.set(r,s,u),V(t,{x:r,y:s,z:u}),E&&J.current){let e=2*Math.PI/(3600*E)*n,t=new a.Vector3(0,1,0);J.current.rotateOnAxis(t,e),q.current.rotation.y>=2*Math.PI&&ei&&(q.current.rotation.y%=2*Math.PI),H.current&&(H.current.rotation.y+=1.1*e)}let c=q.current.position.distanceTo(e.camera.position);c/1e3<=el?em.current=el:em.current=c/1e3,ep.current&&(ep.current=.02*c),ex("moon"===F.type||c<500);let l=100*el,d=1*el;eM(Math.max(0,Math.min(1,(c-d)/(l-d))))}},[L,b,k,S,ec,j,E,t,ei,el,F.type,500]);(0,i.A)(eg),(0,o.useEffect)(()=>{J.current&&(J.current.rotation.order="YXZ",J.current.rotation.y=0,J.current.rotation.x=a.MathUtils.degToRad(R))},[R,Y]);let ey=(0,o.useCallback)(e=>{e.stopPropagation(),et||F.name===t||(Z(!0),T(null),W(g),G(t))},[et,F.name,t,g]),ew=e=>{e.stopPropagation(),er(!1),ea.current={x:e.clientX,y:e.clientY}},eP=e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&er(!0)},eb=e=>{er(!1)},ej=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eo(!0)},eR=e=>{e.stopPropagation(),document.body.style.cursor="auto",eo(!1)},eE=v[t]||[];return(0,n.jsxs)(n.Fragment,{children:[F?.name===t&&q.current&&(0,n.jsx)(d.Z,{target:q.current,targetName:t,size:el,bodyType:"planet"}),(0,n.jsxs)("group",{ref:q,children:[(0,n.jsx)("mesh",{visible:!1,onClick:ey,onPointerDown:ew,onPointerMove:eP,onPointerUp:eb,onPointerOver:ej,onPointerOut:eR,children:F?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[es()?el:8*em.current,8,8]})}),(0,n.jsxs)("mesh",{ref:J,onDoubleClick:e=>{e.stopPropagation(),O(!B)},castShadow:!0,children:[(0,n.jsx)("sphereGeometry",{args:[es()?el:8*em.current,eh,eh/2]}),ei||es()||!K?(0,n.jsxs)(n.Fragment,{children:["Earth"===t&&ei&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:H,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*el,eh,eh/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8,depthWrite:!1})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.01*el,eh,eh]}),(0,n.jsx)("shaderMaterial",{args:[p.e],transparent:!0,opacity:.1,side:a.BackSide,depthWrite:!1,depthTest:!0})]},`${t}-atmosphere_texture`)]}),(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map,onBuild:()=>ee(!0)})]}):(0,n.jsx)("meshBasicMaterial",{color:C})]},ei?t+"-textured":t+"-basic"),"Saturn"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.2*el,outerRadius:2*el,height:0,rotation:[a.MathUtils.degToRad(R),0,0],texture:ei?r?.ringTexture:null,detail:Math.max(eh,32)},eh+t+"-ring"),"Uranus"===t&&ef&&(0,n.jsx)(f.Z,{innerRadius:1.5*el,outerRadius:1.9*el,height:0,texture:ei?r?.ringTexture:null,detail:Math.max(eh,32),rotation:[a.MathUtils.degToRad(R),0,0]},eh+t+"-ring"),!ei&&(X||en&&!ei)&&(0,n.jsx)(m.Z,{text:t,size:ep?.current,position:[0,1.2*em.current+ep?.current,0],color:C,handleClick:ey,handlePointerDown:ew,font:"../assets/fonts/Termina_Black.ttf"},t),X&&ei&&(0,n.jsx)(s.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":1.12*el,zIndexRange:[100,0],style:ei?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",style:{color:C},onClick:ey,onPointerDown:ew,onPointerMove:eP,onPointerUp:eb,onPointerOver:ej,onPointerOut:eR,children:t})}),es()&&eE.map((e,r)=>{let o=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:o?[a.MathUtils.degToRad(R),0,0]:[0,0,0],children:(0,n.jsx)(h.Z,{moonData:e,planetPosition:q.current?.position,parentName:t,parentMeshRef:J},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),U&&(0,n.jsx)(l.Z,{origin:w,radius:ec,eccentricity:S,orbitalInclination:j,color:C,name:t+"-orbit-path",lineWidth:ei?3:2,opacity:ev,hiRes:ei,position:q.current?.position,arcLength:.9})]})}},8236:function(e,t,r){var n=r(7437),o=r(2265),a=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:i=0,rotation:s,texture:u,detail:c=16}=e,l=(0,o.useMemo)(()=>{let e=new a.CylinderGeometry(r,t,i,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,i]),d=(0,o.useMemo)(()=>new a.MeshBasicMaterial({map:u,side:a.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:d,rotation:s})}},1675:function(e,t,r){var n=r(7437),o=r(2265),a=r(9373),i=r(5533),s=r(7776),u=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:l="planet"}=e,{toggleCameraTransitioning:d,setAutoRotate:h,autoRotate:m,toggleSatelliteCamera:p,satelliteCamera:f,activeCamera:x,setSatelliteCameraState:v}=(0,u.g5)(),{prevSpeed:M,setSimSpeed:g}=(0,u.ZP)(),{gl:y,camera:w}=(0,a.z)(),P=(0,o.useRef)(),b=(0,o.useRef)(!1),j=(0,o.useRef)({x:0,y:0}),R=(0,o.useRef)(new s.Spherical(6*r,Math.PI/2,0)),E=2.8*r,C=(0,o.useCallback)(()=>{h(!1)},[h]),k=(0,o.useCallback)(e=>{b.current=!0,j.current={x:e.clientX,y:e.clientY}},[]),S=(0,o.useCallback)(()=>{b.current=!1},[]),I=(0,o.useCallback)(e=>{if(!b.current)return;C();let t=e.clientX-j.current.x,r=e.clientY-j.current.y,n=R.current.phi-.45*r*.01,o=R.current.theta-.45*t*.01;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),R.current.theta=o,j.current={x:e.clientX,y:e.clientY}},[C]),L=(0,o.useCallback)(e=>{if(!f)return;let t=.1*e.deltaY,r=s.MathUtils.clamp(R.current.radius+t,E,1e3);R.current.radius=r,C()},[f,r,l,C]),Z=(0,o.useCallback)(e=>{b.current=!0,e.touches?(e.preventDefault(),j.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):j.current={x:e.clientX,y:e.clientY}},[]),z=(0,o.useCallback)(e=>{if(!b.current)return;C();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-j.current.x,o=r-j.current.y,a=R.current.phi-.003*o,i=R.current.theta-.003*n;R.current.phi=Math.max(.1,Math.min(Math.PI-.1,a)),R.current.theta=i,j.current={x:t,y:r}},[C]);(0,a.A)((e,n)=>{if(!P.current||!t)return;let o=new s.Vector3;t.getWorldPosition(o);let a=t.position.clone();m&&(R.current.theta+=.05*n);let i=new s.Vector3().setFromSpherical(R.current).add(a);if(P.current.position.copy(i),P.current.lookAt(a),P.current.updateMatrixWorld(),f){let e=new s.Vector3;P.current.getWorldPosition(e);let t=new s.Quaternion;P.current.getWorldQuaternion(t),v(e,new s.Euler().setFromQuaternion(t),o)}x.name===c&&!f&&w.position.distanceTo(o)<=4.5*r&&V(w,o)});let V=(0,o.useCallback)((e,r)=>{let n=e.position.clone(),o=t.parent.matrixWorld.clone().invert(),a=n.applyMatrix4(o),i=t.position.clone(),u=a.sub(i);R.current.setFromVector3(u),R.current.radius=s.MathUtils.clamp(R.current.radius,E,1e3),P.current.position.copy(a),P.current.lookAt(i),p(!0),d(!1),g(M)},[t,l,r,p,d,g,M]);return(0,o.useEffect)(()=>{let e=y.domElement;return e.addEventListener("mousedown",k),window.addEventListener("mousemove",I),window.addEventListener("mouseup",S),e.addEventListener("wheel",L,{passive:!0}),e.addEventListener("touchstart",Z),e.addEventListener("touchmove",z),e.addEventListener("touchend",S),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",k),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",S),e.removeEventListener("wheel",L),e.removeEventListener("touchstart",Z),e.removeEventListener("touchmove",z),e.removeEventListener("touchend",S),e.removeEventListener("contextmenu",e=>e.preventDefault()),f&&p(!1)}},[k,I,S,L,Z,z,y.domElement,f,p]),(0,n.jsx)(i.c,{ref:P,name:"satellite-camera-"+c,makeDefault:f,fov:50,near:1e-4,far:12e5},c)}},4242:function(e,t,r){r.d(t,{e:function(){return n}});let n={uniforms:{glowColor:{value:new(r(7776)).Color(3377407)},glowIntensity:{value:.6}},vertexShader:`
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        vNormal = normalize(normalMatrix * normal);
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        vViewPosition = -mvPosition.xyz;
        gl_Position = projectionMatrix * mvPosition;
      }
    `,fragmentShader:`
      uniform vec3 glowColor;
      uniform float glowIntensity;
      varying vec3 vNormal;
      varying vec3 vViewPosition;
      
      void main() {
        float rim = 1.0 - max(dot(normalize(vViewPosition), vNormal), 0.0);
        rim = pow(rim, 3.0); // Increased power for sharper falloff
        gl_FragColor = vec4(glowColor, rim * glowIntensity);
      }
    `}}}]);