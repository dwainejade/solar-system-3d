(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,3130))},3130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),s=r(9362),a=r(2265),o=r(7871),u=r(3719),i=r(9373);function l({pixelated:e}){let t=(0,i.z)(e=>e.gl),r=(0,i.z)(e=>e.internal.active),n=(0,i.z)(e=>e.performance.current),s=(0,i.z)(e=>e.viewport.initialDpr),o=(0,i.z)(e=>e.setDpr);return a.useEffect(()=>{let n=t.domElement;return()=>{r&&o(s),e&&n&&(n.style.imageRendering="auto")}},[]),a.useEffect(()=>{o(n*s),e&&t.domElement&&(t.domElement.style.imageRendering=1===n?"auto":"pixelated")},[n]),null}var c=r(8384),m=r(2079),p=r(8942),d=r(5375),x=r(2325),h=r(7776),g=r(878),j=r(1675),f=r(625),y=r(1577),M=r(1045),v=e=>{let{innerRadius:t,outerRadius:r,height:s=0,rotation:o,texture:u,detail:i=16}=e,l=(0,a.useMemo)(()=>{let e=new h.CylinderGeometry(r,t,s,i,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,s]),c=(0,a.useMemo)(()=>new h.MeshBasicMaterial({map:u,side:h.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:c,rotation:o})};let P=(0,a.forwardRef)((e,t)=>{let{name:r="Earth",textures:s}=e,{planetsData:o}=(0,c.d2)(),u={...o[r]},{mass:l,radius:d,orbitalOrigin:P,orbitalRadius:R,orbitalSpeed:_,orbitalPeriod:S,orbitalInclination:k,axialTilt:T,rotationPeriod:E,surfaceTemp:z,color:w,gravity:b,initialOrbitalAngle:D,interestPoints:Z}=u,{simSpeed:C,orbitPaths:U,toggleDetailsMenu:I}=(0,c.ZP)(),{planetAngles:Y,updatePlanetPosition:B,selectedPlanet:O,setSelectedPlanet:G,displayLabels:N,setSelectedMoon:X}=(0,c.d2)(),{isSurfaceCameraActive:A,satelliteCamera:F,toggleSatelliteCamera:V}=(0,c.g5)(),H=t||(0,a.useRef)(),q=(0,a.useRef)(Y[r]||0),J=(0,a.useRef)(),[K,L]=(0,a.useState)(!1),Q=R*(A?1e-4:m.Hm),W=d*m.YB;m.E_;let $=O&&O.name===r,ee=$?64:32,[et,er]=(0,a.useState)(!1),en=(0,a.useRef)({x:0,y:0}),es=(0,a.useRef)(),ea=(0,a.useRef)(),[eo,eu]=(0,a.useState)(W),ei=(0,a.useRef)(1),[el,ec]=(0,a.useState)(!1),[em,ep]=(0,a.useState)(1);(0,i.A)((e,t)=>{let n=t*C;0===q.current?q.current=Math.PI/180*D:q.current-=2*Math.PI/(86400*S)*n;let s=Q*Math.cos(q.current),a=Q*Math.sin(q.current);if(H.current){let t=Math.sin(Math.PI/180*k)*Q*Math.sin(q.current);if(H.current.position.set(s,t,a),B(r,{x:s,y:t,z:a}),E){let e=2*Math.PI/(3600*E)*n,t=new h.Vector3(0,1,0);es.current.rotateOnAxis(t,e),H.current.rotation.y>=2*Math.PI&&$&&(H.current.rotation.y%=2*Math.PI),ea.current&&(ea.current.rotation.y+=e),J.current&&(J.current.rotation.y+=1.2*e)}let o=H.current.position.distanceTo(e.camera.position);o/100<=W?eu(W):eu(o/100),ec(o<500);let u=100*W,i=10*W;ep(Math.max(0,Math.min(1,(o-i)/(u-i)))),ei.current&&(ei.current=.02*o)}}),(0,a.useEffect)(()=>{es.current&&(es.current.rotation.order="YXZ",es.current.rotation.y=0,es.current.rotation.x=h.MathUtils.degToRad(T))},[T,O]),(0,a.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),s=3600*E;es.current&&(es.current.rotation.order="YXZ",es.current.rotation.y=(3600*t+60*r+n)/s*2*Math.PI,es.current.rotation.x=h.MathUtils.degToRad(T))},[E,T]);let ed=e=>{e.stopPropagation(),!et&&(I(!0),$||(G(u),X(null)))},ex=e=>{e.stopPropagation(),er(!1),en.current={x:e.clientX,y:e.clientY}},eh=e=>{Math.sqrt(Math.pow(e.clientX-en.current.x,2)+Math.pow(e.clientY-en.current.y,2))>5&&er(!0)},eg=e=>{er(!1)},[ej,ef]=(0,a.useState)(!1),ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",ef(!0)},eM=e=>{e.stopPropagation(),document.body.style.cursor="auto",ef(!1)},ev=p._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[$&&H.current&&(0,n.jsx)(j.Z,{target:H.current,targetName:r,color:w,size:W,satelliteCamera:F,toggleSatelliteCamera:V}),(0,n.jsxs)("group",{ref:H,children:[(0,n.jsx)("mesh",{visible:!1,onClick:ed,onPointerDown:ex,onPointerMove:eh,onPointerUp:eg,onPointerOver:ey,onPointerOut:eM,children:$?(0,n.jsx)("sphereGeometry",{args:[W,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*eo,8,8]})}),(0,n.jsxs)("mesh",{ref:es,children:[(0,n.jsx)("sphereGeometry",{args:[$?W:eo,ee,ee]}),$||!K||el?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>L(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.05*W,ee,ee]}),(0,n.jsx)("shaderMaterial",{args:[M.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:J,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*W,ee,ee]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==s?void 0:s.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:w})]},$?r+"-textured":r+"-basic"),"Saturn"===r&&el&&(0,n.jsx)(v,{innerRadius:1.2*W,outerRadius:2*W,height:0,rotation:[h.MathUtils.degToRad(T),0,0],texture:null==s?void 0:s.ringTexture,detail:2*ee}),"Uranus"===r&&el&&(0,n.jsx)(v,{innerRadius:1.5*W,outerRadius:1.9*W,height:0,texture:null==s?void 0:s.ringTexture,detail:2*ee,rotation:[h.MathUtils.degToRad(T),0,0]}),(N&&!$||ej&&!$)&&(0,n.jsx)(y.Z,{text:r,size:null==ei?void 0:ei.current,position:[0,1.2*eo+(null==ei?void 0:ei.current),0],color:w,handleClick:ed,font:"../assets/fonts/Termina_Black.ttf"},r),N&&$&&(0,n.jsx)(x.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":$?eo+.25*eo:4*eo,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:w},onClick:ed,onPointerDown:ex,onPointerMove:eh,onPointerUp:eg,onPointerOver:ey,onPointerOut:eM,children:r})}),$&&ev.map((e,t)=>{var s;let a=["Saturn","Uranus"].includes(r);return(0,n.jsx)("group",{rotation:a?[h.MathUtils.degToRad(T),0,0]:[0,0,0],children:(0,n.jsx)(f.Z,{moonData:e,planetPosition:null===(s=H.current)||void 0===s?void 0:s.position},"".concat(r,"-moon-").concat(t))},"".concat(r,"-moon-group-").concat(t))})]}),U&&(0,n.jsx)(g.Z,{origin:P,radius:Q,orbitalInclination:k,color:w,name:r,opacity:$?em:.5,hiRes:$})]})});var R=r(3920),_=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,setPrevSpeed:s}=(0,c.ZP)(),{planetPositions:x,selectedPlanet:h,setSelectedPlanet:g,moonPositions:j,selectedMoon:f,setSelectedMoon:y,planetsData:M}=(0,c.d2)(),{satelliteCamera:v,triggerReset:_,setTriggerReset:S,isCameraTransitioning:k,toggleCameraTransitioning:T}=(0,c.g5)(),E=(0,a.useRef)(),[z,w]=(0,a.useState)(200),[b,D]=(0,a.useState)(null),Z=e=>4.2*e,C=()=>{if(!E.current)return;g(null),y(null),w(200),E.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};E.current.setPosition(t.x,t.y,t.z,!0)};(0,i.A)(()=>{if(h&&E.current){let e=x[h.name];if(e){let t=Z(M[h.name].radius*m.YB);w(t/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(t,!0)}"Sun"===h.name&&(w(200),E.current.setTarget(0,0,0,!0),E.current.dollyTo(200,!0))}});let U=(e,t)=>p._d[e].find(e=>e.name===t);(0,i.A)(()=>{if(f&&E.current){let e=j[f.name];if(e){let t=U(b,f.name),r=Z((null==t?void 0:t.radius)*p.sh);w(r/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(r,!0)}}}),(0,a.useEffect)(()=>{C&&(C(),S(!1))},[_]),(0,a.useEffect)(()=>{var e;h&&"Sun"!==h.name&&!k&&(s(t),r(0),T(!0),D(h.name)),f&&!k&&(s(t),r(0),T(!0)),null===(e=E.current)||void 0===e||e.camera.updateProjectionMatrix()},[h,f]);let I=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),Y=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),B=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),O=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),G=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),N=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),X=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),A=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),F=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!v&&(0,n.jsx)(u.B,{ref:E,makeDefault:!v,maxDistance:9e4,smoothTime:.6,polarRotateSpeed:.5,azimuthRotateSpeed:.5,enableDamping:!0,near:.001,far:1e6,minDistance:z}),(0,n.jsx)(R.Z,{}),(0,n.jsx)(l,{pixelated:!0}),(0,n.jsx)(P,{name:"Earth",textures:I}),(0,n.jsx)(P,{name:"Mars",textures:G}),(0,n.jsx)(P,{name:"Venus",textures:B}),(0,n.jsx)(P,{name:"Mercury",textures:O}),(0,n.jsx)(P,{name:"Jupiter",textures:N}),(0,n.jsx)(P,{name:"Saturn",textures:X}),(0,n.jsx)(P,{name:"Uranus",textures:A}),(0,n.jsx)(P,{name:"Neptune",textures:F}),(0,n.jsx)(d.Z,{textures:Y,position:e.position,resetCamera:C},"Sun-plain")]})},S=()=>(0,n.jsx)(s.Z,{children:(0,n.jsx)(_,{})})}},function(e){e.O(0,[393,689,284,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);