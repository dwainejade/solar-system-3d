(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,4009))},4009:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(7437),a=r(9362),s=r(2265),o=r(7871),u=r(3719),i=r(8384),c=r(2079),l=r(8942),p=r(5375),m=r(9373),h=r(4823),d=r(7776),x=r(878),g=r(1675),j=r(625),f=r(1577),y=r(1045);let M=(0,s.forwardRef)((e,t)=>{let{name:r="Earth",textures:a}=e,{planetsData:o}=(0,i.d2)(),u={...o[r]},{mass:p,radius:M,orbitalOrigin:_,orbitalRadius:P,orbitalSpeed:k,orbitalPeriod:S,orbitalInclination:v,axialTilt:R,rotationPeriod:T,surfaceTemp:E,color:Z,gravity:w,initialOrbitalAngle:b,interestPoints:z}=u,{simSpeed:C,updateRotationCount:I,incrementDate:D,orbitPaths:B,toggleDetailsMenu:Y}=(0,i.ZP)(),{planetAngles:G,updatePlanetPosition:N,selectedPlanet:O,setSelectedPlanet:U,displayLabels:A,setSelectedMoon:F}=(0,i.d2)(),{isSurfaceCameraActive:X,satelliteCamera:H,toggleSatelliteCamera:V}=(0,i.g5)(),W=t||(0,s.useRef)(),q=(0,s.useRef)(G[r]||0),J=(0,s.useRef)(),[K,L]=(0,s.useState)(!1),Q=P*(X?1e-4:c.Hm),$=M*c.YB;c.E_;let ee=O&&O.name===r,et=ee?64:32,[er,en]=(0,s.useState)(!1),ea=(0,s.useRef)({x:0,y:0}),es=(0,s.useRef)(),eo=(0,s.useRef)(),[eu,ei]=(0,s.useState)($),ec=(0,s.useRef)(1),[el,ep]=(0,s.useState)(!1);(0,m.A)((e,t)=>{let n=t*C;0===q.current?q.current=Math.PI/180*b:q.current-=2*Math.PI/(86400*S)*n;let a=Q*Math.cos(q.current),s=Q*Math.sin(q.current);if(W.current){let t=Math.sin(Math.PI/180*v)*Q*Math.sin(q.current);if(W.current.position.set(a,t,s),N(r,{x:a,y:t,z:s}),T){let e=2*Math.PI/(3600*T)*n,t=new d.Vector3(0,1,0);es.current.rotateOnAxis(t,e),W.current.rotation.y>=2*Math.PI&&ee&&(W.current.rotation.y%=2*Math.PI),eo.current&&(eo.current.rotation.y+=e),J.current&&(J.current.rotation.y+=1.2*e)}let o=W.current.position.distanceTo(e.camera.position);o/100<=$?ei($):ei(o/100),ep(o<500),ec.current&&(ec.current=.02*o)}}),(0,s.useEffect)(()=>{es.current&&(es.current.rotation.order="YXZ",es.current.rotation.y=0,es.current.rotation.x=d.MathUtils.degToRad(R))},[R,O]),(0,s.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds();es.current&&(es.current.rotation.order="YXZ",es.current.rotation.y=(3600*t+60*r+n)/(3600*T)*2*Math.PI,es.current.rotation.x=d.MathUtils.degToRad(R))},[O]);let em=e=>{e.stopPropagation(),!er&&(Y(!0),ee||(U(u),F(null)))},[eh,ed]=(0,s.useState)(!1),ex=(0,m.D)(d.TextureLoader,"../assets/saturn/saturn-rings.png");ex.wrapS=d.RepeatWrapping,ex.wrapT=d.ClampToEdgeWrapping;let eg=l._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[ee&&W.current&&(0,n.jsx)(g.Z,{target:W.current,targetName:r,color:Z,size:$,satelliteCamera:H,toggleSatelliteCamera:V}),(0,n.jsxs)("group",{ref:W,children:[(0,n.jsx)("mesh",{visible:!1,onClick:em,onPointerDown:e=>{e.stopPropagation(),en(!1),ea.current={x:e.clientX,y:e.clientY}},onPointerMove:e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&en(!0)},onPointerUp:e=>{en(!1)},onPointerOver:e=>{e.stopPropagation(),document.body.style.cursor="pointer",ed(!0)},onPointerOut:e=>{e.stopPropagation(),document.body.style.cursor="auto",ed(!1)},children:ee?(0,n.jsx)("sphereGeometry",{args:[$,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*eu,8,8]})}),(0,n.jsxs)("mesh",{ref:es,children:[(0,n.jsx)("sphereGeometry",{args:[ee?$:eu,et,et]}),ee||!K||el?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==a?void 0:a.map,onBuild:()=>L(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.05*$,et,et]}),(0,n.jsx)("shaderMaterial",{args:[y.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:J,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*$,et,et]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==a?void 0:a.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:Z})]},ee?r+"-textured":r+"-basic"),"Saturn"===r&&(0,n.jsx)("group",{ref:eo,rotation:[d.MathUtils.degToRad(R),0,0],children:(0,n.jsx)(h.KC,{args:[1.7*$,.5*$,2,100],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{map:ex})})}),(A||eh&&!ee)&&(0,n.jsx)(f.Z,{text:r,size:null==ec?void 0:ec.current,position:[0,1.2*eu+(null==ec?void 0:ec.current),0],color:Z,handleClick:em,font:"../assets/fonts/Termina_Black.ttf"},r),ee&&eg.map((e,t)=>{var a;return(0,n.jsx)(j.Z,{moonData:e,planetPosition:null===(a=W.current)||void 0===a?void 0:a.position,planetScale:eu},"".concat(r,"-moon-").concat(t))})]}),B&&(0,n.jsx)(x.Z,{origin:_,radius:Q,orbitalInclination:v,color:Z,name:r,opacity:ee||eh?.8:.3,hiRes:ee})]})});var _=r(3920),P=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:a,setPrevSpeed:h}=(0,i.ZP)(),{planetPositions:d,selectedPlanet:x,setSelectedPlanet:g,moonPositions:j,selectedMoon:f,setSelectedMoon:y,planetsData:P}=(0,i.d2)(),{satelliteCamera:k,triggerReset:S,setTriggerReset:v,isCameraTransitioning:R,toggleCameraTransitioning:T,satelliteCameraState:E}=(0,i.g5)(),Z=(0,s.useRef)(),[w,b]=(0,s.useState)(200),[z,C]=(0,s.useState)(null),I=e=>4.2*e,D=()=>{if(!Z.current)return;g(null),y(null),b(200),Z.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};Z.current.setPosition(t.x,t.y,t.z,!0)};(0,m.A)(()=>{if(x&&Z.current){let e=d[x.name];if(e){let t=I(P[x.name].radius*c.YB);b(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}"Sun"===x.name&&(b(200),Z.current.setTarget(0,0,0,!0),Z.current.dollyTo(200,!0))}});let B=(e,t)=>l._d[e].find(e=>e.name===t);(0,m.A)(()=>{if(f&&Z.current){let e=j[f.name];if(e){let t=I(B(z,f.name).radius*l.sh);b(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}}}),(0,s.useEffect)(()=>{D&&(D(),v(!1))},[S]),(0,s.useEffect)(()=>{var e;x&&"Sun"!==x.name&&!R&&(h(t),r(0),T(!0),C(x.name)),f&&!R&&(h(t),r(0),T(!0)),null===(e=Z.current)||void 0===e||e.camera.updateProjectionMatrix()},[x,f]);let Y=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",night:"../assets/earth/2k_earth_nightmap.jpg",normal:"../assets/earth/8k_earth_normal_map.png",clouds:"../assets/earth/8k_earth_clouds.jpg"}),G=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),N=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),O=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),U=(0,o.m)({map:"../assets/mars/2k_mars.jpg"}),A=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),F=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg"}),X=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg"}),H=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!k&&(0,n.jsx)(u.B,{ref:Z,makeDefault:!k,maxDistance:9e4,smoothTime:.7,polarRotateSpeed:.5,azimuthRotateSpeed:.5,enableDamping:!0,near:.001,far:1e6,minDistance:w}),(0,n.jsx)(_.Z,{}),(0,n.jsx)(M,{name:"Earth",textures:Y}),(0,n.jsx)(M,{name:"Mars",textures:U}),(0,n.jsx)(M,{name:"Venus",textures:N}),(0,n.jsx)(M,{name:"Mercury",textures:O}),(0,n.jsx)(M,{name:"Jupiter",textures:A}),(0,n.jsx)(M,{name:"Saturn",textures:F}),(0,n.jsx)(M,{name:"Uranus",textures:X}),(0,n.jsx)(M,{name:"Neptune",textures:H}),(0,n.jsx)(p.Z,{textures:G,position:e.position,resetCamera:D},"Sun-plain")]})},k=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(P,{})})}},function(e){e.O(0,[393,689,851,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);