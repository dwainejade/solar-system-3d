(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,4940))},4940:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(7437),a=r(2226),s=r(2265),o=r(7871),u=r(3719),i=r(8384),c=r(2079),l=r(5375),m=r(5264),d=r(3920),p=r(9373),h=r(7776),g=r(1577),x=e=>{let{meshCount:t=500}=e,{simSpeed:r}=(0,i.ZP)(),{switchToCustomCamera:a,setAutoRotate:o,activeCamera:u}=(0,i.g5)(),{displayLabels:l}=(0,i.d2)();(0,s.useRef)();let m=(0,s.useRef)(!1),d=(0,s.useRef)(1),x=(0,s.useRef)(),M=(0,s.useRef)(),f=c.B9.innerRadius,y=c.B9.outerRadius,j=y-f,b=(f+y)/2*c.Hm,w={C:{baseHue:.083,hueVariation:.02,saturation:[.05,.15],lightness:[.15,.25]},S:{baseHue:.055,hueVariation:.015,saturation:[.15,.35],lightness:[.25,.35]},M:{baseHue:.1,hueVariation:.01,saturation:[.05,.2],lightness:[.3,.4]},D:{baseHue:.065,hueVariation:.01,saturation:[.05,.1],lightness:[.1,.15]},V:{baseHue:.03,hueVariation:.01,saturation:[.2,.4],lightness:[.2,.3]}},k=(e,t)=>e+Math.random()*(t-e),A=(0,s.useCallback)(()=>{let e=Math.random(),t=w[e<.75?"C":e<.92?"S":e<.97?"M":e<.99?"D":"V"],r=t.baseHue+(Math.random()-.5)*t.hueVariation,n=k(...t.saturation),a=k(...t.lightness);return new h.Color().setHSL(h.MathUtils.clamp(r,0,1),h.MathUtils.clamp(n,0,1),h.MathUtils.clamp(a+(Math.random()-.5)*.05,0,1))},[]),T=(0,s.useCallback)(()=>4+8*Math.pow(Math.random(),4),[]),_=(0,s.useCallback)(e=>{let t=f+Math.pow(Math.random(),.7)*j,r=Math.sqrt(c.G*c.Gw/(1e3*t));return{semiMajorAxis:t*c.Hm,eccentricity:Math.min(.3,Math.abs(.15+.07*(Math.random()+Math.random()+Math.random()-1.5))),orbitalSpeed:-(1e-10*r),angle:Math.random()*Math.PI*2,inclination:Math.PI/180*Math.abs(8.5+6.2*(Math.random()+Math.random()+Math.random()-1.5)),scale:T(),rotationAxis:new h.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),rotationSpeed:(.1+.9*Math.random())*1e-5,color:A()}},[]),P=(0,s.useMemo)(()=>{let e=Array.from({length:t},(e,t)=>_(t)),r=new Float32Array(3*t);return e.forEach((e,t)=>{r[3*t]=e.color.r,r[3*t+1]=e.color.g,r[3*t+2]=e.color.b}),M.current=r,e},[t,_]),V=(0,s.useRef)(),S=new h.Matrix4,Z=new h.Vector3,v=new h.Quaternion,B=new h.Vector3;(0,p.A)((e,n)=>{let a=-n*r*.06;if(0!==a){for(let r=0;r<t;r++){let t=P[r];t.angle+=t.orbitalSpeed*a;let n=t.semiMajorAxis*(1-t.eccentricity*t.eccentricity)/(1+t.eccentricity*Math.cos(t.angle));Z.set(n*Math.cos(t.angle),n*Math.sin(t.inclination)*Math.sin(t.angle),n*Math.cos(t.inclination)*Math.sin(t.angle)),v.setFromAxisAngle(t.rotationAxis,e.clock.elapsedTime*t.rotationSpeed),B.setScalar(t.scale),S.compose(Z,v,B),V.current.setMatrixAt(r,S)}if(V.current.instanceMatrix.needsUpdate=!0,x.current){let t=new h.Vector3(.8*b,.01*b,0);d.current=.02*e.camera.position.distanceTo(t)}}});let C=(0,s.useMemo)(()=>{let e=new h.DodecahedronGeometry(1,1),t=new h.InstancedBufferGeometry().copy(e);return t.setAttribute("color",new h.InstancedBufferAttribute(M.current,3)),t},[]);return(0,n.jsxs)("group",{children:[(l||m.current)&&(0,n.jsx)("group",{ref:x,position:[.8*b,.01*b,0],children:(0,n.jsx)(g.Z,{text:"Asteroid Belt",size:d.current,color:"#FFA500",handleClick:()=>{"Asteroid Belt"!==u.name&&(a("Asteroid Belt"),o(!0))},handlePointerOver:()=>{m.current=!0,document.body.style.cursor="pointer"},handlePointerOut:()=>{m.current=!1,document.body.style.cursor="auto"}})}),(0,n.jsx)("instancedMesh",{ref:V,args:[C,null,t],onClick:e=>{e.stopPropagation(),"Asteroid Belt"!==u.name&&(a("Asteroid Belt"),o(!0))},onPointerOver:()=>{m.current=!0,document.body.style.cursor="pointer"},onPointerOut:()=>{m.current=!1,document.body.style.cursor="auto"},children:(0,n.jsx)("meshStandardMaterial",{vertexColors:!0,roughness:.7,metalness:.5,toneMapped:!1})})]})},M=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:a,setPrevSpeed:g,setViewOnlyMode:M}=(0,i.ZP)(),{planetPositions:f,selectedPlanet:y,selectedMoon:j,setSelectedMoon:b,planetsData:w,moonsData:k,moonPositions:A}=(0,i.d2)(),{satelliteCamera:T,isCameraTransitioning:_,toggleCameraTransitioning:P,isZoomingToSun:V,resetCamera:S,toggleZoomingToSun:Z,activeCamera:v}=(0,i.g5)(),B=(0,s.useRef)(),[C,E]=(0,s.useState)(200),[R,z]=(0,s.useState)(!1),H=[1e5,1e5,1e5],D=[2e4,2e4,2e4],O=[0,0,0];(0,s.useEffect)(()=>{B.current&&!R&&(B.current.setPosition(...H,!1),B.current.setTarget(...O,!1),setTimeout(()=>{B.current.setPosition(...D,!0),B.current.setTarget(...O,!0),z(!0)},100))},[B.current]);let F=e=>"moon"===v.type?Math.max(.5*e,.01):4.2*e,N=(e,t)=>{let r=k[t];return r?r.find(t=>t.name===e):null};(0,p.A)(()=>{if(B.current){if("planet"===v.type){let e=f[y.name];if(b(null),e){let t=F(w[y.name].radius*c.YB);E(t/2),B.current.setTarget(e.x,e.y,e.z,!0),B.current.dollyTo(t,!0),Z(!1)}}if("moon"===v.type){let e=A[v.name],t=N(v.name,v.parentName);if(e&&t){let r=t.radius*c.YB,n=F(r);E(2*r),B.current.setTarget(e.x,e.y,e.z,!0),B.current.dollyTo(4*n,!0);let a=new h.Vector3;B.current.getTarget(a),.1>a.distanceTo(new h.Vector3(e.x,e.y,e.z))&&(Z(!1),P(!1))}}if("Sun"===v.name&&(E(200),B.current.setTarget(0,0,0,!0),B.current.distance<800&&Z(!1),B.current.dollyTo(200,!0)),"custom"===v.type&&(B.current.setPosition(v.position.x,v.position.y,v.position.z,!0),B.current.setTarget(v.target.x,v.target.y,v.target.z,!0)),"orbit"===v.type&&"default"===v.name&&_){let e=v.position,t=v.lookAt,r=new h.Vector3,n=new h.Vector3;B.current.getPosition(r),B.current.getTarget(n),r.distanceTo(e)>100&&B.current.setLookAt(e.x,e.y,e.z,t.x,t.y,t.z,!0),P(!1),E(200)}"orbit"!==v.type||_||E(200)}}),(0,s.useEffect)(()=>{B.current&&!R&&(B.current.setPosition(...H,!1),B.current.setTarget(...O,!1),B.current.camera.updateProjectionMatrix(),setTimeout(()=>{S(),z(!0)},100))},[B.current]),(0,s.useEffect)(()=>{var e;("planet"===v.type||"moon"===v.type)&&(P(!0),g(t),r(0)),"orbit"===v.type&&"default"===v.name&&0===t&&r(a),y||j||(Z(!1),0===t&&r(a)),"Sun"===v.name&&(Z(!0),0===t&&(r(a),P(!1))),null===(e=B.current)||void 0===e||e.camera.updateProjectionMatrix()},[y,j,v]),(0,s.useEffect)(()=>{let e=e=>{1===e.button&&e.preventDefault(),B.current&&(B.current.mouseButtons.right=1)};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[]);let U=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),G=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),I=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),L=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),Y=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),q=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),J=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),Q=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),K=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!T&&(0,n.jsx)(u.B,{ref:B,makeDefault:!T,maxDistance:9e4,smoothTime:.6,enableDamping:!0,near:.01,far:1e6,minDistance:C,autoRotate:!0}),(0,n.jsx)(d.Z,{}),(0,n.jsx)(m.Z,{name:"Earth",textures:U}),(0,n.jsx)(m.Z,{name:"Mars",textures:Y}),(0,n.jsx)(m.Z,{name:"Venus",textures:I}),(0,n.jsx)(m.Z,{name:"Mercury",textures:L}),(0,n.jsx)(m.Z,{name:"Jupiter",textures:q}),(0,n.jsx)(m.Z,{name:"Saturn",textures:J}),(0,n.jsx)(m.Z,{name:"Uranus",textures:Q}),(0,n.jsx)(m.Z,{name:"Neptune",textures:K}),(0,n.jsx)(x,{meshCount:5e3}),(0,n.jsx)(l.Z,{textures:G,position:e.position,resetCamera:S},"Sun-plain")]})},f=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(M,{})})}},function(e){e.O(0,[433,689,623,533,264,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);