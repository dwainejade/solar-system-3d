(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,3130))},3130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),s=r(9362),a=r(2265),o=r(7871),u=r(3719),i=r(9373);function l({pixelated:e}){let t=(0,i.z)(e=>e.gl),r=(0,i.z)(e=>e.internal.active),n=(0,i.z)(e=>e.performance.current),s=(0,i.z)(e=>e.viewport.initialDpr),o=(0,i.z)(e=>e.setDpr);return a.useEffect(()=>{let n=t.domElement;return()=>{r&&o(s),e&&n&&(n.style.imageRendering="auto")}},[]),a.useEffect(()=>{o(n*s),e&&t.domElement&&(t.domElement.style.imageRendering=1===n?"auto":"pixelated")},[n]),null}var c=r(8384),m=r(2079),p=r(8942),d=r(5375),x=r(2325),h=r(7776),g=r(878),j=r(1675),f=r(625),y=r(1577),M=r(1045),P=e=>{let{innerRadius:t,outerRadius:r,height:s=0,rotation:o,texture:u,detail:i=16}=e,l=(0,a.useMemo)(()=>{let e=new h.CylinderGeometry(r,t,s,i,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,s]),c=(0,a.useMemo)(()=>new h.MeshBasicMaterial({map:u,side:h.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:c,rotation:o})};let v=(0,a.forwardRef)((e,t)=>{let{name:r="Earth",textures:s}=e,{planetsData:o}=(0,c.d2)(),u={...o[r]},{mass:l,radius:d,orbitalOrigin:v,orbitalRadius:R,orbitalSpeed:_,orbitalPeriod:S,orbitalInclination:k,axialTilt:T,rotationPeriod:E,surfaceTemp:z,color:b,gravity:w,initialOrbitalAngle:D,interestPoints:C}=u,{simSpeed:Z,orbitPaths:U,toggleDetailsMenu:I}=(0,c.ZP)(),{planetAngles:Y,updatePlanetPosition:B,selectedPlanet:O,setSelectedPlanet:G,displayLabels:N,setSelectedMoon:X}=(0,c.d2)(),{isSurfaceCameraActive:A,satelliteCamera:F,toggleSatelliteCamera:V,setAutoRotate:H,autoRotate:q}=(0,c.g5)(),J=t||(0,a.useRef)(),K=(0,a.useRef)(Y[r]||0),L=(0,a.useRef)(),[Q,W]=(0,a.useState)(!1),$=R*(A?1e-4:m.Hm),ee=d*m.YB;m.E_;let et=O&&O.name===r,er=et?64:32,[en,es]=(0,a.useState)(!1),ea=(0,a.useRef)({x:0,y:0}),eo=(0,a.useRef)(),eu=(0,a.useRef)(),[ei,el]=(0,a.useState)(ee),ec=(0,a.useRef)(1),[em,ep]=(0,a.useState)(!1),[ed,ex]=(0,a.useState)(1);(0,i.A)((e,t)=>{let n=t*Z;0===K.current?K.current=Math.PI/180*D:K.current-=2*Math.PI/(86400*S)*n;let s=$*Math.cos(K.current),a=$*Math.sin(K.current);if(J.current){let t=Math.sin(Math.PI/180*k)*$*Math.sin(K.current);if(J.current.position.set(s,t,a),B(r,{x:s,y:t,z:a}),E){let e=2*Math.PI/(3600*E)*n,t=new h.Vector3(0,1,0);eo.current.rotateOnAxis(t,e),J.current.rotation.y>=2*Math.PI&&et&&(J.current.rotation.y%=2*Math.PI),eu.current&&(eu.current.rotation.y+=e),L.current&&(L.current.rotation.y+=1.2*e)}let o=J.current.position.distanceTo(e.camera.position);o/100<=ee?el(ee):el(o/100),ep(o<500);let u=100*ee,i=10*ee;ex(Math.max(0,Math.min(1,(o-i)/(u-i)))),ec.current&&(ec.current=.02*o)}}),(0,a.useEffect)(()=>{eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=0,eo.current.rotation.x=h.MathUtils.degToRad(T))},[T,O]),(0,a.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),s=3600*E;eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=(3600*t+60*r+n)/s*2*Math.PI,eo.current.rotation.x=h.MathUtils.degToRad(T))},[E,T]);let eh=e=>{e.stopPropagation(),!en&&(I(!0),et||(G(u),X(null)))},eg=e=>{e.stopPropagation(),es(!1),ea.current={x:e.clientX,y:e.clientY}},ej=e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&es(!0)},ef=e=>{es(!1)},[ey,eM]=(0,a.useState)(!1),eP=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eM(!0)},ev=e=>{e.stopPropagation(),document.body.style.cursor="auto",eM(!1)},eR=p._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[et&&J.current&&(0,n.jsx)(j.Z,{target:J.current,targetName:r,color:b,size:ee,satelliteCamera:F,toggleSatelliteCamera:V}),(0,n.jsxs)("group",{ref:J,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:ev,onDoubleClick:e=>{e.stopPropagation(),H(!q)},children:et?(0,n.jsx)("sphereGeometry",{args:[ee,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*ei,8,8]})}),(0,n.jsxs)("mesh",{ref:eo,children:[(0,n.jsx)("sphereGeometry",{args:[et?ee:ei,er,er]}),et||!Q||em?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>W(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.05*ee,er,er]}),(0,n.jsx)("shaderMaterial",{args:[M.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:L,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*ee,er,er]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==s?void 0:s.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:b})]},et?r+"-textured":r+"-basic"),"Saturn"===r&&em&&(0,n.jsx)(P,{innerRadius:1.2*ee,outerRadius:2*ee,height:0,rotation:[h.MathUtils.degToRad(T),0,0],texture:null==s?void 0:s.ringTexture,detail:2*er}),"Uranus"===r&&em&&(0,n.jsx)(P,{innerRadius:1.5*ee,outerRadius:1.9*ee,height:0,texture:null==s?void 0:s.ringTexture,detail:2*er,rotation:[h.MathUtils.degToRad(T),0,0]}),(N&&!et||ey&&!et)&&(0,n.jsx)(y.Z,{text:r,size:null==ec?void 0:ec.current,position:[0,1.2*ei+(null==ec?void 0:ec.current),0],color:b,handleClick:eh,font:"../assets/fonts/Termina_Black.ttf"},r),N&&et&&(0,n.jsx)(x.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":et?ei+.25*ei:4*ei,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:b},onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:ev,children:r})}),et&&eR.map((e,t)=>{var s;let a=["Saturn","Uranus"].includes(r);return(0,n.jsx)("group",{rotation:a?[h.MathUtils.degToRad(T),0,0]:[0,0,0],children:(0,n.jsx)(f.Z,{moonData:e,planetPosition:null===(s=J.current)||void 0===s?void 0:s.position},"".concat(r,"-moon-").concat(t))},"".concat(r,"-moon-group-").concat(t))})]}),U&&(0,n.jsx)(g.Z,{origin:v,radius:$,orbitalInclination:k,color:b,name:r,opacity:et?ed:.5,hiRes:et})]})});var R=r(3920),_=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,setPrevSpeed:s}=(0,c.ZP)(),{planetPositions:x,selectedPlanet:h,setSelectedPlanet:g,moonPositions:j,selectedMoon:f,setSelectedMoon:y,planetsData:M}=(0,c.d2)(),{satelliteCamera:P,triggerReset:_,setTriggerReset:S,isCameraTransitioning:k,toggleCameraTransitioning:T}=(0,c.g5)(),E=(0,a.useRef)(),[z,b]=(0,a.useState)(200),[w,D]=(0,a.useState)(null),C=e=>4.2*e,Z=()=>{if(!E.current)return;g(null),y(null),b(200),E.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};E.current.setPosition(t.x,t.y,t.z,!0)};(0,i.A)(()=>{if(h&&E.current){let e=x[h.name];if(e){let t=C(M[h.name].radius*m.YB);b(t/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(t,!0)}"Sun"===h.name&&(b(200),E.current.setTarget(0,0,0,!0),E.current.dollyTo(200,!0))}});let U=(e,t)=>p._d[e].find(e=>e.name===t);(0,i.A)(()=>{if(f&&E.current){let e=j[f.name];if(e){let t=U(w,f.name),r=C((null==t?void 0:t.radius)*p.sh);b(r/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(r,!0)}}}),(0,a.useEffect)(()=>{Z&&(Z(),S(!1))},[_]),(0,a.useEffect)(()=>{var e;h&&"Sun"!==h.name&&!k&&(s(t),r(0),T(!0),D(h.name)),f&&!k&&(s(t),r(0),T(!0)),null===(e=E.current)||void 0===e||e.camera.updateProjectionMatrix()},[h,f]);let I=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),Y=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),B=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),O=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),G=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),N=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),X=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),A=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),F=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!P&&(0,n.jsx)(u.B,{ref:E,makeDefault:!P,maxDistance:9e4,smoothTime:.6,polarRotateSpeed:.5,azimuthRotateSpeed:.5,enableDamping:!0,near:.001,far:1e6,minDistance:z}),(0,n.jsx)(R.Z,{}),(0,n.jsx)(l,{pixelated:!0}),(0,n.jsx)(v,{name:"Earth",textures:I}),(0,n.jsx)(v,{name:"Mars",textures:G}),(0,n.jsx)(v,{name:"Venus",textures:B}),(0,n.jsx)(v,{name:"Mercury",textures:O}),(0,n.jsx)(v,{name:"Jupiter",textures:N}),(0,n.jsx)(v,{name:"Saturn",textures:X}),(0,n.jsx)(v,{name:"Uranus",textures:A}),(0,n.jsx)(v,{name:"Neptune",textures:F}),(0,n.jsx)(d.Z,{textures:Y,position:e.position,resetCamera:Z},"Sun-plain")]})},S=()=>(0,n.jsx)(s.Z,{children:(0,n.jsx)(_,{})})}},function(e){e.O(0,[393,689,284,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);