(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,4009))},4009:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),a=r(9362),s=r(2265),o=r(7871),i=r(3719),u=r(8384),c=r(2079),l=r(8942),p=r(5375),m=r(9373),d=r(4823),x=r(2325),h=r(7776),g=r(878),j=r(1675),f=r(625),y=r(1577),M=r(1045);let P=(0,s.forwardRef)((e,t)=>{let{name:r="Earth",textures:a}=e,{planetsData:o}=(0,u.d2)(),i={...o[r]},{mass:p,radius:P,orbitalOrigin:_,orbitalRadius:S,orbitalSpeed:v,orbitalPeriod:T,orbitalInclination:k,axialTilt:R,rotationPeriod:w,surfaceTemp:E,color:b,gravity:C,initialOrbitalAngle:Z,interestPoints:z}=i,{simSpeed:I,updateRotationCount:D,incrementDate:U,orbitPaths:B,toggleDetailsMenu:O}=(0,u.ZP)(),{planetAngles:N,updatePlanetPosition:Y,selectedPlanet:A,setSelectedPlanet:G,displayLabels:F,setSelectedMoon:X}=(0,u.d2)(),{isSurfaceCameraActive:V,satelliteCamera:H,toggleSatelliteCamera:W}=(0,u.g5)(),q=t||(0,s.useRef)(),J=(0,s.useRef)(N[r]||0),K=(0,s.useRef)(),[L,Q]=(0,s.useState)(!1),$=S*(V?1e-4:c.Hm),ee=P*c.YB;c.E_;let et=A&&A.name===r,er=et?64:32,[en,ea]=(0,s.useState)(!1),es=(0,s.useRef)({x:0,y:0}),eo=(0,s.useRef)(),ei=(0,s.useRef)(),[eu,ec]=(0,s.useState)(ee),el=(0,s.useRef)(1),[ep,em]=(0,s.useState)(!1),[ed,ex]=(0,s.useState)(1);(0,m.A)((e,t)=>{let n=t*I;0===J.current?J.current=Math.PI/180*Z:J.current-=2*Math.PI/(86400*T)*n;let a=$*Math.cos(J.current),s=$*Math.sin(J.current);if(q.current){let t=Math.sin(Math.PI/180*k)*$*Math.sin(J.current);if(q.current.position.set(a,t,s),Y(r,{x:a,y:t,z:s}),w){let e=2*Math.PI/(3600*w)*n,t=new h.Vector3(0,1,0);eo.current.rotateOnAxis(t,e),q.current.rotation.y>=2*Math.PI&&et&&(q.current.rotation.y%=2*Math.PI),ei.current&&(ei.current.rotation.y+=e),K.current&&(K.current.rotation.y+=1.2*e)}let o=q.current.position.distanceTo(e.camera.position);o/100<=ee?ec(ee):ec(o/100),em(o<500);let i=100*ee,u=10*ee;ex(Math.max(0,Math.min(1,(o-u)/(i-u)))),el.current&&(el.current=.02*o)}}),(0,s.useEffect)(()=>{eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=0,eo.current.rotation.x=h.MathUtils.degToRad(R))},[R,A]),(0,s.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),a=3600*w;eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=(3600*t+60*r+n)/a*2*Math.PI,eo.current.rotation.x=h.MathUtils.degToRad(R))},[w,R]);let eh=e=>{e.stopPropagation(),!en&&(O(!0),et||(G(i),X(null)))},eg=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ej=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ef=e=>{ea(!1)},[ey,eM]=(0,s.useState)(!1),eP=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eM(!0)},e_=e=>{e.stopPropagation(),document.body.style.cursor="auto",eM(!1)},eS=l._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[et&&q.current&&(0,n.jsx)(j.Z,{target:q.current,targetName:r,color:b,size:ee,satelliteCamera:H,toggleSatelliteCamera:W}),(0,n.jsxs)("group",{ref:q,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:e_,children:et?(0,n.jsx)("sphereGeometry",{args:[ee,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*eu,8,8]})}),(0,n.jsxs)("mesh",{ref:eo,children:[(0,n.jsx)("sphereGeometry",{args:[et?ee:eu,er,er]}),et||!L||ep?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==a?void 0:a.map,onBuild:()=>Q(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.05*ee,er,er]}),(0,n.jsx)("shaderMaterial",{args:[M.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:K,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*ee,er,er]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==a?void 0:a.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:b})]},et?r+"-textured":r+"-basic"),"Saturn"===r&&(0,n.jsx)("group",{rotation:[h.MathUtils.degToRad(R),0,0],children:(0,n.jsx)(d.KC,{args:[1.9*ee,.6*ee,2,90],position:[0,0,0],rotation:[Math.PI/2,0,0],receiveShadow:!0,children:(0,n.jsx)("meshBasicMaterial",{map:null==a?void 0:a.ringTexture,transparent:!0})})}),(F&&!et||ey&&!et)&&(0,n.jsx)(y.Z,{text:r,size:null==el?void 0:el.current,position:[0,1.2*eu+(null==el?void 0:el.current),0],color:b,handleClick:eh,font:"../assets/fonts/Termina_Black.ttf"},r),F&&et&&(0,n.jsx)(x.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":et?eu+.25*eu:4*eu,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:b},onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:e_,children:r})}),et&&eS.map((e,t)=>{var a;let s=["Saturn","Uranus"].includes(r);return(0,n.jsx)("group",{rotation:s?[h.MathUtils.degToRad(R),0,0]:[0,0,0],children:(0,n.jsx)(f.Z,{moonData:e,planetPosition:null===(a=q.current)||void 0===a?void 0:a.position,planetScale:eu,planetAxialTilt:R},"".concat(r,"-moon-").concat(t))},"".concat(r,"-moon-group-").concat(t))})]}),B&&(0,n.jsx)(g.Z,{origin:_,radius:$,orbitalInclination:k,color:b,name:r,opacity:et?ed:.5,hiRes:et})]})});var _=r(3920),S=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:a,setPrevSpeed:d}=(0,u.ZP)(),{planetPositions:x,selectedPlanet:g,setSelectedPlanet:j,moonPositions:f,selectedMoon:y,setSelectedMoon:M,planetsData:S}=(0,u.d2)(),{satelliteCamera:v,triggerReset:T,setTriggerReset:k,isCameraTransitioning:R,toggleCameraTransitioning:w,satelliteCameraState:E}=(0,u.g5)(),b=(0,s.useRef)(),[C,Z]=(0,s.useState)(200),[z,I]=(0,s.useState)(null),D=e=>4.2*e,U=()=>{if(!b.current)return;j(null),M(null),Z(200),b.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};b.current.setPosition(t.x,t.y,t.z,!0)};(0,m.A)(()=>{if(g&&b.current){let e=x[g.name];if(e){let t=D(S[g.name].radius*c.YB);Z(t/2),b.current.setTarget(e.x,e.y,e.z,!0),b.current.dollyTo(t,!0)}"Sun"===g.name&&(Z(200),b.current.setTarget(0,0,0,!0),b.current.dollyTo(200,!0))}});let B=(e,t)=>l._d[e].find(e=>e.name===t);(0,m.A)(()=>{if(y&&b.current){let e=f[y.name];if(e){let t=D(B(z,y.name).radius*l.sh);Z(t/2),b.current.setTarget(e.x,e.y,e.z,!0),b.current.dollyTo(t,!0)}}}),(0,s.useEffect)(()=>{U&&(U(),k(!1))},[T]),(0,s.useEffect)(()=>{var e;g&&"Sun"!==g.name&&!R&&(d(t),r(0),w(!0),I(g.name)),y&&!R&&(d(t),r(0),w(!0)),null===(e=b.current)||void 0===e||e.camera.updateProjectionMatrix()},[g,y]);let O=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),N=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),Y=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),A=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),G=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),F=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),X=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),V=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg"}),H=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return X.ringTexture.wrapS=h.RepeatWrapping,X.ringTexture.wrapT=h.ClampToEdgeWrapping,X.ringTexture.repeat.set(1,1),(0,n.jsxs)(n.Fragment,{children:[!v&&(0,n.jsx)(i.B,{ref:b,makeDefault:!v,maxDistance:9e4,smoothTime:.7,polarRotateSpeed:.5,azimuthRotateSpeed:.5,enableDamping:!0,near:.001,far:1e6,minDistance:C}),(0,n.jsx)(_.Z,{}),(0,n.jsx)(P,{name:"Earth",textures:O}),(0,n.jsx)(P,{name:"Mars",textures:G}),(0,n.jsx)(P,{name:"Venus",textures:Y}),(0,n.jsx)(P,{name:"Mercury",textures:A}),(0,n.jsx)(P,{name:"Jupiter",textures:F}),(0,n.jsx)(P,{name:"Saturn",textures:X}),(0,n.jsx)(P,{name:"Uranus",textures:V}),(0,n.jsx)(P,{name:"Neptune",textures:H}),(0,n.jsx)(p.Z,{textures:N,position:e.position,resetCamera:U},"Sun-plain")]})},v=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(S,{})})}},function(e){e.O(0,[393,689,103,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);