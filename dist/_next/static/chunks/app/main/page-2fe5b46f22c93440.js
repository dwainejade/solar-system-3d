(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,1780))},1780:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(7437),a=r(2344),s=r(2265),o=r(7871),i=r(3719),u=r(8384),c=r(2803),l=r(2079),m=r(5375),p=r(5264),d=r(3920),h=r(9373),g=r(9818),x=r(7776),M=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:a,setPrevSpeed:M,setViewOnlyMode:f}=(0,u.ZP)(),{planetPositions:y,selectedPlanet:j,selectedMoon:b,setSelectedMoon:w,planetsData:k,moonsData:A,moonPositions:T,resetAllData:P}=(0,u.d2)(),{satelliteCamera:V,isCameraTransitioning:_,toggleCameraTransitioning:S,isZoomingToSun:Z,resetCamera:v,toggleZoomingToSun:B,activeCamera:C}=(0,u.g5)(),{experimentMode:E,toggleExperimentMode:z}=(0,c.Z)(),H=(0,s.useRef)(),[R,D]=(0,s.useState)(200),[I,O]=(0,s.useState)(!1),F=[1e5,1e5,1e5],N=[2e4,2e4,2e4],U=[0,0,0];(0,s.useEffect)(()=>{H.current&&!I&&(H.current.setPosition(...F,!1),H.current.setTarget(...U,!1),setTimeout(()=>{H.current.setPosition(...N,!0),H.current.setTarget(...U,!0),O(!0)},100))},[H.current]);let G=e=>"moon"===C.type?Math.max(.5*e,.01):4.2*e,L=(e,t)=>{let r=A[t];return r?r.find(t=>t.name===e):null};(0,h.A)(()=>{if(H.current){if("planet"===C.type){let e=y[j.name];if(w(null),e){let t=G(k[j.name].radius*l.YB);D(t/2),H.current.setTarget(e.x,e.y,e.z,!0),H.current.dollyTo(t,!0),B(!1)}}if("moon"===C.type){let e=T[C.name],t=L(C.name,C.parentName);if(e&&t){let r=t.radius*l.YB,n=G(r);D(2*r),H.current.setTarget(e.x,e.y,e.z,!0),H.current.dollyTo(4*n,!0);let a=new x.Vector3;H.current.getTarget(a),.1>a.distanceTo(new x.Vector3(e.x,e.y,e.z))&&(B(!1),S(!1))}}if("Sun"===C.name&&(D(200),H.current.setTarget(0,0,0,!0),H.current.distance<800&&B(!1),H.current.dollyTo(200,!0)),"Asteroid Belt"===C.name&&_){H.current.setPosition(C.position.x,C.position.y,C.position.z,!0),H.current.setTarget(0,0,0,!0),D(4250),H.current.maxDistance=7500;let e=new x.Vector3;H.current.getPosition(e);let t=new x.Vector3(C.position.x,C.position.y,C.position.z);100>e.distanceTo(t)&&S(!1)}if("orbit"===C.type&&"default"===C.name&&_){let e=C.position,t=C.lookAt,r=new x.Vector3,n=new x.Vector3;H.current.getPosition(r),H.current.getTarget(n),r.distanceTo(e)>100&&H.current.setLookAt(e.x,e.y,e.z,t.x,t.y,t.z,!0),S(!1),D(200)}"orbit"!==C.type||_||D(200)}}),(0,s.useEffect)(()=>{H.current&&!I&&(H.current.setPosition(...F,!1),H.current.setTarget(...U,!1),H.current.camera.updateProjectionMatrix(),setTimeout(()=>{v(),O(!0)},100))},[H.current]),(0,s.useEffect)(()=>{("planet"===C.type||"moon"===C.type)&&(S(!0),M(t),r(0)),"orbit"===C.type&&"default"===C.name&&0===t&&r(a),j||b||(B(!1),0===t&&r(a)),"Sun"===C.name&&(B(!0),0===t&&(r(a),S(!1))),H.current?.camera.updateProjectionMatrix()},[j,b,C]),(0,s.useEffect)(()=>{f(!1),z(!1);let e=e=>{1===e.button&&e.preventDefault(),H.current&&(H.current.mouseButtons.right=1)};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[]);let Y=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),q=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),J=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),Q=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),W=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),K=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),X=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),$=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),ee=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!V&&(0,n.jsx)(i.B,{ref:H,makeDefault:!V,maxDistance:9e4,smoothTime:.6,enableDamping:!0,near:.01,far:1e6,minDistance:R,autoRotate:!0}),(0,n.jsx)(d.Z,{}),(0,n.jsx)(p.Z,{name:"Earth",textures:Y}),(0,n.jsx)(p.Z,{name:"Mars",textures:W}),(0,n.jsx)(p.Z,{name:"Venus",textures:J}),(0,n.jsx)(p.Z,{name:"Mercury",textures:Q}),(0,n.jsx)(p.Z,{name:"Jupiter",textures:K}),(0,n.jsx)(p.Z,{name:"Saturn",textures:X}),(0,n.jsx)(p.Z,{name:"Uranus",textures:$}),(0,n.jsx)(p.Z,{name:"Neptune",textures:ee}),(0,n.jsx)(g.Z,{meshCount:2500}),(0,n.jsx)(m.Z,{textures:q,position:e.position,resetCamera:v},"Sun-plain")]})},f=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(M,{})})},9818:function(e,t,r){"use strict";var n=r(7437),a=r(2265),s=r(9373),o=r(7776),i=r(8384),u=r(2079),c=r(1577);t.Z=e=>{let{meshCount:t=500}=e,{simSpeed:r}=(0,i.ZP)(),{switchToCustomCamera:l,setAutoRotate:m,activeCamera:p}=(0,i.g5)(),{displayLabels:d}=(0,i.d2)(),h=(0,a.useRef)(!1),g=(0,a.useRef)(1),x=(0,a.useRef)(),M=(0,a.useRef)(),f=("planet"===p.type||"moon"===p.type)&&"Sun"!==p.name?.3:1,y=u.B9.innerRadius,j=u.B9.outerRadius-y;u.Hm;let b={C:{baseHue:.083,hueVariation:.02,saturation:[.15,.25],lightness:[.25,.35]},S:{baseHue:.055,hueVariation:.015,saturation:[.25,.45],lightness:[.35,.45]},M:{baseHue:.1,hueVariation:.01,saturation:[.15,.3],lightness:[.4,.5]},D:{baseHue:.065,hueVariation:.01,saturation:[.15,.2],lightness:[.2,.25]},V:{baseHue:.03,hueVariation:.01,saturation:[.3,.5],lightness:[.3,.4]}},w=(e,t)=>e+Math.random()*(t-e),k=(0,a.useCallback)(()=>{let e=Math.random(),t=b[e<.75?"C":e<.92?"S":e<.97?"M":e<.99?"D":"V"],r=t.baseHue+(Math.random()-.5)*t.hueVariation,n=w(...t.saturation),a=w(...t.lightness),s=new o.Color().setHSL(o.MathUtils.clamp(r,0,1),o.MathUtils.clamp(n,0,1),o.MathUtils.clamp(a+(Math.random()-.5)*.05,0,1));return s.multiplyScalar(1.2),s},[]),A=(0,a.useCallback)(()=>4+11*Math.pow(Math.random(),4),[]),T=(0,a.useCallback)(e=>{let t=y+Math.pow(Math.random(),.7)*j,r=Math.sqrt(u.G*u.Gw/(1e3*t));return{semiMajorAxis:t*u.Hm,eccentricity:Math.min(.3,Math.abs(.15+.07*(Math.random()+Math.random()+Math.random()-1.5))),orbitalSpeed:-(1e-10*r),angle:Math.random()*Math.PI*2,inclination:Math.PI/180*Math.abs(8.5+6.2*(Math.random()+Math.random()+Math.random()-1.5)),scale:A(),rotationAxis:new o.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),rotationSpeed:(.1+.9*Math.random())*1e-5,color:k()}},[]),P=(0,a.useMemo)(()=>{let e=Array.from({length:t},(e,t)=>T(t)),r=new Float32Array(3*t);return e.forEach((e,t)=>{r[3*t]=e.color.r,r[3*t+1]=e.color.g,r[3*t+2]=e.color.b}),M.current=r,e},[t,T]),V=(0,a.useRef)(),_=new o.Matrix4,S=new o.Vector3,Z=new o.Quaternion,v=new o.Vector3;(0,s.A)((e,n)=>{let a=-n*r*.06;if(0!==a){for(let r=0;r<t;r++){let t=P[r];t.angle+=t.orbitalSpeed*a;let n=t.semiMajorAxis*(1-t.eccentricity*t.eccentricity)/(1+t.eccentricity*Math.cos(t.angle));S.set(n*Math.cos(t.angle),n*Math.sin(t.inclination)*Math.sin(t.angle),n*Math.cos(t.inclination)*Math.sin(t.angle)),Z.setFromAxisAngle(t.rotationAxis,e.clock.elapsedTime*t.rotationSpeed),v.setScalar(t.scale),_.compose(S,Z,v),V.current.setMatrixAt(r,_)}if(V.current.instanceMatrix.needsUpdate=!0,x.current){let t=x.current.getWorldPosition(new o.Vector3);g.current=.02*e.camera.position.distanceTo(t)}}});let B=(0,a.useMemo)(()=>{let e=new o.IcosahedronGeometry(1,1),t=new o.InstancedBufferGeometry().copy(e);return t.setAttribute("color",new o.InstancedBufferAttribute(M.current,3)),t},[]);return(0,n.jsxs)("group",{children:[(d||h.current)&&(0,n.jsx)("group",{ref:x,position:[-100,400,3600],children:(0,n.jsx)(c.Z,{text:"Asteroid Belt",size:g.current,color:"#FFA500",handleClick:()=>{"Asteroid Belt"!==p.name&&l("Asteroid Belt")},handlePointerOver:()=>{h.current=!0,document.body.style.cursor="pointer"},handlePointerOut:()=>{h.current=!1,document.body.style.cursor="auto"}})}),(0,n.jsx)("instancedMesh",{ref:V,args:[B,null,t],onClick:e=>{e.stopPropagation(),"Asteroid Belt"!==p.name&&(l("Asteroid Belt"),m(!0))},onPointerOver:()=>{h.current=!0,document.body.style.cursor="pointer"},onPointerOut:()=>{h.current=!1,document.body.style.cursor="auto"},children:(0,n.jsx)("meshStandardMaterial",{vertexColors:!0,roughness:.7,metalness:.5,emissive:"#666",emissiveIntensity:"planet"===p.type?0:.1,toneMapped:!1,transparent:!0,opacity:f})})]})}}},function(e){e.O(0,[433,689,942,855,264,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);