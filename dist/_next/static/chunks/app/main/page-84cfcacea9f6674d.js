(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,3130))},3130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(7437),s=r(9362),a=r(2265),o=r(7871),u=r(3719),i=r(9373);function l({pixelated:e}){let t=(0,i.z)(e=>e.gl),r=(0,i.z)(e=>e.internal.active),n=(0,i.z)(e=>e.performance.current),s=(0,i.z)(e=>e.viewport.initialDpr),o=(0,i.z)(e=>e.setDpr);return a.useEffect(()=>{let n=t.domElement;return()=>{r&&o(s),e&&n&&(n.style.imageRendering="auto")}},[]),a.useEffect(()=>{o(n*s),e&&t.domElement&&(t.domElement.style.imageRendering=1===n?"auto":"pixelated")},[n]),null}var c=r(8384),m=r(2079),p=r(8942),d=r(5375),x=r(2325),h=r(7776),g=r(878),j=r(1675),f=r(625),y=r(1577),M=r(1045),P=e=>{let{innerRadius:t,outerRadius:r,height:s=0,rotation:o,texture:u,detail:i=16}=e,l=(0,a.useMemo)(()=>{let e=new h.CylinderGeometry(r,t,s,i,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,s]),c=(0,a.useMemo)(()=>new h.MeshBasicMaterial({map:u,side:h.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:c,rotation:o})};let v=(0,a.forwardRef)((e,t)=>{let{name:r="Earth",textures:s}=e,{planetsData:o}=(0,c.d2)(),u={...o[r]},{mass:l,radius:d,orbitalOrigin:v,orbitalRadius:_,orbitalSpeed:R,orbitalPeriod:k,orbitalInclination:S,axialTilt:T,rotationPeriod:E,surfaceTemp:b,color:w,gravity:z,initialOrbitalAngle:D,interestPoints:C}=u,{simSpeed:Z,toggleDetailsMenu:U}=(0,c.ZP)(),{planetAngles:I,updatePlanetPosition:Y,selectedPlanet:B,setSelectedPlanet:O,displayLabels:G,setSelectedMoon:N,orbitPaths:X}=(0,c.d2)(),{isSurfaceCameraActive:A,satelliteCamera:F,toggleSatelliteCamera:V,setAutoRotate:H,autoRotate:q}=(0,c.g5)(),J=t||(0,a.useRef)(),K=(0,a.useRef)(I[r]||0),L=(0,a.useRef)(),[Q,W]=(0,a.useState)(!1),$=_*(A?1e-4:m.Hm),ee=d*m.YB;m.E_;let et=B&&B.name===r,er=et?64:32,[en,es]=(0,a.useState)(!1),ea=(0,a.useRef)({x:0,y:0}),eo=(0,a.useRef)(),eu=(0,a.useRef)(),[ei,el]=(0,a.useState)(ee),ec=(0,a.useRef)(1),[em,ep]=(0,a.useState)(!1),[ed,ex]=(0,a.useState)(1);(0,i.A)((e,t)=>{let n=t*Z;0===K.current?K.current=Math.PI/180*D:K.current-=2*Math.PI/(86400*k)*n;let s=$*Math.cos(K.current),a=$*Math.sin(K.current);if(J.current){let t=Math.sin(Math.PI/180*S)*$*Math.sin(K.current);if(J.current.position.set(s,t,a),Y(r,{x:s,y:t,z:a}),E){let e=2*Math.PI/(3600*E)*n,t=new h.Vector3(0,1,0);eo.current.rotateOnAxis(t,e),J.current.rotation.y>=2*Math.PI&&et&&(J.current.rotation.y%=2*Math.PI),eu.current&&(eu.current.rotation.y+=e),L.current&&(L.current.rotation.y+=1.2*e)}let o=J.current.position.distanceTo(e.camera.position);o/100<=ee?el(ee):el(o/100),ep(o<500);let u=100*ee,i=10*ee;ex(Math.max(0,Math.min(1,(o-i)/(u-i)))),ec.current&&(ec.current=.02*o)}}),(0,a.useEffect)(()=>{eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=0,eo.current.rotation.x=h.MathUtils.degToRad(T))},[T,B]),(0,a.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),s=3600*E;eo.current&&(eo.current.rotation.order="YXZ",eo.current.rotation.y=(3600*t+60*r+n)/s*2*Math.PI,eo.current.rotation.x=h.MathUtils.degToRad(T))},[E,T]);let eh=e=>{e.stopPropagation(),!en&&(U(!0),et||(O(u),N(null)))},eg=e=>{e.stopPropagation(),es(!1),ea.current={x:e.clientX,y:e.clientY}},ej=e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&es(!0)},ef=e=>{es(!1)},[ey,eM]=(0,a.useState)(!1),eP=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eM(!0)},ev=e=>{e.stopPropagation(),document.body.style.cursor="auto",eM(!1)},e_=p._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[et&&J.current&&(0,n.jsx)(j.Z,{target:J.current,targetName:r,color:w,size:ee,satelliteCamera:F,toggleSatelliteCamera:V}),(0,n.jsxs)("group",{ref:J,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:ev,onDoubleClick:e=>{e.stopPropagation(),H(!q)},children:et?(0,n.jsx)("sphereGeometry",{args:[ee,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*ei,8,8]})}),(0,n.jsxs)("mesh",{ref:eo,children:[(0,n.jsx)("sphereGeometry",{args:[et?ee:ei,er,er]}),et||!Q||em?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>W(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.035*ee,er,er]}),(0,n.jsx)("shaderMaterial",{args:[M.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:L,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*ee,er,er]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==s?void 0:s.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:w})]},et?r+"-textured":r+"-basic"),"Saturn"===r&&em&&(0,n.jsx)(P,{innerRadius:1.2*ee,outerRadius:2*ee,height:0,rotation:[h.MathUtils.degToRad(T),0,0],texture:null==s?void 0:s.ringTexture,detail:2*er}),"Uranus"===r&&em&&(0,n.jsx)(P,{innerRadius:1.5*ee,outerRadius:1.9*ee,height:0,texture:null==s?void 0:s.ringTexture,detail:2*er,rotation:[h.MathUtils.degToRad(T),0,0]}),(G&&!et||ey&&!et)&&(0,n.jsx)(y.Z,{text:r,size:null==ec?void 0:ec.current,position:[0,1.2*ei+(null==ec?void 0:ec.current),0],color:w,handleClick:eh,font:"../assets/fonts/Termina_Black.ttf"},r),G&&et&&(0,n.jsx)(x.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":et?ei+.25*ei:4*ei,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:w},onClick:eh,onPointerDown:eg,onPointerMove:ej,onPointerUp:ef,onPointerOver:eP,onPointerOut:ev,children:r})}),et&&e_.map((e,t)=>{var s;let a=["Saturn","Uranus"].includes(r);return(0,n.jsx)("group",{rotation:a?[h.MathUtils.degToRad(T),0,0]:[0,0,0],children:(0,n.jsx)(f.Z,{moonData:e,planetPosition:null===(s=J.current)||void 0===s?void 0:s.position},"".concat(r,"-moon-").concat(t))},"".concat(r,"-moon-group-").concat(t))})]}),X&&(0,n.jsx)(g.Z,{origin:v,radius:$,orbitalInclination:S,color:w,name:r,opacity:et?ed:.5,hiRes:et})]})});var _=r(3920),R=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:s,setPrevSpeed:x}=(0,c.ZP)(),{planetPositions:h,selectedPlanet:g,setSelectedPlanet:j,moonPositions:f,selectedMoon:y,setSelectedMoon:M,planetsData:P}=(0,c.d2)(),{satelliteCamera:R,triggerReset:k,setTriggerReset:S,isCameraTransitioning:T,toggleCameraTransitioning:E}=(0,c.g5)(),b=(0,a.useRef)(),[w,z]=(0,a.useState)(200),[D,C]=(0,a.useState)(null),Z=e=>4.2*e,U=()=>{if(!b.current)return;j(null),M(null),z(200),b.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};b.current.setPosition(t.x,t.y,t.z,!0)},[I,Y]=(0,a.useState)(!1);(0,i.A)(()=>{if(g&&b.current){let e=h[g.name];if(e){let t=Z(P[g.name].radius*m.YB);z(t/2),b.current.setTarget(e.x,e.y,e.z,!0),b.current.dollyTo(t,!0),Y(!1),console.log(I)}"Sun"!==g.name||I||(z(200),b.current.setTarget(0,0,0,!0),b.current.distance<210&&Y(!0),b.current.dollyTo(200,!0))}});let B=(e,t)=>{let r=p._d[e].find(e=>e.name===t);return console.log(r),r};(0,i.A)(()=>{if(y&&b.current){let e=f[y.name];if(e){let t=B(D,y.name),r=Z((null==t?void 0:t.radius)*p.sh);z(r/2),b.current.setTarget(e.x,e.y,e.z,!0),b.current.dollyTo(r,!0)}}}),(0,a.useEffect)(()=>{U&&(U(),S(!1))},[k]),(0,a.useEffect)(()=>{var e;g&&"Sun"!==g.name&&!T&&(x(t),r(0),E(!0),C(g.name)),y&&!T&&(x(t),r(0),E(!0)),g||(Y(!1),r(s),E(!1)),null===(e=b.current)||void 0===e||e.camera.updateProjectionMatrix()},[g,y]);let O=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),G=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),N=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),X=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),A=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),F=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),V=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),H=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),q=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!R&&(0,n.jsx)(u.B,{ref:b,makeDefault:!R,maxDistance:9e4,smoothTime:.65,enableDamping:!0,near:.001,far:1e6,minDistance:w}),(0,n.jsx)(_.Z,{}),(0,n.jsx)(l,{pixelated:!0}),(0,n.jsx)(v,{name:"Earth",textures:O}),(0,n.jsx)(v,{name:"Mars",textures:A}),(0,n.jsx)(v,{name:"Venus",textures:N}),(0,n.jsx)(v,{name:"Mercury",textures:X}),(0,n.jsx)(v,{name:"Jupiter",textures:F}),(0,n.jsx)(v,{name:"Saturn",textures:V}),(0,n.jsx)(v,{name:"Uranus",textures:H}),(0,n.jsx)(v,{name:"Neptune",textures:q}),(0,n.jsx)(d.Z,{textures:G,position:e.position,resetCamera:U},"Sun-plain")]})},k=()=>(0,n.jsx)(s.Z,{children:(0,n.jsx)(R,{})})}},function(e){e.O(0,[393,689,284,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);