(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,n){Promise.resolve().then(n.bind(n,1780))},1780:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(7437),a=n(4220),s=n(2265),o=n(7871),i=n(3719),u=n(8384),c=n(2803),l=n(2079),m=n(8942),d=n(5375),p=n(5264),g=n(3920),h=n(9373),x=n(9818),M=n(7776),f=()=>{let e=(0,u.ZP)(e=>e.sunSettings),t=(0,u.ZP)(e=>e.simSpeed),n=(0,u.ZP)(e=>e.setSimSpeed),a=(0,u.ZP)(e=>e.setPrevSpeed),f=(0,u.ZP)(e=>e.setViewOnlyMode),y=(0,u.ZP)(e=>e.toggleDetailsMenu),j=(0,u.d2)(e=>e.planetPositions),S=(0,u.d2)(e=>e.selectedPlanet),w=(0,u.d2)(e=>e.setSelectedPlanet),P=(0,u.d2)(e=>e.setSelectedMoon),b=(0,u.d2)(e=>e.planetsData),T=(0,u.d2)(e=>e.moonsData),A=(0,u.d2)(e=>e.moonPositions),Z=(0,u.g5)(e=>e.satelliteCamera),V=(0,u.g5)(e=>e.isCameraTransitioning),C=(0,u.g5)(e=>e.toggleCameraTransitioning),B=(0,u.g5)(e=>e.resetCamera),k=(0,u.g5)(e=>e.toggleZoomingToSun),v=(0,u.g5)(e=>e.activeCamera),z=(0,u.g5)(e=>e.satelliteCameraState),D=(0,u.g5)(e=>e.setSatelliteCameraState),E=(0,c.Z)(e=>e.toggleExperimentMode),R=(0,s.useRef)(),[H,_]=(0,s.useState)(200),[I,U]=(0,s.useState)(!1),F=[1e5,1e5,1e5],L=[2e4,2e4,2e4],N=[0,0,0],G=(0,s.useRef)(!1);(0,s.useEffect)(()=>{R.current&&!I&&(R.current.setPosition(...F,!1),R.current.setTarget(...N,!1),setTimeout(()=>{R.current.setPosition(...L,!0),R.current.setTarget(...N,!0),U(!0)},100))},[R.current]);let O=e=>4.2*e,q=(e,t)=>{let n=T[t];return n?n.find(t=>t.name===e):null};(0,h.A)(()=>{if(R.current){if(z?.position&&V){let{position:e,targetPosition:t}=z;R.current.setPosition(e.x,e.y,e.z,!1),R.current.setTarget(t.x,t.y,t.z,!1),R.current.updateCameraUp(),R.current.update(),D(null)}if("planet"===v.type&&"Sun"!==v.name){let e=j[S.name];if(e){let t=O(b[S.name].radius*l.YB);_(t/2),R.current.setTarget(e.x,e.y,e.z,!0),R.current.dollyTo(t,!0),k(!1)}}if("moon"===v.type){let e=A[v.name],t=q(v.name,v.parentName);if(e&&t){let n=new M.Vector3;R.current.getPosition(n);let r=O(t.radius*m.sh);_(r/2),R.current.setLookAt(n.x,n.y,n.z,e.x,e.y,e.z,!0),R.current.dollyTo(r,!0)}}if("Sun"===v.name&&G.current){let e=new M.Vector3,t=new M.Vector3;R.current.getTarget(e),R.current.getPosition(t),10>Math.abs(t.distanceTo(new M.Vector3(0,0,0))-500)?(G.current=!1,C(!1),R.current.enabled=!0):(R.current.setTarget(0,0,0,!0),R.current.dollyTo(500,!0))}if("Asteroid Belt"===v.name&&G.current){let e=new M.Vector3;R.current.getPosition(e);let t=v.position;100>e.distanceTo(new M.Vector3(t.x,t.y,t.z))?(G.current=!1,C(!1),R.current.enabled=!0):(R.current.setPosition(t.x,t.y,t.z,!0),R.current.setTarget(0,0,0,!0))}if("default"===v.name&&V){let e=v.position,t=v.lookAt,n=new M.Vector3,r=new M.Vector3;R.current.getPosition(n),R.current.getTarget(r),n.distanceTo(e)>100&&R.current.setLookAt(e.x,e.y,e.z,t.x,t.y,t.z,!0),C(!1),_(200),y(!0)}"orbit"!==v.type||V||(_(200),R.current.maxDistance=16e4)}}),(0,s.useEffect)(()=>{R.current&&!I&&(R.current.setPosition(...F,!1),R.current.setTarget(...N,!1),R.current.camera.updateProjectionMatrix(),setTimeout(()=>{B(),U(!0)},100))},[R.current]),(0,s.useEffect)(()=>{if(("Sun"===v.name||"Asteroid Belt"===v.name)&&(G.current=!0,R.current.enabled=!1,P(null),w(null),"Sun"===v.name?(_(200),R.current.maxDistance=1e3):"Asteroid Belt"===v.name&&(_(4250),R.current.maxDistance=9e3)),"planet"===v.type||"moon"===v.type){if(0===t)return;C(!0),a(t),n(0)}R.current?.camera.updateProjectionMatrix()},[v]),(0,s.useEffect)(()=>{f(!1),E(!1);let e=e=>{1===e.button&&e.preventDefault(),R.current&&(R.current.mouseButtons.right=1)};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[]);let J=(0,o.m)({map:"../assets/earth/earth_daymap.jpg",clouds:"../assets/earth/earth_clouds.jpg"}),Q=(0,o.m)({map:"../assets/sun/sun.jpg"}),W=(0,o.m)({map:"../assets/venus/venus_surface.jpg"}),Y=(0,o.m)({map:"../assets/mercury/mercury.jpg"}),K=(0,o.m)({map:"../assets/mars/mars.jpg"}),X=(0,o.m)({map:"../assets/jupiter/jupiter.jpg"}),$=(0,o.m)({map:"../assets/saturn/saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),ee=(0,o.m)({map:"../assets/uranus/uranus.jpg",ringTexture:"../assets/uranus/uranus-rings.png"}),et=(0,o.m)({map:"../assets/neptune/neptune.jpg"});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.B,{ref:R,makeDefault:!Z,enabled:!Z,maxDistance:16e4,minDistance:H,near:.001,far:15e5,smoothTime:.6,enableDamping:!0,draggingSmoothTime:.25,azimuthRotateSpeed:1,polarRotateSpeed:1,dollySpeed:.4}),(0,r.jsx)(g.Z,{}),(0,r.jsx)(p.Z,{name:"Earth",textures:J}),(0,r.jsx)(p.Z,{name:"Mars",textures:K}),(0,r.jsx)(p.Z,{name:"Venus",textures:W}),(0,r.jsx)(p.Z,{name:"Mercury",textures:Y}),(0,r.jsx)(p.Z,{name:"Jupiter",textures:X}),(0,r.jsx)(p.Z,{name:"Saturn",textures:$}),(0,r.jsx)(p.Z,{name:"Uranus",textures:ee}),(0,r.jsx)(p.Z,{name:"Neptune",textures:et}),(0,r.jsx)(x.Z,{meshCount:2500}),(0,r.jsx)(d.Z,{textures:Q,position:e.position,resetCamera:B},"Sun-plain")]})},y=()=>(0,r.jsx)(a.Z,{children:(0,r.jsx)(f,{})})},9818:function(e,t,n){"use strict";var r=n(7437),a=n(2265),s=n(9373),o=n(7776),i=n(8384),u=n(2079),c=n(1577);t.Z=e=>{let{meshCount:t=500}=e,{simSpeed:n}=(0,i.ZP)(),{switchToCustomCamera:l,setAutoRotate:m,activeCamera:d}=(0,i.g5)(),{displayLabels:p}=(0,i.d2)();(0,a.useRef)(!1);let g=(0,a.useRef)(1),h=(0,a.useRef)(),x=(0,a.useRef)(),M=("planet"===d.type||"moon"===d.type)&&"Sun"!==d.name?0:1,f=u.B9.innerRadius,y=u.B9.outerRadius-f;u.Hm;let j={C:{baseHue:.083,hueVariation:.02,saturation:[.15,.25],lightness:[.25,.35]},S:{baseHue:.055,hueVariation:.015,saturation:[.25,.45],lightness:[.35,.45]},M:{baseHue:.1,hueVariation:.01,saturation:[.15,.3],lightness:[.4,.5]},D:{baseHue:.065,hueVariation:.01,saturation:[.15,.2],lightness:[.2,.25]},V:{baseHue:.03,hueVariation:.01,saturation:[.3,.5],lightness:[.3,.4]}},S=(e,t)=>e+Math.random()*(t-e),w=(0,a.useCallback)(()=>{let e=Math.random(),t=j[e<.75?"C":e<.92?"S":e<.97?"M":e<.99?"D":"V"],n=t.baseHue+(Math.random()-.5)*t.hueVariation,r=S(...t.saturation),a=S(...t.lightness),s=new o.Color().setHSL(o.MathUtils.clamp(n,0,1),o.MathUtils.clamp(r,0,1),o.MathUtils.clamp(a+(Math.random()-.5)*.05,0,1));return s.multiplyScalar(1.2),s},[]),P=(0,a.useCallback)(()=>10+15*Math.pow(Math.random(),20),[]),b=(0,a.useCallback)(e=>{let t=f+Math.pow(Math.random(),.7)*y,n=Math.sqrt(u.G*u.Gw/(1e3*t));return{semiMajorAxis:t*u.Hm,eccentricity:Math.min(.3,Math.abs(.15+.07*(Math.random()+Math.random()+Math.random()-1.5))),orbitalSpeed:-(1e-10*n),angle:Math.random()*Math.PI*2,inclination:Math.PI/180*Math.abs(8.5+6.2*(Math.random()+Math.random()+Math.random()-1.5)),scale:P(),rotationAxis:new o.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),rotationSpeed:(.1+.9*Math.random())*1e-5,color:w()}},[]),T=(0,a.useMemo)(()=>{let e=Array.from({length:t},(e,t)=>b(t)),n=new Float32Array(3*t);return e.forEach((e,t)=>{n[3*t]=e.color.r,n[3*t+1]=e.color.g,n[3*t+2]=e.color.b}),x.current=n,e},[t,b]),A=(0,a.useRef)(),Z=new o.Matrix4,V=new o.Vector3,C=new o.Quaternion,B=new o.Vector3;(0,s.A)((e,r)=>{let a=-r*n*.06;if(0!==a){for(let n=0;n<t;n++){let t=T[n];t.angle+=t.orbitalSpeed*a;let r=t.semiMajorAxis*(1-t.eccentricity*t.eccentricity)/(1+t.eccentricity*Math.cos(t.angle));V.set(r*Math.cos(t.angle),r*Math.sin(t.inclination)*Math.sin(t.angle),r*Math.cos(t.inclination)*Math.sin(t.angle)),C.setFromAxisAngle(t.rotationAxis,e.clock.elapsedTime*t.rotationSpeed),B.setScalar(t.scale),Z.compose(V,C,B),A.current.setMatrixAt(n,Z)}if(A.current.instanceMatrix.needsUpdate=!0,h.current){let t=h.current.getWorldPosition(new o.Vector3);g.current=.02*e.camera.position.distanceTo(t)}}});let k=(0,a.useMemo)(()=>{let e=new o.IcosahedronGeometry(1,1),t=new o.InstancedBufferGeometry().copy(e);return t.setAttribute("color",new o.InstancedBufferAttribute(x.current,3)),t},[]);return(0,r.jsxs)("group",{children:[(0,r.jsx)("group",{position:[-0,800,4e3],children:p&&(0,r.jsx)(c.Z,{text:"Asteroid Belt",size:16,color:"#FFA500",handleClick:()=>{"Asteroid Belt"!==d.name&&l("Asteroid Belt")},zIndexRange:[100,0]})}),(0,r.jsx)("instancedMesh",{ref:A,args:[k,null,t],onClick:e=>{e.stopPropagation(),"Asteroid Belt"!==d.name&&(l("Asteroid Belt"),m(!0))},children:(0,r.jsx)("meshStandardMaterial",{vertexColors:!0,roughness:.7,metalness:.7,emissive:"#888",emissiveIntensity:.1,toneMapped:!1,transparent:!0,opacity:M})})]})}}},function(e){e.O(0,[260,689,723,974,122,264,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);