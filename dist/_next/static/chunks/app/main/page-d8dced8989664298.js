(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,t,r){Promise.resolve().then(r.bind(r,3130))},3130:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(7437),s=r(9362),a=r(2265),o=r(7871),u=r(3719),i=r(9373);function l({pixelated:e}){let t=(0,i.z)(e=>e.gl),r=(0,i.z)(e=>e.internal.active),n=(0,i.z)(e=>e.performance.current),s=(0,i.z)(e=>e.viewport.initialDpr),o=(0,i.z)(e=>e.setDpr);return a.useEffect(()=>{let n=t.domElement;return()=>{r&&o(s),e&&n&&(n.style.imageRendering="auto")}},[]),a.useEffect(()=>{o(n*s),e&&t.domElement&&(t.domElement.style.imageRendering=1===n?"auto":"pixelated")},[n]),null}var c=r(8384),m=r(2079),p=r(5375),d=r(2325),x=r(7776),h=r(878),g=r(1675),j=r(625),f=r(1577),y=r(8942),M=r(1045),P=e=>{let{innerRadius:t,outerRadius:r,height:s=0,rotation:o,texture:u,detail:i=16}=e,l=(0,a.useMemo)(()=>{let e=new x.CylinderGeometry(r,t,s,i,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,s]),c=(0,a.useMemo)(()=>new x.MeshBasicMaterial({map:u,side:x.DoubleSide,transparent:!0}),[u]);return(0,n.jsx)("mesh",{geometry:l,material:c,rotation:o})};let v=(0,a.forwardRef)((e,t)=>{let{name:r="Earth",textures:s,shaderMaterial:o}=e,{planetsData:u}=(0,c.d2)(),l={...u[r]},{mass:p,radius:v,orbitalOrigin:_,orbitalRadius:R,orbitalSpeed:k,orbitalPeriod:S,orbitalInclination:E,axialTilt:T,rotationPeriod:w,surfaceTemp:b,color:z,gravity:D,initialOrbitalAngle:C,interestPoints:Z}=l,{simSpeed:U,toggleDetailsMenu:I}=(0,c.ZP)(),{planetAngles:Y,updatePlanetPosition:B,selectedPlanet:O,setSelectedPlanet:G,displayLabels:N,selectedMoon:X,setSelectedMoon:F,orbitPaths:A}=(0,c.d2)(),{isSurfaceCameraActive:V,satelliteCamera:H,toggleSatelliteCamera:q,setAutoRotate:J,autoRotate:K}=(0,c.g5)(),L=t||(0,a.useRef)(),Q=(0,a.useRef)(Y[r]||0),W=(0,a.useRef)(),[$,ee]=(0,a.useState)(!1),et=R*(V?1e-4:m.Hm),er=v*m.YB;m.E_;let en=O&&O.name===r,es=en?64:32,[ea,eo]=(0,a.useState)(!1),eu=(0,a.useRef)({x:0,y:0}),ei=(0,a.useRef)(null);(0,a.useRef)(null),(0,a.useRef)(0);let[el,ec]=(0,a.useState)(er),em=(0,a.useRef)(1),[ep,ed]=(0,a.useState)(!1),[ex,eh]=(0,a.useState)(1);(0,i.A)((e,t)=>{let n=t*U;0===Q.current?Q.current=Math.PI/180*C:Q.current-=2*Math.PI/(86400*S)*n;let s=et*Math.cos(Q.current),a=et*Math.sin(Q.current);if(L.current){let t=Math.sin(Math.PI/180*E)*et*Math.sin(Q.current);if(L.current.position.set(s,t,a),B(r,{x:s,y:t,z:a}),w){let e=2*Math.PI/(3600*w)*n,t=new x.Vector3(0,1,0);ei.current.rotateOnAxis(t,e),L.current.rotation.y>=2*Math.PI&&en&&(L.current.rotation.y%=2*Math.PI),W.current&&(W.current.rotation.y+=1.2*e)}let o=L.current.position.distanceTo(e.camera.position);o/100<=er?ec(er):ec(o/100),ed(o<500);let u=100*er,i=10*er;eh(Math.max(0,Math.min(1,(o-i)/(u-i)))),em.current&&(em.current=.02*o)}}),(0,a.useEffect)(()=>{ei.current&&(ei.current.rotation.order="YXZ",ei.current.rotation.y=0,ei.current.rotation.x=x.MathUtils.degToRad(T))},[T,O]),(0,a.useEffect)(()=>{let e=new Date(2023,0,1,1,45,30),t=e.getHours(),r=e.getMinutes(),n=e.getSeconds(),s=3600*w;ei.current&&(ei.current.rotation.order="YXZ",ei.current.rotation.y=(3600*t+60*r+n)/s*2*Math.PI,ei.current.rotation.x=x.MathUtils.degToRad(T))},[w,T]);let eg=e=>{e.stopPropagation(),!ea&&(I(!0),F(null),en||G(l))},ej=e=>{e.stopPropagation(),eo(!1),eu.current={x:e.clientX,y:e.clientY}},ef=e=>{Math.sqrt(Math.pow(e.clientX-eu.current.x,2)+Math.pow(e.clientY-eu.current.y,2))>5&&eo(!0)},ey=e=>{eo(!1)},[eM,eP]=(0,a.useState)(!1),ev=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eP(!0)},e_=e=>{e.stopPropagation(),document.body.style.cursor="auto",eP(!1)},eR=y._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[en&&!X&&L.current&&(0,n.jsx)(g.Z,{target:L.current,targetName:r,size:er,satelliteCamera:H,toggleSatelliteCamera:q}),(0,n.jsxs)("group",{ref:L,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eg,onPointerDown:ej,onPointerMove:ef,onPointerUp:ey,onPointerOver:ev,onPointerOut:e_,onDoubleClick:e=>{e.stopPropagation(),J(!K)},children:en?(0,n.jsx)("sphereGeometry",{args:[er,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*el,8,8]})}),(0,n.jsxs)("mesh",{ref:ei,children:[(0,n.jsx)("sphereGeometry",{args:[en?er:el,es,es]}),en||!$||ep?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>ee(!0)}),"Earth"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.035*er,es,es]}),(0,n.jsx)("shaderMaterial",{args:[M.et]})]},"".concat(r,"-atmosphere")),(0,n.jsxs)("mesh",{ref:W,children:[(0,n.jsx)("sphereGeometry",{args:[1.005*er,es,es]}),(0,n.jsx)("meshPhysicalMaterial",{alphaMap:null==s?void 0:s.clouds,transparent:!0,opacity:1.5})]},"".concat(r,"-cloud_texture"))]})]}):(0,n.jsx)("meshBasicMaterial",{color:z})]},en?r+"-textured":r+"-basic"),"Saturn"===r&&ep&&(0,n.jsx)(P,{innerRadius:1.2*er,outerRadius:2*er,height:0,rotation:[x.MathUtils.degToRad(T),0,0],texture:null==s?void 0:s.ringTexture,detail:2*es}),"Uranus"===r&&ep&&(0,n.jsx)(P,{innerRadius:1.5*er,outerRadius:1.9*er,height:0,texture:null==s?void 0:s.ringTexture,detail:2*es,rotation:[x.MathUtils.degToRad(T),0,0]}),(N&&!en||eM&&!en)&&(0,n.jsx)(f.Z,{text:r,size:null==em?void 0:em.current,position:[0,1.2*el+(null==em?void 0:em.current),0],color:z,handleClick:eg,handlePointerDown:ej,font:"../assets/fonts/Termina_Black.ttf"},r),N&&en&&(0,n.jsx)(d.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":en?el+.25*el:4*el,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:z},onClick:eg,onPointerDown:ej,onPointerMove:ef,onPointerUp:ey,onPointerOver:ev,onPointerOut:e_,children:r})}),en&&eR.map((e,t)=>{var s;let a=["Saturn","Uranus"].includes(r);return(0,n.jsx)("group",{rotation:a?[x.MathUtils.degToRad(T),0,0]:[0,0,0],children:(0,n.jsx)(j.Z,{moonData:e,planetPosition:null===(s=L.current)||void 0===s?void 0:s.position},"".concat(r,"-moon-").concat(t))},"".concat(r,"-moon-group-").concat(t))})]}),A&&(0,n.jsx)(h.Z,{origin:_,radius:et,orbitalInclination:E,color:z,name:r,opacity:en?ex:.5,hiRes:en})]})});var _=r(3920),R=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:s,setPrevSpeed:d}=(0,c.ZP)(),{planetPositions:x,selectedPlanet:h,setSelectedPlanet:g,moonPositions:j,moonWorldPositions:f,selectedMoon:y,setSelectedMoon:M,planetsData:P}=(0,c.d2)(),{satelliteCamera:R,triggerReset:k,setTriggerReset:S,isCameraTransitioning:E,toggleCameraTransitioning:T,selectedMoonCameraActive:w,setSelectedMoonCameraActive:b}=(0,c.g5)(),z=(0,a.useRef)(),[D,C]=(0,a.useState)(200),[Z,U]=(0,a.useState)(null),[I,Y]=(0,a.useState)(!1),B=e=>4.2*e,O=()=>{if(!z.current)return;g(null),M(null),C(200),z.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};z.current.setPosition(t.x,t.y,t.z,!0)};(0,i.A)(()=>{if(h&&!y&&z.current){U(h.name),M(null);let e=x[h.name];if(e){let t=B(P[h.name].radius*m.YB);C(t/2),z.current.setTarget(e.x,e.y,e.z,!0),z.current.dollyTo(t,!0),Y(!1)}"Sun"!==h.name||I||(C(200),z.current.setTarget(0,0,0,!0),z.current.distance<210&&Y(!0),z.current.dollyTo(200,!0))}}),(0,a.useEffect)(()=>{O&&(O(),S(!1))},[k]),(0,a.useEffect)(()=>{var e;!h||y||"Sun"===h.name||E||(M(null),T(!0),d(t),r(0)),h||y||(Y(!1),r(s),T(!1)),null===(e=z.current)||void 0===e||e.camera.updateProjectionMatrix()},[h,y]);let G=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",night:"../assets/earth/2k_earth_nightmap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),N=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),X=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),F=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),A=(0,o.m)({map:"../assets/mars/1k_mars.jpg"}),V=(0,o.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),H=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),q=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),J=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!R&&(0,n.jsx)(u.B,{ref:z,makeDefault:!R,maxDistance:9e4,smoothTime:.65,enableDamping:!0,near:.001,far:1e6,minDistance:D}),(0,n.jsx)(_.Z,{}),(0,n.jsx)(l,{pixelated:!0}),(0,n.jsx)(v,{name:"Earth",textures:G}),(0,n.jsx)(v,{name:"Mars",textures:A}),(0,n.jsx)(v,{name:"Venus",textures:X}),(0,n.jsx)(v,{name:"Mercury",textures:F}),(0,n.jsx)(v,{name:"Jupiter",textures:V}),(0,n.jsx)(v,{name:"Saturn",textures:H}),(0,n.jsx)(v,{name:"Uranus",textures:q}),(0,n.jsx)(v,{name:"Neptune",textures:J}),(0,n.jsx)(p.Z,{textures:N,position:e.position,resetCamera:O},"Sun-plain")]})},k=()=>(0,n.jsx)(s.Z,{children:(0,n.jsx)(R,{})})}},function(e){e.O(0,[393,689,137,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);