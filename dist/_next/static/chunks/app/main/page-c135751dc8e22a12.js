(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4466:function(e,r,t){Promise.resolve().then(t.bind(t,2374))},2374:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return P}});var n=t(7437),o=t(9362),a=t(2265),s=t(7871),i=t(3719),l=t(9373);function u({pixelated:e}){let r=(0,l.z)(e=>e.gl),t=(0,l.z)(e=>e.internal.active),n=(0,l.z)(e=>e.performance.current),o=(0,l.z)(e=>e.viewport.initialDpr),s=(0,l.z)(e=>e.setDpr);return a.useEffect(()=>{let n=r.domElement;return()=>{t&&s(o),e&&n&&(n.style.imageRendering="auto")}},[]),a.useEffect(()=>{s(n*o),e&&r.domElement&&(r.domElement.style.imageRendering=1===n?"auto":"pixelated")},[n]),null}var c=t(8384),m=t(2079),p=t(5375),d=t(2325),h=t(7776),x=t(878),g=t(1675),v=t(625),f=t(1577),y=t(8942);t(1045);var j=e=>{let{innerRadius:r,outerRadius:t,height:o=0,rotation:s,texture:i,detail:l=16}=e,u=(0,a.useMemo)(()=>{let e=new h.CylinderGeometry(t,r,o,l,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let r=n.getX(e),t=n.getY(e);n.setXY(e,r,t)}return e},[r,t,o]),c=(0,a.useMemo)(()=>new h.MeshBasicMaterial({map:i,side:h.DoubleSide,transparent:!0}),[i]);return(0,n.jsx)("mesh",{geometry:u,material:c,rotation:s})};let M=(0,a.forwardRef)((e,r)=>{let{name:t="Earth",textures:o}=e,{planetsData:s}=(0,c.d2)(),i={...s[t]},{mass:u,radius:p,orbitalOrigin:M,orbitalRadius:C,orbitalSpeed:S,orbitalPeriod:P,orbitalInclination:D,axialTilt:w,rotationPeriod:T,surfaceTemp:_,color:R,gravity:k,initialOrbitalAngle:b,interestPoints:U}=i,{simSpeed:z,toggleDetailsMenu:E}=(0,c.ZP)(),{planetAngles:N,updatePlanetPosition:F,selectedPlanet:A,setSelectedPlanet:B,displayLabels:G,selectedMoon:I,setSelectedMoon:O,orbitPaths:Z}=(0,c.d2)(),{isSurfaceCameraActive:Y,satelliteCamera:V,toggleSatelliteCamera:X,setAutoRotate:L,autoRotate:q}=(0,c.g5)(),H=r||(0,a.useRef)(),J=(0,a.useRef)(N[t]||0),K=(0,a.useRef)(),[Q,W]=(0,a.useState)(!1),$=C*(Y?1e-4:m.Hm),ee=p*m.YB;m.E_;let er=A&&A.name===t,et=er?64:32,[en,eo]=(0,a.useState)(!1),ea=(0,a.useRef)({x:0,y:0}),es=(0,a.useRef)(null),[ei,el]=(0,a.useState)(ee),eu=(0,a.useRef)(1),[ec,em]=(0,a.useState)(!1),[ep,ed]=(0,a.useState)(1),eh={};eh.atmosphereDayColor="#0088FF",eh.atmosphereTwilightColor="#FF9D00";let ex=(0,a.useRef)(new h.Vector3(0,0,1)),eg=new h.ShaderMaterial({vertexShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main()\n{\n    // Position\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * viewMatrix * modelPosition;\n\n    // Model normal\n    vec3 modelNormal = (modelMatrix * vec4(normal, 0.0)).xyz;\n\n    // Varyings\n    vUv = uv;\n    vNormal = modelNormal;\n    vPosition = modelPosition.xyz;\n}",fragmentShader:"#define GLSLIFY 1\nuniform sampler2D uDayTexture;\nuniform sampler2D uNightTexture;\nuniform sampler2D uSpecularCloudsTexture;\nuniform vec3 uSunDirection;\nuniform vec3 uAtmosphereDayColor;\nuniform vec3 uAtmosphereTwilightColor;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vPosition;\n\nvoid main()\n{\n    vec3 viewDirection = normalize(vPosition - cameraPosition);\n    vec3 normal = normalize(vNormal);\n    vec3 color = vec3(0.0);\n\n    // Sun orientation\n    float sunOrientation = dot(uSunDirection, normal);\n\n    // Day / night color\n    float dayMix = smoothstep(- 0.25, 0.5, sunOrientation);\n    vec3 dayColor = texture(uDayTexture, vUv).rgb;\n    vec3 nightColor = texture(uNightTexture, vUv).rgb;\n    color = mix(nightColor, dayColor, dayMix);\n\n    // Specular cloud color\n    vec2 specularCloudsColor = texture(uSpecularCloudsTexture, vUv).rg;\n\n    // Clouds\n    float cloudsMix = smoothstep(0.5, 1.0, specularCloudsColor.g);\n    cloudsMix *= dayMix;\n    color = mix(color, vec3(1.0), cloudsMix);\n\n    // Fresnel\n    float fresnel = dot(viewDirection, normal) + 1.0;\n    fresnel = pow(fresnel, 2.0);\n\n    // Atmosphere\n    float atmosphereDayMix = smoothstep(- 0.5, 1.0, sunOrientation);\n    vec3 atmosphereColor = mix(uAtmosphereTwilightColor, uAtmosphereDayColor, atmosphereDayMix);\n    color = mix(color, atmosphereColor, fresnel * atmosphereDayMix);\n\n    // Specular\n    vec3 reflection = reflect(- uSunDirection, normal);\n    float specular = - dot(reflection, viewDirection);\n    specular = max(specular, 0.0);\n    specular = pow(specular, 32.0);\n    specular *= specularCloudsColor.r;\n\n    vec3 specularColor = mix(vec3(1.0), atmosphereColor, fresnel);\n    color += specular * specularColor;\n\n    // Final color\n    gl_FragColor = vec4(color, 1.0);\n    #include <tonemapping_fragment>\n    #include <colorspace_fragment>\n}",uniforms:{uDayTexture:new h.Uniform(o.map),uNightTexture:new h.Uniform(o.night),uSunDirection:{value:ex.current},uAtmosphereDayColor:new h.Uniform(new h.Color(eh.atmosphereDayColor)),uAtmosphereTwilightColor:new h.Uniform(new h.Color(eh.atmosphereTwilightColor))}});(0,l.A)((e,r)=>{let n=r*z;0===J.current?J.current=Math.PI/180*b:J.current-=2*Math.PI/(86400*P)*n;let o=$*Math.cos(J.current),a=$*Math.sin(J.current);if(H.current){var s;let r=Math.sin(Math.PI/180*D)*$*Math.sin(J.current);if(H.current.position.set(o,r,a),F(t,{x:o,y:r,z:a}),T){let e=2*Math.PI/(3600*T)*n,r=new h.Vector3(0,1,0);es.current.rotateOnAxis(r,e),H.current.rotation.y>=2*Math.PI&&er&&(H.current.rotation.y%=2*Math.PI),K.current&&(K.current.rotation.y+=1.2*e)}ex.current.set(0,0,0).sub(H.current.position).normalize(),"Earth"===t&&(null===(s=es.current.material.uniforms)||void 0===s?void 0:s.uSunDirection)&&es.current.material.uniforms.uSunDirection.value.copy(ex.current);let i=H.current.position.distanceTo(e.camera.position);i/100<=ee?el(ee):el(i/100),em(i<500),"Earth"===t&&console.log(i);let l=100*ee,u=10*ee;ed(Math.max(0,Math.min(1,(i-u)/(l-u)))),eu.current&&(eu.current=.02*i)}}),(0,a.useEffect)(()=>{es.current&&(es.current.rotation.order="YXZ",es.current.rotation.y=0,es.current.rotation.x=h.MathUtils.degToRad(w))},[w,A]);let ev=e=>{e.stopPropagation(),!en&&(E(!0),O(null),er||B(i))},ef=e=>{e.stopPropagation(),eo(!1),ea.current={x:e.clientX,y:e.clientY}},ey=e=>{Math.sqrt(Math.pow(e.clientX-ea.current.x,2)+Math.pow(e.clientY-ea.current.y,2))>5&&eo(!0)},ej=e=>{eo(!1)},[eM,eC]=(0,a.useState)(!1),eS=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eC(!0)},eP=e=>{e.stopPropagation(),document.body.style.cursor="auto",eC(!1)},eD=y._d[t]||[];return(0,n.jsxs)(n.Fragment,{children:[er&&!I&&H.current&&(0,n.jsx)(g.Z,{target:H.current,targetName:t,size:ee,satelliteCamera:V,toggleSatelliteCamera:X}),(0,n.jsxs)("group",{ref:H,children:[(0,n.jsx)("mesh",{visible:!1,onClick:ev,onPointerDown:ef,onPointerMove:ey,onPointerUp:ej,onPointerOver:eS,onPointerOut:eP,onDoubleClick:e=>{e.stopPropagation(),L(!q)},children:er?(0,n.jsx)("sphereGeometry",{args:[ee,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*ei,8,8]})}),(0,n.jsxs)("mesh",{ref:es,children:[(0,n.jsx)("sphereGeometry",{args:[er?ee:ei,et,et]}),!er&&Q?(0,n.jsx)("meshBasicMaterial",{color:R}):(0,n.jsxs)(n.Fragment,{children:["Earth"===t&&er&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("shaderMaterial",{attach:"material",args:[eg]}),(0,n.jsxs)("mesh",{ref:K,children:[(0,n.jsx)("sphereGeometry",{args:[Math.min(1.01*ee),et,et]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==o?void 0:o.clouds,transparent:!0,opacity:1})]},"".concat(t,"-cloud_texture"))]}),(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==o?void 0:o.map,onBuild:()=>W(!0)})]})]},er?t+"-textured":t+"-basic"),"Saturn"===t&&ec&&(0,n.jsx)(j,{innerRadius:1.2*ee,outerRadius:2*ee,height:0,rotation:[h.MathUtils.degToRad(w),0,0],texture:null==o?void 0:o.ringTexture,detail:2*et}),"Uranus"===t&&ec&&(0,n.jsx)(j,{innerRadius:1.5*ee,outerRadius:1.9*ee,height:0,texture:null==o?void 0:o.ringTexture,detail:2*et,rotation:[h.MathUtils.degToRad(w),0,0]}),(G&&!er||eM&&!er)&&(0,n.jsx)(f.Z,{text:t,size:null==eu?void 0:eu.current,position:[0,1.2*ei+(null==eu?void 0:eu.current),0],color:R,handleClick:ev,handlePointerDown:ef,font:"../assets/fonts/Termina_Black.ttf"},t),G&&er&&(0,n.jsx)(d.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":er?ei+.25*ei:4*ei,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:R},onClick:ev,onPointerDown:ef,onPointerMove:ey,onPointerUp:ej,onPointerOver:eS,onPointerOut:eP,children:t})}),er&&eD.map((e,r)=>{var o;let a=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:a?[h.MathUtils.degToRad(w),0,0]:[0,0,0],children:(0,n.jsx)(v.Z,{moonData:e,planetPosition:null===(o=H.current)||void 0===o?void 0:o.position},"".concat(t,"-moon-").concat(r))},"".concat(t,"-moon-group-").concat(r))})]}),Z&&(0,n.jsx)(x.Z,{origin:M,radius:$,orbitalInclination:D,color:R,name:t+"-orbit-path",opacity:er?ep:.5,hiRes:er})]})});var C=t(3920),S=()=>{let{sunSettings:e,simSpeed:r,setSimSpeed:t,prevSpeed:o,setPrevSpeed:d}=(0,c.ZP)(),{planetPositions:x,selectedPlanet:g,setSelectedPlanet:v,selectedMoon:f,setSelectedMoon:y,planetsData:j}=(0,c.d2)(),{satelliteCamera:S,triggerReset:P,setTriggerReset:D,isCameraTransitioning:w,toggleCameraTransitioning:T,isZoomingToSun:_,toggleZoomingToSun:R}=(0,c.g5)(),k=(0,a.useRef)(),[b,U]=(0,a.useState)(200),z=e=>4.2*e,E=()=>{if(!k.current)return;v(null),y(null),U(200),k.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let r={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};k.current.setPosition(r.x,r.y,r.z,!0)};(0,l.A)(()=>{if(g&&!f&&k.current){y(null);let e=x[g.name];if(e){let r=z(j[g.name].radius*m.YB);U(r/2),k.current.setTarget(e.x,e.y,e.z,!0),k.current.dollyTo(r,!0),R(!1)}"Sun"===g.name&&_&&(U(200),k.current.setTarget(0,0,0,!0),k.current.distance<800&&R(!1),k.current.dollyTo(200,!0))}}),console.log(_),(0,a.useEffect)(()=>{E&&(E(),D(!1))},[P]),(0,a.useEffect)(()=>{var e;!g||f||"Sun"===g.name||w||(y(null),T(!0),d(r),t(0)),g||f||(R(!1),t(o),T(!1)),(null==g?void 0:g.name)==="Sun"&&(R(!0),0===r&&(t(o),T(!1))),null===(e=k.current)||void 0===e||e.camera.updateProjectionMatrix()},[g,f]);let N=(0,s.m)({map:"../assets/earth/8k_earth_daymap.jpg",night:"../assets/earth/2k_earth_nightmap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),F=(0,s.m)({map:"../assets/sun/8k_sun.jpg"}),A=(0,s.m)({map:"../assets/venus/2k_venus_surface.jpg"}),B=(0,s.m)({map:"../assets/mercury/2k_mercury.jpg"}),G=(0,s.m)({map:"../assets/mars/1k_mars.jpg"}),I=(0,s.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),O=(0,s.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),Z=(0,s.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),Y=(0,s.m)({map:"../assets/neptune/2k_neptune.jpg"});return N.map.colorSpace=h.SRGBColorSpace,N.night.colorSpace=h.SRGBColorSpace,N.clouds.colorSpace=h.SRGBColorSpace,(0,n.jsxs)(n.Fragment,{children:[!S&&(0,n.jsx)(i.B,{ref:k,makeDefault:!S,maxDistance:9e4,smoothTime:.65,enableDamping:!0,near:.001,far:1e6,enablePanning:!1,minDistance:b,enablePanning:!1}),(0,n.jsx)(C.Z,{}),(0,n.jsx)(u,{pixelated:!0}),(0,n.jsx)(M,{name:"Earth",textures:N}),(0,n.jsx)(M,{name:"Mars",textures:G}),(0,n.jsx)(M,{name:"Venus",textures:A}),(0,n.jsx)(M,{name:"Mercury",textures:B}),(0,n.jsx)(M,{name:"Jupiter",textures:I}),(0,n.jsx)(M,{name:"Saturn",textures:O}),(0,n.jsx)(M,{name:"Uranus",textures:Z}),(0,n.jsx)(M,{name:"Neptune",textures:Y}),(0,n.jsx)(p.Z,{textures:F,position:e.position,resetCamera:E},"Sun-plain")]})},P=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(S,{})})}},function(e){e.O(0,[393,689,284,350,971,190,744],function(){return e(e.s=4466)}),_N_E=e.O()}]);