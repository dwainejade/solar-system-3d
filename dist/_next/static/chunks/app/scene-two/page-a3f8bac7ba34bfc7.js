(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,4185))},4185:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),o=r(4220),a=r(2265),s=r(7871),i=r(3719),l=r(8384),c=r(2079),u=r(8942),p=r(7776),h=r(9373),m=r(625),d=r(5375),f=r(878),x=r(2988);let y=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...n},o)=>{let s=a.useRef(null);return a.useImperativeHandle(o,()=>s.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,x.Z)({ref:s},n),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus");var M=r(2325);let g=c.ZP.Earth,P=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...g,...r},{name:i,mass:u,radius:m,orbitalOrigin:d,orbitalRadius:x,orbitalSpeed:P,orbitalPeriod:j,orbitalInclination:z,axialTilt:b,rotationPeriod:w,surfaceTemp:R,color:k,gravity:E,initialOrbitalAngle:S}=s,{map:I,normal:_,specular:v}=o,{simSpeed:C,updateRotationCount:Z,incrementDate:T,simulationDate:V}=(0,l.ZP)(),{planetAngles:D,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:G}=(0,l.d2)(),{setSurfacePoint:U,surfacePoint:L,setSurfaceNormal:q,surfaceNormal:H,setCameraSurfacePoint:W,isSurfaceCameraActive:X}=(0,l.g5)(),Y=t||(0,a.useRef)(),$=(0,a.useRef)(D[i]||0);(0,a.useRef)();let J=1e-4*x,K=.001*m;c.E_;let Q=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:el,camera:ec}=(0,h.z)(),eu=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*C;0===$.current?$.current=Math.PI/180*S:$.current-=2*Math.PI/(86400*j)*r;let n=J*Math.cos($.current),o=J*Math.sin($.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*J*Math.sin($.current);Y.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),w&&(Y.current.rotation.y+=2*Math.PI/(3600*w)*r,en({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(i,1),"Earth"===i&&T()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;Y.current&&eh(8e3>t.position.distanceTo(Y.current.position))});let em=e=>{if(e.stopPropagation(),eo||X)return;B(null),F(s),ei.setFromCamera(el,ec);let t=ei.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;U([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),W([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();q([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ef=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ex=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eM=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eg=X?128:Q?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eM,children:[(0,n.jsx)("sphereGeometry",{args:[K,eg,eg]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(M.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eM,children:i})}):(0,n.jsx)(M.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:k,opacity:Q?.2:.8},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eM})})]}),G&&(0,n.jsx)(f.Z,{origin:d,radius:J,orbitalInclination:z,color:k,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:f,setSelectedMoon:x}=(0,l.d2)(),{cameraTarget:y,setCameraTarget:M,surfaceNormal:g,cameraSurfacePoint:z,cameraSurfaceNormal:b}=(0,l.g5)(),{surfacePoint:w,isSurfaceCameraActive:R,triggerReset:k,setTriggerReset:E}=(0,l.g5)(),S=(0,a.useRef)(),[I,_]=(0,a.useState)(200),[v,C]=(0,a.useState)(0),[Z,T]=(0,a.useState)(null),V=()=>{if(!S.current)return;o(null),x(null),_(200),M(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};S.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&S.current){T("planet");let e=t[r.name];if(e){M(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;C(t),_(t),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}"Sun"===r.name&&(_(200),S.current.setTarget(0,0,0,!0),S.current.dollyTo(200,!0))}if(f&&S.current){T("moon"),M(new p.Vector3(f.position.x,f.position.y,f.position.z));let e=f.position;if(e){M(new p.Vector3(e.x,e.y,e.z));let t=f.bodyData.radius*u.sh*4;C(t),_(t/2),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}}f||r||T(null)},[r,f]),(0,a.useEffect)(()=>{!r&&S.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),E(!1))},[k]),(0,h.A)(()=>{if(S.current){if("planet"===Z){let e=t[r.name];e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0))}else if("moon"===Z){let e=f.position;if(e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);S.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!R&&(0,n.jsx)(i.B,{ref:S,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,I)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(P,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(m.Z,{bodyData:u.moonsData.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(d.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},b=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},625:function(e,t,r){"use strict";var n=r(7437),o=r(2265),a=r(7776),s=r(9373),i=r(7871),l=r(2325),c=r(8384),u=r(8942),p=r(878),h=r(6209),m=r(1577);let d=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:d,parentName:f,parentMeshRef:x}=e,{name:y,orbitalRadius:M,radius:g,color:P,orbitalPeriod:j,orbitalInclination:z,eccentricity:b}=r,w=t||(0,o.useRef)(),R=(0,o.useRef)(2*Math.random()*Math.PI),k=(0,o.useRef)(),E=(0,o.useRef)(new a.Vector3),S="Moon"===y?(0,i.m)("../assets/earth/moon/moon.jpg"):null,I=(0,o.useMemo)(()=>({radius:g*u.sh,orbitalRadius:M*u.H_,meanMotion:2*Math.PI/(86400*j),inclination:Math.PI/180*z}),[g,M,j,z]),{isSurfaceCameraActive:_,satelliteCamera:v,activeCamera:C,setAutoRotate:Z,autoRotate:T,switchToMoonCamera:V}=(0,c.g5)(),{simSpeed:D,toggleDetailsMenu:O}=(0,c.ZP)(),{selectedMoon:N,setSelectedMoon:F,displayLabels:A,orbitPaths:B,updateMoonPosition:G,updateMoonWorldPosition:U}=(0,c.d2)(),L=N?.name===y,q=y===C?.name;(0,o.useEffect)(()=>{S&&(S.colorSpace=a.SRGBColorSpace,S.needsUpdate=!0)},[]);let H=(0,o.useCallback)(e=>{e.stopPropagation(),L||(O(!0),F(r),V(f,y))},[L,r,f,y]);(0,o.useCallback)(e=>{e.stopPropagation(),Z(!T)},[T,Z]);let W=(0,o.useMemo)(()=>new a.Vector3,[]),X=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,s.A)((e,t)=>{if(!w.current)return;R.current-=I.meanMotion*(t*D);let r=R.current;for(let e=0;e<10;e++){let e=(r-b*Math.sin(r)-R.current)/(1-b*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+b)/(1-b))*Math.tan(r/2)),o=I.orbitalRadius*(1-b*b)/(1+b*Math.cos(n)),a=o*Math.sin(-n),s=Math.sin(I.inclination)*a,i=Math.cos(I.inclination)*a;if(X.set(o*Math.cos(-n),s,i),w.current.position.copy(X),L||q){w.current.getWorldPosition(E.current);let e=E.current;G(y,{x:e.x,y:e.y,z:e.z}),U(y,{x:e.x,y:e.y,z:e.z})}"Moon"===y&&d&&(W.set(...d),w.current.lookAt(W))}),(0,n.jsxs)(n.Fragment,{children:[q&&w.current&&(0,n.jsx)(h.Z,{target:w.current,targetName:y,size:I.radius}),(0,n.jsxs)("group",{ref:w,children:[(0,n.jsxs)("mesh",{ref:k,onClick:H,rotation:"Moon"===y?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("sphereGeometry",{args:[I.radius,L?32:14,L?20:12]}),(0,n.jsx)("meshStandardMaterial",{metalness:.2,roughness:.8,map:S||null,color:S?null:P})]},y),L&&A&&(0,n.jsx)(l.V,{position:[0,1.2*I.radius,0],center:!0,zIndexRange:[100,0],style:L?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:H,style:{color:P,fontSize:"12px",cursor:"pointer"},children:y})}),A&&!L&&(0,n.jsx)(m.Z,{text:y,size:12,position:[0,1.2*I.radius,0],color:P,handleClick:H,font:"../assets/fonts/Termina_Black.ttf"})]}),B&&(0,n.jsx)(p.Z,{origin:[0,0,0],radius:I.orbitalRadius,eccentricity:b,orbitalInclination:z,color:P,name:`${y}-orbit-path`,hiRes:L,lineWidth:L?2:1,position:w.current?.position,arcLength:.75,orbitalPeriod:j})]})});t.Z=o.memo(d)}},function(e){e.O(0,[260,689,723,562,122,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);