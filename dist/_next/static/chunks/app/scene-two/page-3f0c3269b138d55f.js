(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{7322:function(e,t,r){Promise.resolve().then(r.bind(r,519))},519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n=r(7437),o=r(9362),a=r(2265),s=r(7871),i=r(3719),u=r(8384),c=r(2079),l=r(8942),p=r(7776),h=r(9373),f=r(625),m=r(5375),d=r(878),x=r(4823),y=r(2325);r(940);let P=c.ZP.Earth,g=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...P,...r},{name:i,mass:l,radius:f,orbitalOrigin:m,orbitalRadius:g,orbitalSpeed:j,orbitalPeriod:z,orbitalInclination:M,axialTilt:w,rotationPeriod:E,surfaceTemp:_,color:b,gravity:k,initialOrbitalAngle:v}=s,{map:S,normal:T,specular:C}=o,{simSpeed:I,updateRotationCount:R,incrementDate:Z,simulationDate:V}=(0,u.ZP)(),{planetAngles:D,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:K}=(0,u.d2)(),{setSurfacePoint:U,surfacePoint:G,setSurfaceNormal:L,surfaceNormal:X,setCameraSurfacePoint:Y,isSurfaceCameraActive:q}=(0,u.g5)(),H=t||(0,a.useRef)(),J=(0,a.useRef)(D[i]||0);(0,a.useRef)();let Q=1e-4*g,W=.001*f;c.E_;let $=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:eu,camera:ec}=(0,h.z)(),el=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*I;0===J.current?J.current=Math.PI/180*v:J.current-=2*Math.PI/(86400*z)*r;let n=Q*Math.cos(J.current),o=Q*Math.sin(J.current);if(H.current){let e=Math.sin(Math.PI/180*M)*Q*Math.sin(J.current);H.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),E&&(H.current.rotation.y+=2*Math.PI/(3600*E)*r,en({x:H.current.rotation.x,y:H.current.rotation.y,z:H.current.rotation.z}),H.current.rotation.y>=2*Math.PI&&(H.current.rotation.y%=2*Math.PI,R(i,1),"Earth"===i&&Z()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;H.current&&eh(8e3>t.position.distanceTo(H.current.position))});let ef=e=>{if(e.stopPropagation(),eo||q)return;B(null),F(s),ei.setFromCamera(eu,ec);let t=ei.intersectObject(el.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;U([(e=H.current.worldToLocal(e.clone())).x,e.y,e.z]),Y([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();L([n.x,n.y,n.z])}},em=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ed=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ex=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eP=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eg=q?128:$?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:H,children:[(0,n.jsxs)("mesh",{ref:el,onClick:ef,onPointerDown:em,onPointerMove:ed,onPointerUp:ex,onPointerOver:ey,onPointerOut:eP,children:[(0,n.jsx)("sphereGeometry",{args:[W,eg,eg]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(x.KC,{args:[2*W,.15*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(x.KC,{args:[1.5*W,.3*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(y.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":W+.25*W,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:b},onClick:ef,onPointerDown:em,onPointerMove:ed,onPointerUp:ex,onPointerOver:ey,onPointerOut:eP,children:i})}):(0,n.jsx)(y.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:b,opacity:$?.2:.8},onClick:ef,onPointerDown:em,onPointerMove:ed,onPointerUp:ex,onPointerOver:ey,onPointerOut:eP})})]}),K&&(0,n.jsx)(d.Z,{origin:m,radius:Q,orbitalInclination:M,color:b,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,u.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:d,setSelectedMoon:x}=(0,u.d2)(),{cameraTarget:y,setCameraTarget:P,surfaceNormal:z,cameraSurfacePoint:M,cameraSurfaceNormal:w}=(0,u.g5)(),{surfacePoint:E,isSurfaceCameraActive:_,triggerReset:b,setTriggerReset:k}=(0,u.g5)(),v=(0,a.useRef)(),[S,T]=(0,a.useState)(200),[C,I]=(0,a.useState)(0),[R,Z]=(0,a.useState)(null),V=()=>{if(!v.current)return;o(null),x(null),T(200),P(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};v.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&v.current){Z("planet");let e=t[r.name];if(e){P(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;I(t),T(t),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}"Sun"===r.name&&(T(200),v.current.setTarget(0,0,0,!0),v.current.dollyTo(200,!0))}if(d&&v.current){Z("moon"),P(new p.Vector3(d.position.x,d.position.y,d.position.z));let e=d.position;if(e){P(new p.Vector3(e.x,e.y,e.z));let t=d.bodyData.radius*l.sh*4;I(t),T(t/2),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}}d||r||Z(null)},[r,d]),(0,a.useEffect)(()=>{!r&&v.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),k(!1))},[b]),(0,h.A)(()=>{if(v.current){if("planet"===R){let e=t[r.name];e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(C,!0))}else if("moon"===R){let e=d.position;if(e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(C,!0)),!R)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);v.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/2k_moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!_&&(0,n.jsx)(i.B,{ref:v,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,S)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(g,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(f.Z,{bodyData:l._d.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(m.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},M=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},4823:function(e,t,r){"use strict";r.d(t,{KC:function(){return a}});var n=r(2988),o=r(2265);let a=function(e,t){let r=e+"Geometry";return o.forwardRef(({args:e,children:t,...a},s)=>{let i=o.useRef(null);return o.useImperativeHandle(s,()=>i.current),o.useLayoutEffect(()=>void 0),o.createElement("mesh",(0,n.Z)({ref:i},a),o.createElement(r,{attach:"geometry",args:e}),t)})}("torus")},940:function(e,t,r){"use strict";r(7437),r(2265),r(8384)}},function(e){e.O(0,[393,689,918,673,350,971,190,744],function(){return e(e.s=7322)}),_N_E=e.O()}]);