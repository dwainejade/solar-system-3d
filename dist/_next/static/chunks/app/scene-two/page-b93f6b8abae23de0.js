(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,519))},519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n=r(7437),o=r(9362),a=r(2265),s=r(7871),i=r(3719),c=r(8384),l=r(2079),u=r(8942),p=r(7776),h=r(15),x=r(625),d=r(5375),m=r(878),y=r(4823),f=r(2325);r(940);let P=l.ZP.Earth,g=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...P,...r},{name:i,mass:u,radius:x,orbitalOrigin:d,orbitalRadius:g,orbitalSpeed:j,orbitalPeriod:z,orbitalInclination:M,axialTilt:w,rotationPeriod:_,surfaceTemp:E,color:b,gravity:k,initialOrbitalAngle:S}=s,{map:T,normal:C,specular:v}=o,{simSpeed:I,updateRotationCount:V,incrementDate:Z,simulationDate:D,orbitPaths:O}=(0,c.ZP)(),{planetAngles:R,updatePlanetPosition:N,selectedPlanet:F,setSelectedPlanet:A,displayLabels:B,setSelectedMoon:U}=(0,c.d2)(),{setSurfacePoint:K,surfacePoint:X,setSurfaceNormal:Y,surfaceNormal:q,setCameraSurfacePoint:G,isSurfaceCameraActive:L}=(0,c.g5)(),H=t||(0,a.useRef)(),J=(0,a.useRef)(R[i]||0);(0,a.useRef)();let Q=1e-4*g,W=.001*x;l.E_;let $=F&&F.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:ec,camera:el}=(0,h.z)(),eu=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*I;0===J.current?J.current=Math.PI/180*S:J.current-=2*Math.PI/(86400*z)*r;let n=Q*Math.cos(J.current),o=Q*Math.sin(J.current);if(H.current){let e=Math.sin(Math.PI/180*M)*Q*Math.sin(J.current);H.current.position.set(n,e,o),N(i,{x:n,y:e,z:o}),_&&(H.current.rotation.y+=2*Math.PI/(3600*_)*r,en({x:H.current.rotation.x,y:H.current.rotation.y,z:H.current.rotation.z}),H.current.rotation.y>=2*Math.PI&&(H.current.rotation.y%=2*Math.PI,V(i,1),"Earth"===i&&Z()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;H.current&&eh(8e3>t.position.distanceTo(H.current.position))});let ex=e=>{if(e.stopPropagation(),eo||L)return;U(null),A(s),ei.setFromCamera(ec,el);let t=ei.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;K([(e=H.current.worldToLocal(e.clone())).x,e.y,e.z]),G([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();Y([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},em=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ey=e=>{ea(!1)},ef=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eP=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eg=L?128:$?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:H,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:ex,onPointerDown:ed,onPointerMove:em,onPointerUp:ey,onPointerOver:ef,onPointerOut:eP,children:[(0,n.jsx)("sphereGeometry",{args:[W,eg,eg]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y.KC,{args:[2*W,.15*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y.KC,{args:[1.5*W,.3*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),B?(0,n.jsx)(f.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":W+.25*W,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:b},onClick:ex,onPointerDown:ed,onPointerMove:em,onPointerUp:ey,onPointerOver:ef,onPointerOut:eP,children:i})}):(0,n.jsx)(f.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:b,opacity:$?.2:.8},onClick:ex,onPointerDown:ed,onPointerMove:em,onPointerUp:ey,onPointerOver:ef,onPointerOut:eP})})]}),O&&(0,n.jsx)(m.Z,{origin:d,radius:Q,orbitalInclination:M,color:b,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,c.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:m,setSelectedMoon:y}=(0,c.d2)(),{cameraTarget:f,setCameraTarget:P,surfaceNormal:z,cameraSurfacePoint:M,cameraSurfaceNormal:w}=(0,c.g5)(),{surfacePoint:_,isSurfaceCameraActive:E,triggerReset:b,setTriggerReset:k}=(0,c.g5)(),S=(0,a.useRef)(),[T,C]=(0,a.useState)(200),[v,I]=(0,a.useState)(0),[V,Z]=(0,a.useState)(null),D=()=>{if(!S.current)return;o(null),y(null),C(200),P(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};S.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&S.current){Z("planet");let e=t[r.name];if(e){P(new p.Vector3(e.x,e.y,e.z));let t=.001*l.ZP[r.name].radius*4;I(t),C(t),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}"Sun"===r.name&&(C(200),S.current.setTarget(0,0,0,!0),S.current.dollyTo(200,!0))}if(m&&S.current){Z("moon"),P(new p.Vector3(m.position.x,m.position.y,m.position.z));let e=m.position;if(e){P(new p.Vector3(e.x,e.y,e.z));let t=m.bodyData.radius*u.sh*4;I(t),C(t/2),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}}m||r||Z(null)},[r,m]),(0,a.useEffect)(()=>{!r&&S.current&&D()},[r,e.position]),(0,a.useEffect)(()=>{D&&(D(),k(!1))},[b]),(0,h.A)(()=>{if(S.current){if("planet"===V){let e=t[r.name];e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0))}else if("moon"===V){let e=m.position;if(e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0)),!V)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);S.current.setTarget(t.x,t.y,t.z,!0)}}});let O=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),R=(0,s.m)({map:"../assets/earth/moon/2k_moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!E&&(0,n.jsx)(i.B,{ref:S,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,T)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(g,{bodyData:l.ZP.Earth,textures:O}),(0,n.jsx)(x.Z,{bodyData:u._d.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:R},"Earth-moon"),(0,n.jsx)(d.Z,{position:e.position,resetCamera:D},"Sun-plain")]})},M=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},940:function(e,t,r){"use strict";r(7437),r(2265),r(8384)}},function(e){e.O(0,[393,689,723,828,350,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);