(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,4185))},4185:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),o=r(4220),a=r(2265),s=r(7871),i=r(3719),l=r(8384),c=r(2079),u=r(8942),p=r(7776),h=r(9373),m=r(625),d=r(5375),f=r(878),x=r(2988);let y=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...n},o)=>{let s=a.useRef(null);return a.useImperativeHandle(o,()=>s.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,x.Z)({ref:s},n),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus");var g=r(2325);let M=c.ZP.Earth,P=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...M,...r},{name:i,mass:u,radius:m,orbitalOrigin:d,orbitalRadius:x,orbitalSpeed:P,orbitalPeriod:j,orbitalInclination:z,axialTilt:b,rotationPeriod:w,surfaceTemp:k,color:R,gravity:v,initialOrbitalAngle:C}=s,{map:E,normal:S,specular:_}=o,{simSpeed:I,updateRotationCount:Z,incrementDate:T,simulationDate:V}=(0,l.ZP)(),{planetAngles:D,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:G}=(0,l.d2)(),{setSurfacePoint:L,surfacePoint:U,setSurfaceNormal:q,surfaceNormal:H,setCameraSurfacePoint:W,isSurfaceCameraActive:X}=(0,l.g5)(),Y=t||(0,a.useRef)(),$=(0,a.useRef)(D[i]||0);(0,a.useRef)();let J=1e-4*x,K=.001*m;c.E_;let Q=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:el,camera:ec}=(0,h.z)(),eu=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*I;0===$.current?$.current=Math.PI/180*C:$.current-=2*Math.PI/(86400*j)*r;let n=J*Math.cos($.current),o=J*Math.sin($.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*J*Math.sin($.current);Y.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),w&&(Y.current.rotation.y+=2*Math.PI/(3600*w)*r,en({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(i,1),"Earth"===i&&T()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;Y.current&&eh(8e3>t.position.distanceTo(Y.current.position))});let em=e=>{if(e.stopPropagation(),eo||X)return;B(null),F(s),ei.setFromCamera(el,ec);let t=ei.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;L([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),W([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();q([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ef=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ex=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eg=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eM=X?128:Q?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg,children:[(0,n.jsx)("sphereGeometry",{args:[K,eM,eM]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(g.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:R},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg,children:i})}):(0,n.jsx)(g.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:R,opacity:Q?.2:.8},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg})})]}),G&&(0,n.jsx)(f.Z,{origin:d,radius:J,orbitalInclination:z,color:R,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:f,setSelectedMoon:x}=(0,l.d2)(),{cameraTarget:y,setCameraTarget:g,surfaceNormal:M,cameraSurfacePoint:z,cameraSurfaceNormal:b}=(0,l.g5)(),{surfacePoint:w,isSurfaceCameraActive:k,triggerReset:R,setTriggerReset:v}=(0,l.g5)(),C=(0,a.useRef)(),[E,S]=(0,a.useState)(200),[_,I]=(0,a.useState)(0),[Z,T]=(0,a.useState)(null),V=()=>{if(!C.current)return;o(null),x(null),S(200),g(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};C.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&C.current){T("planet");let e=t[r.name];if(e){g(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;I(t),S(t),C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(t,!0)}"Sun"===r.name&&(S(200),C.current.setTarget(0,0,0,!0),C.current.dollyTo(200,!0))}if(f&&C.current){T("moon"),g(new p.Vector3(f.position.x,f.position.y,f.position.z));let e=f.position;if(e){g(new p.Vector3(e.x,e.y,e.z));let t=f.bodyData.radius*u.sh*4;I(t),S(t/2),C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(t,!0)}}f||r||T(null)},[r,f]),(0,a.useEffect)(()=>{!r&&C.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),v(!1))},[R]),(0,h.A)(()=>{if(C.current){if("planet"===Z){let e=t[r.name];e&&(C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(_,!0))}else if("moon"===Z){let e=f.position;if(e&&(C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(_,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);C.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!k&&(0,n.jsx)(i.B,{ref:C,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,E)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(P,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(m.Z,{bodyData:u.moonsData.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(d.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},b=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},625:function(e,t,r){"use strict";var n=r(7437),o=r(2265),a=r(7776),s=r(9373),i=r(7871),l=r(2325),c=r(8384),u=r(8942),p=r(878),h=r(6209),m=r(1577);let d=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:d,parentName:f,parentMeshRef:x}=e,{name:y,orbitalRadius:g,radius:M,color:P,orbitalPeriod:j,orbitalInclination:z,eccentricity:b}=r,w=t||(0,o.useRef)(),k=(0,o.useRef)(2*Math.random()*Math.PI),R=(0,o.useRef)(),v=(0,o.useRef)(new a.Vector3),C="Moon"===y?(0,i.m)("../assets/earth/moon/moon.jpg"):null,E=(0,o.useMemo)(()=>({radius:M*u.sh,orbitalRadius:g*u.H_,meanMotion:2*Math.PI/(86400*j),inclination:Math.PI/180*z}),[M,g,j,z]),{isSurfaceCameraActive:S,satelliteCamera:_,activeCamera:I,setAutoRotate:Z,autoRotate:T,switchToMoonCamera:V}=(0,c.g5)(),{simSpeed:D,toggleDetailsMenu:O}=(0,c.ZP)(),{selectedMoon:N,setSelectedMoon:F,displayLabels:A,orbitPaths:B,updateMoonPosition:G,updateMoonWorldPosition:L}=(0,c.d2)(),U=N?.name===y,q=y===I?.name,H=(0,o.useMemo)(()=>new a.SphereGeometry(E.radius,U?32:14,U?16:12),[E.radius,U]),W=(0,o.useMemo)(()=>new a.MeshStandardMaterial({metalness:.2,roughness:.8,map:C||null,color:C?null:P,onBeforeCompile:e=>{e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",`
        #include <map_fragment>
        diffuseColor.rgb *= 1.0;
        diffuseColor.rgb = pow(diffuseColor.rgb, vec3(3));
        `)}}),[C,P]),X=(0,o.useCallback)(e=>{e.stopPropagation(),U||(O(!0),F(r),V(f,y))},[U,r,f,y]);(0,o.useCallback)(e=>{e.stopPropagation(),Z(!T)},[T,Z]);let Y=(0,o.useMemo)(()=>new a.Vector3,[]),$=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,s.A)((e,t)=>{if(!w.current)return;k.current-=E.meanMotion*(t*D);let r=k.current;for(let e=0;e<10;e++){let e=(r-b*Math.sin(r)-k.current)/(1-b*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+b)/(1-b))*Math.tan(r/2)),o=E.orbitalRadius*(1-b*b)/(1+b*Math.cos(n)),a=o*Math.sin(-n),s=Math.sin(E.inclination)*a,i=Math.cos(E.inclination)*a;if($.set(o*Math.cos(-n),s,i),w.current.position.copy($),U||q){w.current.getWorldPosition(v.current);let e=v.current;G(y,{x:e.x,y:e.y,z:e.z}),L(y,{x:e.x,y:e.y,z:e.z})}"Moon"===y&&d&&(Y.set(...d),w.current.lookAt(Y))}),(0,n.jsxs)(n.Fragment,{children:[q&&w.current&&(0,n.jsx)(h.Z,{target:w.current,targetName:y,size:E.radius}),(0,n.jsxs)("group",{ref:w,children:[(0,n.jsxs)("mesh",{ref:R,onClick:X,rotation:"Moon"===y?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("primitive",{object:H}),(0,n.jsx)("primitive",{object:W})]},y),U?(0,n.jsx)(l.V,{position:[0,1.2*E.radius,0],center:!0,zIndexRange:[100,0],style:U?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:X,style:{color:P,fontSize:"12px",cursor:"pointer"},children:y})}):(0,n.jsx)(m.Z,{text:y,size:12,position:[0,1.2*E.radius,0],color:P,handleClick:X,font:"../assets/fonts/Termina_Black.ttf"})]}),B&&(0,n.jsx)(p.Z,{origin:[0,0,0],radius:E.orbitalRadius,eccentricity:b,orbitalInclination:z,color:P,name:`${y}-orbit-path`,hiRes:U,lineWidth:U?2:1,position:w.current?.position,arcLength:.9,orbitalPeriod:j})]})});t.Z=o.memo(d)}},function(e){e.O(0,[260,689,723,802,122,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);