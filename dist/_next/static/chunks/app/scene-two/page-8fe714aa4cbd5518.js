(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,4185))},4185:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),o=r(9369),a=r(2265),s=r(7871),i=r(3719),l=r(8384),c=r(2079),u=r(8942),p=r(7776),h=r(9373),m=r(625),d=r(5375),x=r(878),f=r(2988);let y=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...n},o)=>{let s=a.useRef(null);return a.useImperativeHandle(o,()=>s.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,f.Z)({ref:s},n),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus");var M=r(2325);let g=c.ZP.Earth,P=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...g,...r},{name:i,mass:u,radius:m,orbitalOrigin:d,orbitalRadius:f,orbitalSpeed:P,orbitalPeriod:j,orbitalInclination:z,axialTilt:b,rotationPeriod:w,surfaceTemp:k,color:R,gravity:E,initialOrbitalAngle:v}=s,{map:I,normal:S,specular:_}=o,{simSpeed:T,updateRotationCount:Z,incrementDate:C,simulationDate:V}=(0,l.ZP)(),{planetAngles:D,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:G}=(0,l.d2)(),{setSurfacePoint:U,surfacePoint:q,setSurfaceNormal:H,surfaceNormal:L,setCameraSurfacePoint:W,isSurfaceCameraActive:X}=(0,l.g5)(),Y=t||(0,a.useRef)(),$=(0,a.useRef)(D[i]||0);(0,a.useRef)();let J=1e-4*f,K=.001*m;c.E_;let Q=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:el,camera:ec}=(0,h.z)(),eu=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*T;0===$.current?$.current=Math.PI/180*v:$.current-=2*Math.PI/(86400*j)*r;let n=J*Math.cos($.current),o=J*Math.sin($.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*J*Math.sin($.current);Y.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),w&&(Y.current.rotation.y+=2*Math.PI/(3600*w)*r,en({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(i,1),"Earth"===i&&C()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;Y.current&&eh(8e3>t.position.distanceTo(Y.current.position))});let em=e=>{if(e.stopPropagation(),eo||X)return;B(null),F(s),ei.setFromCamera(el,ec);let t=ei.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;U([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),W([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();H([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ex=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ef=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eM=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eg=X?128:Q?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:em,onPointerDown:ed,onPointerMove:ex,onPointerUp:ef,onPointerOver:ey,onPointerOut:eM,children:[(0,n.jsx)("sphereGeometry",{args:[K,eg,eg]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(M.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:R},onClick:em,onPointerDown:ed,onPointerMove:ex,onPointerUp:ef,onPointerOver:ey,onPointerOut:eM,children:i})}):(0,n.jsx)(M.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:R,opacity:Q?.2:.8},onClick:em,onPointerDown:ed,onPointerMove:ex,onPointerUp:ef,onPointerOver:ey,onPointerOut:eM})})]}),G&&(0,n.jsx)(x.Z,{origin:d,radius:J,orbitalInclination:z,color:R,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:x,setSelectedMoon:f}=(0,l.d2)(),{cameraTarget:y,setCameraTarget:M,surfaceNormal:g,cameraSurfacePoint:z,cameraSurfaceNormal:b}=(0,l.g5)(),{surfacePoint:w,isSurfaceCameraActive:k,triggerReset:R,setTriggerReset:E}=(0,l.g5)(),v=(0,a.useRef)(),[I,S]=(0,a.useState)(200),[_,T]=(0,a.useState)(0),[Z,C]=(0,a.useState)(null),V=()=>{if(!v.current)return;o(null),f(null),S(200),M(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};v.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&v.current){C("planet");let e=t[r.name];if(e){M(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;T(t),S(t),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}"Sun"===r.name&&(S(200),v.current.setTarget(0,0,0,!0),v.current.dollyTo(200,!0))}if(x&&v.current){C("moon"),M(new p.Vector3(x.position.x,x.position.y,x.position.z));let e=x.position;if(e){M(new p.Vector3(e.x,e.y,e.z));let t=x.bodyData.radius*u.sh*4;T(t),S(t/2),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}}x||r||C(null)},[r,x]),(0,a.useEffect)(()=>{!r&&v.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),E(!1))},[R]),(0,h.A)(()=>{if(v.current){if("planet"===Z){let e=t[r.name];e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(_,!0))}else if("moon"===Z){let e=x.position;if(e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(_,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);v.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/2k_moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!k&&(0,n.jsx)(i.B,{ref:v,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,I)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(P,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(m.Z,{bodyData:u.moonsData.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(d.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},b=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},625:function(e,t,r){"use strict";var n=r(7437),o=r(2265),a=r(7776),s=r(9373),i=r(7871),l=r(2325),c=r(8384),u=r(8942),p=r(878),h=r(6209);let m=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:m,parentName:d}=e,{name:x,orbitalRadius:f,radius:y,color:M,orbitalPeriod:g,orbitalInclination:P,eccentricity:j}=r,z="Moon"===x?(0,i.m)("../assets/earth/moon/moon.jpg"):null,b=t||(0,o.useRef)(),w=(0,o.useRef)(2*Math.random()*Math.PI),k=(0,o.useRef)(),R=(0,o.useMemo)(()=>({radius:y*u.sh,orbitalRadius:f*u.H_,meanMotion:2*Math.PI/(86400*g)}),[y,f,g]),{isSurfaceCameraActive:E,satelliteCamera:v,toggleSatelliteCamera:I,setAutoRotate:S,autoRotate:_,activeCamera:T,switchToPlanetCamera:Z,toggleCameraTransitioning:C,switchToMoonCamera:V}=(0,c.g5)(),{simSpeed:D,toggleDetailsMenu:O}=(0,c.ZP)(),{selectedMoon:N,setSelectedMoon:F,displayLabels:A,orbitPaths:B,updateMoonPosition:G,updateMoonWorldPosition:U}=(0,c.d2)(),q=N?.name===x,H=(0,o.useMemo)(()=>new a.SphereGeometry(R.radius,q?32:14,q?16:12),[R.radius,q]),L=(0,o.useMemo)(()=>new a.MeshStandardMaterial({metalness:.5,roughness:.8,map:z||null,color:z?null:M}),[z,M]),W=(0,o.useCallback)(e=>{e.stopPropagation(),q||(O(!0),F(r),V(d,x))},[q,r,d,x]);return(0,s.A)((e,t)=>{if(!b.current)return;w.current-=R.meanMotion*(t*D);let r=w.current;for(let e=0;e<10;e++){let e=(r-j*Math.sin(r)-w.current)/(1-j*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+j)/(1-j))*Math.tan(r/2)),o=R.orbitalRadius*(1-j*j)/(1+j*Math.cos(n)),s=o*Math.sin(-n),i=Math.PI/180*P,l=Math.sin(i)*s,c=Math.cos(i)*s;if(b.current.position.set(o*Math.cos(-n),l,c),q||x===T?.name){let e=b.current.getWorldPosition(new a.Vector3);G(x,{x:e.x,y:e.y,z:e.z}),U(x,{x:e.x,y:e.y,z:e.z})}"Moon"===x&&m&&b.current.lookAt(new a.Vector3(...m))}),(0,n.jsxs)(n.Fragment,{children:[T?.name===x&&b.current&&(0,n.jsx)(h.Z,{target:b.current,targetName:x,size:R.radius}),(0,n.jsxs)("group",{ref:b,children:[(0,n.jsxs)("mesh",{ref:k,onClick:W,onDoubleClick:e=>{e.stopPropagation(),S(!_)},rotation:"Moon"===x?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("primitive",{object:H}),(0,n.jsx)("primitive",{object:L})]},x),(A||q)&&(0,n.jsx)(l.V,{position:[0,1.2*R.radius,0],center:!0,zIndexRange:[100,0],occlude:D<2e4,style:q?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:W,style:{color:M,fontSize:q?"14px":"12px",cursor:"pointer"},children:x})})]}),B&&(0,n.jsx)(p.Z,{origin:[0,0,0],radius:R.orbitalRadius,eccentricity:j,orbitalInclination:P,color:M,name:`${x}-orbit-path`,hiRes:q,lineType:"solid",lineWidth:q?1:.4,position:b.current?.position})]})});t.Z=o.memo(m)}},function(e){e.O(0,[260,689,251,927,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);