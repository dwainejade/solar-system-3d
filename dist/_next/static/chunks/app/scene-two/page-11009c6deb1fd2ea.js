(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{2092:function(e,t,r){Promise.resolve().then(r.bind(r,2604))},2604:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(3827),o=r(5058),a=r(4090),s=r(7475),i=r(7808),l=r(7912),c=r(424),u=r(440),p=r(6376),h=r(1653),x=r(5556),m=r(8675),d=r(2509),y=r(2311),f=r(6959),P=r(5468);let g=c.ZP.Earth,j=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...g,...r},{name:i,mass:u,radius:x,orbitalOrigin:m,orbitalRadius:j,orbitalSpeed:z,orbitalPeriod:M,orbitalInclination:w,axialTilt:_,rotationPeriod:E,surfaceTemp:b,color:k,gravity:S,initialOrbitalAngle:T}=s,{map:C,normal:v,specular:I}=o,{simSpeed:Z,updateRotationCount:R,incrementDate:V,simulationDate:D,orbitPaths:O}=(0,l.ZP)(),{planetAngles:N,updatePlanetPosition:F,selectedPlanet:A,setSelectedPlanet:B,displayLabels:U,setSelectedMoon:K}=(0,l.d2)(),{setSurfacePoint:X,surfacePoint:Y,setSurfaceNormal:q,surfaceNormal:G,setCameraSurfacePoint:L,isSurfaceCameraActive:H}=(0,l.g5)(),J=t||(0,a.useRef)(),Q=(0,a.useRef)(N[i]||0);(0,a.useRef)();let W=1e-4*j,$=.001*x;c.E_;let ee=A&&A.name===i,[et,er]=(0,a.useState)(null),[en,eo]=(0,a.useState)({x:0,y:0,z:0}),[ea,es]=(0,a.useState)(!1),ei=(0,a.useRef)({x:0,y:0}),{raycaster:el,mouse:ec,camera:eu}=(0,h.z)(),ep=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*Z;0===Q.current?Q.current=Math.PI/180*T:Q.current-=2*Math.PI/(86400*M)*r;let n=W*Math.cos(Q.current),o=W*Math.sin(Q.current);if(J.current){let e=Math.sin(Math.PI/180*w)*W*Math.sin(Q.current);J.current.position.set(n,e,o),F(i,{x:n,y:e,z:o}),E&&(J.current.rotation.y+=2*Math.PI/(3600*E)*r,eo({x:J.current.rotation.x,y:J.current.rotation.y,z:J.current.rotation.z}),J.current.rotation.y>=2*Math.PI&&(J.current.rotation.y%=2*Math.PI,R(i,1),"Earth"===i&&V()))}});let[eh,ex]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;J.current&&ex(8e3>t.position.distanceTo(J.current.position))});let em=e=>{if(e.stopPropagation(),ea||H)return;K(null),B(s),el.setFromCamera(ec,eu);let t=el.intersectObject(ep.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;X([(e=J.current.worldToLocal(e.clone())).x,e.y,e.z]),L([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();q([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),es(!1),ei.current={x:e.clientX,y:e.clientY}},ey=e=>{Math.sqrt(Math.pow(e.clientX-ei.current.x,2)+Math.pow(e.clientY-ei.current.y,2))>5&&es(!0)},ef=e=>{es(!1)},eP=e=>{e.stopPropagation(),document.body.style.cursor="pointer",er(i)},eg=e=>{e.stopPropagation(),document.body.style.cursor="auto",er(null)},ej=H?128:ee?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:J,children:[(0,n.jsxs)("mesh",{ref:ep,onClick:em,onPointerDown:ed,onPointerMove:ey,onPointerUp:ef,onPointerOver:eP,onPointerOut:eg,children:[(0,n.jsx)("sphereGeometry",{args:[$,ej,ej]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y.KC,{args:[2*$,.15*$,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y.KC,{args:[1.5*$,.3*$,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),U?(0,n.jsx)(f.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":$+.25*$,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:em,onPointerDown:ed,onPointerMove:ey,onPointerUp:ef,onPointerOver:eP,onPointerOut:eg,children:i})}):(0,n.jsx)(f.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:k,opacity:ee?.2:.8},onClick:em,onPointerDown:ed,onPointerMove:ey,onPointerUp:ef,onPointerOver:eP,onPointerOut:eg})}),Y&&G&&ee&&(0,n.jsx)(P.Z,{position:Y,normal:G,planetRef:J,color:k})]}),O&&(0,n.jsx)(d.Z,{origin:m,radius:W,orbitalInclination:w,color:k,name:i})]})});var z=r(3833),M=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:d,setSelectedMoon:y}=(0,l.d2)(),{cameraTarget:f,setCameraTarget:P,surfaceNormal:g,cameraSurfacePoint:M,cameraSurfaceNormal:w}=(0,l.g5)(),{surfacePoint:_,isSurfaceCameraActive:E,triggerReset:b,setTriggerReset:k}=(0,l.g5)(),S=(0,a.useRef)(),[T,C]=(0,a.useState)(200),[v,I]=(0,a.useState)(0),[Z,R]=(0,a.useState)(null),V=()=>{if(!S.current)return;o(null),y(null),C(200),P(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};S.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&S.current){R("planet");let e=t[r.name];if(e){P(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;I(t),C(t),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}"Sun"===r.name&&(C(200),S.current.setTarget(0,0,0,!0),S.current.dollyTo(200,!0))}if(d&&S.current){R("moon"),P(new p.Vector3(d.position.x,d.position.y,d.position.z));let e=d.position;if(e){P(new p.Vector3(e.x,e.y,e.z));let t=d.bodyData.radius*u.sh*4;I(t),C(t/2),S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(t,!0)}}d||r||R(null)},[r,d]),(0,a.useEffect)(()=>{!r&&S.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),k(!1))},[b]),(0,h.A)(()=>{if(S.current){if("planet"===Z){let e=t[r.name];e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0))}else if("moon"===Z){let e=d.position;if(e&&(S.current.setTarget(e.x,e.y,e.z,!0),S.current.dollyTo(v,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);S.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/2k_moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!E&&(0,n.jsx)(i.B,{ref:S,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,T)}),(0,n.jsx)(z.Z,{}),(0,n.jsx)(j,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(x.Z,{bodyData:u._d.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(m.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},w=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(M,{})})}},function(e){e.O(0,[689,723,800,577,644,971,468,744],function(){return e(e.s=2092)}),_N_E=e.O()}]);