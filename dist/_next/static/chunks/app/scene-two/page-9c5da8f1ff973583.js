(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,4185))},4185:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(7437),o=r(2344),a=r(2265),s=r(7871),i=r(3719),l=r(8384),u=r(2079),c=r(8942),p=r(7776),h=r(9373),m=r(2167),x=r(5375),f=r(878),d=r(2988);let y=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...n},o)=>{let s=a.useRef(null);return a.useImperativeHandle(o,()=>s.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,d.Z)({ref:s},n),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus");var P=r(2325);let g=u.ZP.Earth,j=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...g,...r},{name:i,mass:c,radius:m,orbitalOrigin:x,orbitalRadius:d,orbitalSpeed:j,orbitalPeriod:z,orbitalInclination:M,axialTilt:w,rotationPeriod:E,surfaceTemp:_,color:b,gravity:k,initialOrbitalAngle:v}=s,{map:S,normal:T,specular:I}=o,{simSpeed:R,updateRotationCount:Z,incrementDate:C,simulationDate:D}=(0,l.ZP)(),{planetAngles:V,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:U}=(0,l.d2)(),{setSurfacePoint:G,surfacePoint:L,setSurfaceNormal:X,surfaceNormal:Y,setCameraSurfacePoint:q,isSurfaceCameraActive:H}=(0,l.g5)(),J=t||(0,a.useRef)(),K=(0,a.useRef)(V[i]||0);(0,a.useRef)();let Q=1e-4*d,W=.001*m;u.E_;let $=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:el,camera:eu}=(0,h.z)(),ec=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*R;0===K.current?K.current=Math.PI/180*v:K.current-=2*Math.PI/(86400*z)*r;let n=Q*Math.cos(K.current),o=Q*Math.sin(K.current);if(J.current){let e=Math.sin(Math.PI/180*M)*Q*Math.sin(K.current);J.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),E&&(J.current.rotation.y+=2*Math.PI/(3600*E)*r,en({x:J.current.rotation.x,y:J.current.rotation.y,z:J.current.rotation.z}),J.current.rotation.y>=2*Math.PI&&(J.current.rotation.y%=2*Math.PI,Z(i,1),"Earth"===i&&C()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;J.current&&eh(8e3>t.position.distanceTo(J.current.position))});let em=e=>{if(e.stopPropagation(),eo||H)return;B(null),F(s),ei.setFromCamera(el,eu);let t=ei.intersectObject(ec.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;G([(e=J.current.worldToLocal(e.clone())).x,e.y,e.z]),q([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();X([n.x,n.y,n.z])}},ex=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ef=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ed=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eP=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eg=H?128:$?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:J,children:[(0,n.jsxs)("mesh",{ref:ec,onClick:em,onPointerDown:ex,onPointerMove:ef,onPointerUp:ed,onPointerOver:ey,onPointerOut:eP,children:[(0,n.jsx)("sphereGeometry",{args:[W,eg,eg]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y,{args:[2*W,.15*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y,{args:[1.5*W,.3*W,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(P.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":W+.25*W,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:b},onClick:em,onPointerDown:ex,onPointerMove:ef,onPointerUp:ed,onPointerOver:ey,onPointerOut:eP,children:i})}):(0,n.jsx)(P.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:b,opacity:$?.2:.8},onClick:em,onPointerDown:ex,onPointerMove:ef,onPointerUp:ed,onPointerOver:ey,onPointerOut:eP})})]}),U&&(0,n.jsx)(f.Z,{origin:x,radius:Q,orbitalInclination:M,color:b,name:i})]})});var z=r(3920),M=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:f,setSelectedMoon:d}=(0,l.d2)(),{cameraTarget:y,setCameraTarget:P,surfaceNormal:g,cameraSurfacePoint:M,cameraSurfaceNormal:w}=(0,l.g5)(),{surfacePoint:E,isSurfaceCameraActive:_,triggerReset:b,setTriggerReset:k}=(0,l.g5)(),v=(0,a.useRef)(),[S,T]=(0,a.useState)(200),[I,R]=(0,a.useState)(0),[Z,C]=(0,a.useState)(null),D=()=>{if(!v.current)return;o(null),d(null),T(200),P(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};v.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&v.current){C("planet");let e=t[r.name];if(e){P(new p.Vector3(e.x,e.y,e.z));let t=.001*u.ZP[r.name].radius*4;R(t),T(t),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}"Sun"===r.name&&(T(200),v.current.setTarget(0,0,0,!0),v.current.dollyTo(200,!0))}if(f&&v.current){C("moon"),P(new p.Vector3(f.position.x,f.position.y,f.position.z));let e=f.position;if(e){P(new p.Vector3(e.x,e.y,e.z));let t=f.bodyData.radius*c.sh*4;R(t),T(t/2),v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(t,!0)}}f||r||C(null)},[r,f]),(0,a.useEffect)(()=>{!r&&v.current&&D()},[r,e.position]),(0,a.useEffect)(()=>{D&&(D(),k(!1))},[b]),(0,h.A)(()=>{if(v.current){if("planet"===Z){let e=t[r.name];e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(I,!0))}else if("moon"===Z){let e=f.position;if(e&&(v.current.setTarget(e.x,e.y,e.z,!0),v.current.dollyTo(I,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);v.current.setTarget(t.x,t.y,t.z,!0)}}});let V=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/2k_moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!_&&(0,n.jsx)(i.B,{ref:v,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,S)}),(0,n.jsx)(z.Z,{}),(0,n.jsx)(j,{bodyData:u.ZP.Earth,textures:V}),(0,n.jsx)(m.Z,{bodyData:c.moonsData.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(x.Z,{position:e.position,resetCamera:D},"Sun-plain")]})},w=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(M,{})})}},function(e){e.O(0,[433,689,942,855,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);