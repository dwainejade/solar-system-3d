(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{336:function(e,t,r){Promise.resolve().then(r.bind(r,4301))},4301:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(7437),o=r(4220),a=r(2265),s=r(7871),i=r(3719),l=r(8384),c=r(2079),u=r(8942),p=r(7776),h=r(9373),m=r(625),d=r(5375),f=r(878),x=r(2988);let y=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...n},o)=>{let s=a.useRef(null);return a.useImperativeHandle(o,()=>s.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,x.Z)({ref:s},n),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus");var g=r(2325);let M=c.ZP.Earth,P=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...M,...r},{name:i,mass:u,radius:m,orbitalOrigin:d,orbitalRadius:x,orbitalSpeed:P,orbitalPeriod:j,orbitalInclination:z,axialTilt:b,rotationPeriod:w,surfaceTemp:v,color:R,gravity:k,initialOrbitalAngle:C}=s,{map:E,normal:S,specular:I}=o,{simSpeed:_,updateRotationCount:Z,incrementDate:T,simulationDate:V}=(0,l.ZP)(),{planetAngles:D,updatePlanetPosition:O,selectedPlanet:N,setSelectedPlanet:F,displayLabels:A,setSelectedMoon:B,orbitPaths:G}=(0,l.d2)(),{setSurfacePoint:L,surfacePoint:U,setSurfaceNormal:q,surfaceNormal:H,setCameraSurfacePoint:W,isSurfaceCameraActive:X}=(0,l.g5)(),Y=t||(0,a.useRef)(),$=(0,a.useRef)(D[i]||0);(0,a.useRef)();let J=1e-4*x,K=.001*m;c.E_;let Q=N&&N.name===i,[ee,et]=(0,a.useState)(null),[er,en]=(0,a.useState)({x:0,y:0,z:0}),[eo,ea]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),{raycaster:ei,mouse:el,camera:ec}=(0,h.z)(),eu=(0,a.useRef)();(0,h.A)((e,t)=>{let r=t*_;0===$.current?$.current=Math.PI/180*C:$.current-=2*Math.PI/(86400*j)*r;let n=J*Math.cos($.current),o=J*Math.sin($.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*J*Math.sin($.current);Y.current.position.set(n,e,o),O(i,{x:n,y:e,z:o}),w&&(Y.current.rotation.y+=2*Math.PI/(3600*w)*r,en({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(i,1),"Earth"===i&&T()))}});let[ep,eh]=(0,a.useState)(!1);(0,h.A)(e=>{let{camera:t}=e;Y.current&&eh(8e3>t.position.distanceTo(Y.current.position))});let em=e=>{if(e.stopPropagation(),eo||X)return;B(null),F(s),ei.setFromCamera(el,ec);let t=ei.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;L([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),W([r.x,r.y,r.z]);let n=new p.Vector3().subVectors(e,new p.Vector3).normalize();q([n.x,n.y,n.z])}},ed=e=>{e.stopPropagation(),ea(!1),es.current={x:e.clientX,y:e.clientY}},ef=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&ea(!0)},ex=e=>{ea(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",et(i)},eg=e=>{e.stopPropagation(),document.body.style.cursor="auto",et(null)},eM=X?128:Q?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg,children:[(0,n.jsx)("sphereGeometry",{args:[K,eM,eM]}),(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(y,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(y,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),A?(0,n.jsx)(g.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:R},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg,children:i})}):(0,n.jsx)(g.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:R,opacity:Q?.2:.8},onClick:em,onPointerDown:ed,onPointerMove:ef,onPointerUp:ex,onPointerOver:ey,onPointerOut:eg})})]}),G&&(0,n.jsx)(f.Z,{origin:d,radius:J,orbitalInclination:z,color:R,name:i})]})});var j=r(3920),z=()=>{let{sunSettings:e}=(0,l.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:o,selectedMoon:f,setSelectedMoon:x}=(0,l.d2)(),{cameraTarget:y,setCameraTarget:g,surfaceNormal:M,cameraSurfacePoint:z,cameraSurfaceNormal:b}=(0,l.g5)(),{surfacePoint:w,isSurfaceCameraActive:v,triggerReset:R,setTriggerReset:k}=(0,l.g5)(),C=(0,a.useRef)(),[E,S]=(0,a.useState)(200),[I,_]=(0,a.useState)(0),[Z,T]=(0,a.useState)(null),V=()=>{if(!C.current)return;o(null),x(null),S(200),g(new p.Vector3(e.position.x,e.position.y,e.position.z));let t={x:e.position.x-2e3,y:e.position.y+1e3,z:e.position.z+1e3};C.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(r&&C.current){T("planet");let e=t[r.name];if(e){g(new p.Vector3(e.x,e.y,e.z));let t=.001*c.ZP[r.name].radius*4;_(t),S(t),C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(t,!0)}"Sun"===r.name&&(S(200),C.current.setTarget(0,0,0,!0),C.current.dollyTo(200,!0))}if(f&&C.current){T("moon"),g(new p.Vector3(f.position.x,f.position.y,f.position.z));let e=f.position;if(e){g(new p.Vector3(e.x,e.y,e.z));let t=f.bodyData.radius*u.sh*4;_(t),S(t/2),C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(t,!0)}}f||r||T(null)},[r,f]),(0,a.useEffect)(()=>{!r&&C.current&&V()},[r,e.position]),(0,a.useEffect)(()=>{V&&(V(),k(!1))},[R]),(0,h.A)(()=>{if(C.current){if("planet"===Z){let e=t[r.name];e&&(C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(I,!0))}else if("moon"===Z){let e=f.position;if(e&&(C.current.setTarget(e.x,e.y,e.z,!0),C.current.dollyTo(I,!0)),!Z)return}else{let t=new p.Vector3(e.position.x,e.position.y,e.position.z);C.current.setTarget(t.x,t.y,t.z,!0)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg",normal:"../assets/earth/2k_earth_normal_map.png",specular:"../assets/earth/2k_earth_specular_map.png"}),O=(0,s.m)({map:"../assets/earth/moon/moon.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!v&&(0,n.jsx)(i.B,{ref:C,makeDefault:!0,maxDistance:1e6,smoothTime:.8,truckSpeed:.8,rotateSpeed:.1,zoomSpeed:.8,minDistance:Math.max(.01,E)}),(0,n.jsx)(j.Z,{}),(0,n.jsx)(P,{bodyData:c.ZP.Earth,textures:D}),(0,n.jsx)(m.Z,{bodyData:u.moonsData.Earth[0],parentPosition:t.Earth,parentName:"Earth",textures:O},"Earth-moon"),(0,n.jsx)(d.Z,{position:e.position,resetCamera:V},"Sun-plain")]})},b=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})},625:function(e,t,r){"use strict";var n=r(7437),o=r(2265),a=r(7776),s=r(9373),i=r(7871),l=r(2325),c=r(8384),u=r(8942),p=r(878),h=r(6209);let m=(0,o.forwardRef)((e,t)=>{let{moonData:r,planetPosition:m,parentName:d,parentMeshRef:f}=e,{name:x,orbitalRadius:y,radius:g,color:M,orbitalPeriod:P,orbitalInclination:j,eccentricity:z}=r,b=t||(0,o.useRef)(),w=(0,o.useRef)(2*Math.random()*Math.PI),v=(0,o.useRef)(),R=(0,o.useRef)(new a.Vector3),k="Moon"===x?(0,i.m)("../assets/earth/moon/moon.jpg"):null,C=(0,o.useMemo)(()=>({radius:g*u.sh,orbitalRadius:y*u.H_,meanMotion:2*Math.PI/(86400*P),inclination:Math.PI/180*j}),[g,y,P,j]),{isSurfaceCameraActive:E,satelliteCamera:S,activeCamera:I,setAutoRotate:_,autoRotate:Z,switchToMoonCamera:T}=(0,c.g5)(),{simSpeed:V,toggleDetailsMenu:D}=(0,c.ZP)(),{selectedMoon:O,setSelectedMoon:N,displayLabels:F,orbitPaths:A,updateMoonPosition:B,updateMoonWorldPosition:G}=(0,c.d2)(),L=O?.name===x,U=x===I?.name,q=(0,o.useMemo)(()=>new a.SphereGeometry(C.radius,L?32:14,L?16:12),[C.radius,L]),H=(0,o.useMemo)(()=>new a.MeshStandardMaterial({metalness:.2,roughness:.8,map:k||null,color:k?null:M,onBeforeCompile:e=>{e.fragmentShader=e.fragmentShader.replace("#include <map_fragment>",`
        #include <map_fragment>
        diffuseColor.rgb *= .7;
        diffuseColor.rgb = pow(diffuseColor.rgb, vec3(1.5));
        `)}}),[k,M]),W=(0,o.useCallback)(e=>{e.stopPropagation(),L||(D(!0),N(r),T(d,x))},[L,r,d,x]),X=(0,o.useCallback)(e=>{e.stopPropagation(),_(!Z)},[Z,_]),Y=(0,o.useMemo)(()=>new a.Vector3,[]),$=(0,o.useMemo)(()=>new a.Vector3,[]);return(0,s.A)((e,t)=>{if(!b.current)return;w.current-=C.meanMotion*(t*V);let r=w.current;for(let e=0;e<10;e++){let e=(r-z*Math.sin(r)-w.current)/(1-z*Math.cos(r));if(r-=e,1e-6>Math.abs(e))break}let n=2*Math.atan(Math.sqrt((1+z)/(1-z))*Math.tan(r/2)),o=C.orbitalRadius*(1-z*z)/(1+z*Math.cos(n)),a=o*Math.sin(-n),s=Math.sin(C.inclination)*a,i=Math.cos(C.inclination)*a;if($.set(o*Math.cos(-n),s,i),b.current.position.copy($),L||U){b.current.getWorldPosition(R.current);let e=R.current;B(x,{x:e.x,y:e.y,z:e.z}),G(x,{x:e.x,y:e.y,z:e.z})}"Moon"===x&&m&&(Y.set(...m),b.current.lookAt(Y))}),(0,n.jsxs)(n.Fragment,{children:[U&&b.current&&(0,n.jsx)(h.Z,{target:b.current,targetName:x,size:C.radius}),(0,n.jsxs)("group",{ref:b,children:[(0,n.jsxs)("mesh",{ref:v,onClick:W,onDoubleClick:X,rotation:"Moon"===x?[0,3.5*Math.PI,0]:[0,0,0],children:[(0,n.jsx)("primitive",{object:q}),(0,n.jsx)("primitive",{object:H})]},x),(F||L)&&(0,n.jsx)(l.V,{position:[0,1.2*C.radius,0],center:!0,zIndexRange:[100,0],occlude:f?[f]:void 0,occludeOptions:{threshold:.1,recursive:!1},style:L?{pointerEvents:"none"}:{},children:(0,n.jsx)("span",{className:"planet-label",onClick:W,style:{color:M,fontSize:L?"14px":"12px",cursor:"pointer"},children:x})})]}),A&&(0,n.jsx)(p.Z,{origin:[0,0,0],radius:C.orbitalRadius,eccentricity:z,orbitalInclination:j,color:M,name:`${x}-orbit-path`,hiRes:L,lineWidth:L?2:1,position:b.current?.position,arcLength:.8})]})});t.Z=o.memo(m)}},function(e){e.O(0,[260,689,723,540,646,971,190,744],function(){return e(e.s=336)}),_N_E=e.O()}]);