(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{756:function(e,t,r){Promise.resolve().then(r.bind(r,7150))},7150:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(7437),s=r(9362),a=r(2265),o=r(7871),i=r(3719),u=r(8384),l=r(2079),c=r(8942),p=r(625),m=r(5375),h=r(15),d=r(4823),x=r(2325),j=r(7776),g=r(878),f=r(1675),y=r(1045);let _=(0,a.forwardRef)((e,t)=>{let{name:r="Earth",textures:s}=e,{planetsData:o}=(0,u.d2)(),i={...o[r]},{mass:m,radius:_,orbitalOrigin:M,orbitalRadius:P,orbitalSpeed:v,orbitalPeriod:k,orbitalInclination:S,axialTilt:E,rotationPeriod:R,surfaceTemp:T,color:w,gravity:b,initialOrbitalAngle:C,interestPoints:I}=i,{simSpeed:Z,updateRotationCount:z,incrementDate:D,orbitPaths:B,toggleDetailsMenu:O}=(0,u.ZP)(),{planetAngles:N,updatePlanetPosition:A,selectedPlanet:G,setSelectedPlanet:U,displayLabels:Y,setSelectedMoon:F}=(0,u.d2)(),{isSurfaceCameraActive:V,satelliteCamera:X,toggleSatelliteCamera:W}=(0,u.g5)(),q=t||(0,a.useRef)(),H=(0,a.useRef)(N[r]||0),J=(0,a.useRef)(),[K,L]=(0,a.useState)(!1),Q=P*(V?1e-4:l.Hm),$=_*l.YB;l.E_;let ee=G&&G.name===r,et=ee?64:32,[er,en]=(0,a.useState)(!1),es=(0,a.useRef)({x:0,y:0}),ea=(0,a.useRef)(),eo=(0,a.useRef)();(0,h.A)((e,t)=>{let n=t*Z;0===H.current?H.current=Math.PI/180*C:H.current-=2*Math.PI/(86400*k)*n;let s=Q*Math.cos(H.current),a=Q*Math.sin(H.current);if(q.current){let e=Math.sin(Math.PI/180*S)*Q*Math.sin(H.current);if(q.current.position.set(s,e,a),A(r,{x:s,y:e,z:a}),R){let e=2*Math.PI/(3600*R)*n,t=new j.Vector3(0,1,0);ea.current.rotateOnAxis(t,e),q.current.rotation.y>=2*Math.PI&&(q.current.rotation.y%=2*Math.PI,z(r,1),"Earth"===r&&D()),eo.current&&(eo.current.rotation.y+=e),J.current&&(J.current.rotation.y+=1.2*e)}}}),(0,a.useEffect)(()=>{ea.current&&(ea.current.rotation.order="YXZ",ea.current.rotation.y=0,ea.current.rotation.x=j.MathUtils.degToRad(E))},[E,G]);let ei=e=>{e.stopPropagation(),!er&&(O(!0),ee||(U(i),F(null)))},eu=e=>{e.stopPropagation(),en(!1),es.current={x:e.clientX,y:e.clientY}},el=e=>{Math.sqrt(Math.pow(e.clientX-es.current.x,2)+Math.pow(e.clientY-es.current.y,2))>5&&en(!0)},ec=e=>{en(!1)},[ep,em]=(0,a.useState)(!1),eh=e=>{e.stopPropagation(),document.body.style.cursor="pointer",em(!0)},ed=e=>{e.stopPropagation(),document.body.style.cursor="auto",em(!1)},[ex,ej]=(0,a.useState)($);(0,h.A)(e=>{let{camera:t}=e;if(!ea.current)return;let r=q.current.position.distanceTo(t.position);r/100<=$?ej($):ej(r/100)});let eg=(0,h.D)(j.TextureLoader,"../assets/saturn/saturn-rings.png");eg.wrapS=j.RepeatWrapping,eg.wrapT=j.ClampToEdgeWrapping;let ef=c._d[r]||[];return(0,n.jsxs)(n.Fragment,{children:[ee&&q.current&&(0,n.jsx)(f.Z,{target:q.current,targetName:r,color:w,size:$,satelliteCamera:X,toggleSatelliteCamera:W}),(0,n.jsxs)("group",{ref:q,children:[(0,n.jsx)("mesh",{visible:!1,onClick:ei,onPointerDown:eu,onPointerMove:el,onPointerUp:ec,onPointerOver:eh,onPointerOut:ed,children:ee?(0,n.jsx)("sphereGeometry",{args:[$,16,16]}):(0,n.jsx)("sphereGeometry",{args:[3*ex,8,8]})}),(0,n.jsxs)("mesh",{ref:ea,children:[(0,n.jsx)("sphereGeometry",{args:[ee?$:ex,et,et]}),!ee&&K?(0,n.jsx)("meshBasicMaterial",{color:w}):"Earth"===r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[1.05*$,et,et]}),(0,n.jsx)("shaderMaterial",{args:[y.et]})]},"".concat(r,"-atmosphere")),(0,n.jsx)("meshStandardMaterial",{metalness:.8,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>L(!0)},"".concat(r,"-day_texture")),(0,n.jsxs)("mesh",{ref:J,children:[(0,n.jsx)("sphereGeometry",{args:[1.01*$,et,et]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:null==s?void 0:s.clouds,transparent:!0})]},"".concat(r,"-cloud_texture"))]}):(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:null==s?void 0:s.map,onBuild:()=>L(!0)})]},ee?r+"-textured":r+"-basic"),"Saturn"===r&&(0,n.jsx)("group",{ref:eo,rotation:[j.MathUtils.degToRad(E),0,0],children:(0,n.jsx)(d.KC,{args:[1.7*$,.5*$,2,100],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{map:eg})})}),(Y||ep&&!ee)&&(0,n.jsx)(x.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":ee?ex+.25*ex:4*ex,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:w,pointerEvents:ep?"none":"auto"},onClick:ei,onPointerDown:eu,onPointerMove:el,onPointerUp:ec,onPointerOver:eh,onPointerOut:ed,children:r})}),ee&&ef.map((e,t)=>{var s;return(0,n.jsx)(p.Z,{moonData:e,planetPosition:null===(s=q.current)||void 0===s?void 0:s.position},"".concat(r,"-moon-").concat(t))})]}),B&&(0,n.jsx)(g.Z,{origin:M,radius:Q,orbitalInclination:S,color:w,name:r,hiRes:ee})]})});var M=r(3920),P=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:s,setPrevSpeed:p}=(0,u.ZP)(),{planetPositions:d,selectedPlanet:x,setSelectedPlanet:j,moonPositions:g,selectedMoon:f,setSelectedMoon:y,planetsData:P}=(0,u.d2)(),{satelliteCamera:v,triggerReset:k,setTriggerReset:S,toggleCameraTransitioning:E,isCameraTransitioning:R}=(0,u.g5)(),T=(0,a.useRef)(),[w,b]=(0,a.useState)(200),[C,I]=(0,a.useState)(null),Z=e=>4.2*e,z=()=>{if(!T.current)return;j(null),y(null),b(200),T.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};T.current.setPosition(t.x,t.y,t.z,!0)};(0,h.A)(()=>{if(x&&T.current){let e=d[x.name];if(e){let t=Z(P[x.name].radius*l.YB);b(t/2),T.current.setTarget(e.x,e.y,e.z,!0),T.current.dollyTo(t,!0)}"Sun"===x.name&&(b(200),T.current.setTarget(0,0,0,!0),T.current.dollyTo(200,!0))}});let D=(e,t)=>c._d[e].find(e=>e.name===t);(0,h.A)(()=>{if(f&&T.current){let e=g[f.name];if(e){let t=Z(D(C,f.name).radius*c.sh);b(t/2),T.current.setTarget(e.x,e.y,e.z,!0),T.current.dollyTo(t,!0)}}}),(0,a.useEffect)(()=>{z&&(z(),S(!1))},[k]),(0,a.useEffect)(()=>{var e;x&&"Sun"!==x.name&&(p(t),r(0),E(!0),I(x.name)),f&&(p(t),r(0),E(!0)),null===(e=T.current)||void 0===e||e.camera.updateProjectionMatrix()},[x,f]);let B=(0,o.m)({map:"../assets/earth/8k_earth_daymap.jpg",night:"../assets/earth/2k_earth_nightmap.jpg",normal:"../assets/earth/8k_earth_normal_map.png",clouds:"../assets/earth/8k_earth_clouds.jpg"}),O=(0,o.m)({map:"../assets/sun/8k_sun.jpg"}),N=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg"}),A=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),G=(0,o.m)({map:"../assets/mars/2k_mars.jpg"}),U=(0,o.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),Y=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg"}),F=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg"}),V=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[!v&&(0,n.jsx)(i.B,{ref:T,makeDefault:!v,maxDistance:9e4,smoothTime:.7,polarRotateSpeed:.5,near:.001,far:1e6,minDistance:w,maxDistance:9e4}),(0,n.jsx)(M.Z,{}),(0,n.jsx)(_,{name:"Earth",textures:B}),(0,n.jsx)(_,{name:"Mars",textures:G}),(0,n.jsx)(_,{name:"Venus",textures:N}),(0,n.jsx)(_,{name:"Mercury",textures:A}),(0,n.jsx)(_,{name:"Jupiter",textures:U}),(0,n.jsx)(_,{name:"Saturn",textures:Y}),(0,n.jsx)(_,{name:"Uranus",textures:F}),(0,n.jsx)(_,{name:"Neptune",textures:V}),(0,n.jsx)(m.Z,{textures:O,position:e.position,resetCamera:z},"Sun-plain")]})},v=()=>(0,n.jsx)(s.Z,{children:(0,n.jsx)(P,{})})}},function(e){e.O(0,[393,689,437,350,971,190,744],function(){return e(e.s=756)}),_N_E=e.O()}]);