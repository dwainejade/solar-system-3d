(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{756:function(e,t,r){Promise.resolve().then(r.bind(r,297))},297:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(7437),a=r(3757),s=r(2265),o=r(7871),i=r(3719),u=r(8384),l=r(2079),c=r(8942),p=r(625),m=r(5375),d=r(15),h=r(4823),f=r(2325),x=r(7776),g=r(878),y=r(5533),j=e=>{let{target:t,size:r,satelliteCamera:a,toggleSatelliteCamera:o}=e,{camera:i,gl:u}=(0,d.z)(),l=(0,s.useRef)(),[c,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)({x:0,y:0}),[f,g]=(0,s.useState)(new x.Spherical),[j,M]=(0,s.useState)(null),v=(0,s.useCallback)(e=>{p(!0),h({x:e.clientX,y:e.clientY})},[]),E=(0,s.useCallback)(e=>{if(c){let t=e.clientX-m.x,r=e.clientY-m.y;g(e=>{let n=new x.Spherical(e.radius,e.phi-.003*r,e.theta-.003*t);return n.phi=Math.max(.1,Math.min(Math.PI-.1,n.phi)),n}),h({x:e.clientX,y:e.clientY})}},[c,m]),w=(0,s.useCallback)(()=>{p(!1)},[]),P=(0,s.useCallback)(e=>{let n=new x.Vector3().setFromSpherical(f).length(),a=new x.Vector3(t.position.x,t.position.y,t.position.z).length(),s=f.radius+e.deltaY*(n/a*1);g(e=>new x.Spherical(Math.max(2.5*r,Math.min(500,s)),e.phi,e.theta))},[r,f,t.position]);return(0,s.useEffect)(()=>{let e=u.domElement,t=document.body;return e.addEventListener("mousedown",v),t.addEventListener("mousemove",E),t.addEventListener("mouseup",w),e.addEventListener("wheel",P),()=>{e.removeEventListener("mousedown",v),t.removeEventListener("mousemove",E),t.removeEventListener("mouseup",w),e.removeEventListener("wheel",P)}},[v,E,w,P,u.domElement]),(0,s.useEffect)(()=>()=>{a&&o(!1)},[a,o]),(0,d.A)(()=>{if(l.current&&t){let e=new x.Vector3().setFromSpherical(f);l.current.position.set(e.x+t.position.x,e.y+t.position.y,e.z+t.position.z),l.current.lookAt(t.position),l.current.updateMatrixWorld();let n=i.position.distanceTo(t.position),s=()=>{let e=new x.Vector3().subVectors(i.position,t.position),r=e.length(),n=Math.acos(e.y/r),a=Math.atan2(e.z,e.x);g(new x.Spherical(r,n,a)),o(!0)};n<8*r?!a&&(s(),j&&(clearTimeout(j),M(null))):j||a||M(setTimeout(()=>{a||s()},4e3))}}),(0,s.useEffect)(()=>()=>{j&&clearTimeout(j)},[j]),(0,n.jsx)(y.c,{ref:l,makeDefault:a,fov:50,near:r,far:1e5})};let M=(0,s.forwardRef)((e,t)=>{let{name:r="Earth",textures:a}=e,{planetsData:o}=(0,u.d2)(),i={...o[r]},{mass:c,radius:p,orbitalOrigin:m,orbitalRadius:y,orbitalSpeed:M,orbitalPeriod:v,orbitalInclination:E,axialTilt:w,rotationPeriod:P,surfaceTemp:b,color:k,gravity:T,initialOrbitalAngle:S}=i,{simSpeed:_,updateRotationCount:z,incrementDate:R,orbitPaths:L}=(0,u.ZP)(),{planetAngles:C,updatePlanetPosition:D,selectedPlanet:F,setSelectedPlanet:I,displayLabels:Y}=(0,u.d2)(),{isSurfaceCameraActive:Z,satelliteCamera:A,toggleSatelliteCamera:O}=(0,u.g5)(),V=t||(0,s.useRef)(),N=(0,s.useRef)(C[r]||0),X=y*(Z?1e-4:l.Hm),B=p*l.YB;l.E_;let U=F&&F.name===r,W=U?64:32,[H,G]=(0,s.useState)(!1),q=(0,s.useRef)({x:0,y:0}),J=(0,s.useRef)();(0,d.A)((e,t)=>{let n=t*_;0===N.current?N.current=Math.PI/180*S:N.current-=2*Math.PI/(86400*v)*n;let a=X*Math.cos(N.current),s=X*Math.sin(N.current);if(V.current){let e=Math.sin(Math.PI/180*E)*X*Math.sin(N.current);if(V.current.position.set(a,e,s),D(r,{x:a,y:e,z:s}),P){let e=new x.Vector3(0,1,0);J.current.rotateOnAxis(e,2*Math.PI/(3600*P)*n),V.current.rotation.y>=2*Math.PI&&(V.current.rotation.y%=2*Math.PI,z(r,1),"Earth"===r&&R())}}}),(0,s.useEffect)(()=>{J.current&&(J.current.rotation.order="YXZ",J.current.rotation.y=0,J.current.rotation.x=x.MathUtils.degToRad(w))},[w]);let K=e=>{e.stopPropagation(),H||I(i)},Q=e=>{e.stopPropagation(),G(!1),q.current={x:e.clientX,y:e.clientY}},$=e=>{Math.sqrt(Math.pow(e.clientX-q.current.x,2)+Math.pow(e.clientY-q.current.y,2))>5&&G(!0)},ee=e=>{G(!1)},et=e=>{e.stopPropagation(),document.body.style.cursor="pointer"},er=e=>{e.stopPropagation(),document.body.style.cursor="auto"},[en,ea]=(0,s.useState)(B);(0,d.A)(e=>{let{camera:t}=e;if(!J.current)return;let r=V.current.position.distanceTo(t.position);r/100<=B?ea(B):ea(r/100)});let es=(0,d.D)(x.TextureLoader,"../assets/saturn/saturn-rings-alpha.png");return es.wrapS=x.RepeatWrapping,es.wrapT=x.ClampToEdgeWrapping,(0,n.jsxs)(n.Fragment,{children:[U&&V.current&&(0,n.jsx)(j,{target:V.current,color:k,size:B,satelliteCamera:A,toggleSatelliteCamera:O}),(0,n.jsxs)("group",{ref:V,children:[(0,n.jsxs)("mesh",{ref:J,onClick:K,onPointerDown:Q,onPointerMove:$,onPointerUp:ee,onPointerOver:et,onPointerOut:er,children:[(0,n.jsx)("sphereGeometry",{args:[en,W,W]}),en<=B?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:a.map}):(0,n.jsx)("meshBasicMaterial",{color:k})]}),"Saturn"===r&&(0,n.jsx)("group",{rotation:[x.MathUtils.degToRad(w),0,0],children:(0,n.jsx)(h.KC,{args:[1.7*B,.5*B,2,100],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{map:es,side:x.DoubleSide,transparent:!0,opacity:.9})})}),Y&&(0,n.jsx)(f.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":B+.25*B,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:k},onClick:K,onPointerDown:Q,onPointerMove:$,onPointerUp:ee,onPointerOver:et,onPointerOut:er,children:r})})]}),L&&(0,n.jsx)(g.Z,{origin:m,radius:X,orbitalInclination:E,color:k,name:r})]})});var v=r(3920),E=()=>{let{sunSettings:e}=(0,u.ZP)(),{planetPositions:t,selectedPlanet:r,setSelectedPlanet:a,selectedMoon:h,setSelectedMoon:f,planetsData:x}=(0,u.d2)(),{satelliteCamera:g,triggerReset:y,setTriggerReset:j}=(0,u.g5)(),E=(0,s.useRef)(),[w,P]=(0,s.useState)(200),b=e=>4.2*e,k=()=>{if(!E.current)return;a(null),f(null),P(200),E.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};E.current.setPosition(t.x,t.y,t.z,!0)};(0,d.A)(()=>{if(r&&E.current){let e=t[r.name];if(e){let t=b(x[r.name].radius*l.YB);P(t/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(t,!0)}"Sun"===r.name&&(P(200),E.current.setTarget(0,0,0,!0),E.current.dollyTo(200,!0))}}),(0,d.A)(()=>{if(h&&E.current){let e=h.position;if(e){let t=b(h.bodyData.radius*c.sh);console.log(e),P(t/2),E.current.setTarget(e.x,e.y,e.z,!0),E.current.dollyTo(t,!0)}}}),(0,s.useEffect)(()=>{k&&(k(),j(!1))},[y]);let T=(0,o.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),S=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),_=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),z=(0,o.m)({map:"../assets/mars/2k_mars.jpg"}),R=(0,o.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),L=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg"}),C=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg"}),D=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"}),F=e=>(c._d[e]||[]).map((r,a)=>(0,n.jsx)(p.Z,{bodyData:r,parentPosition:t[e],parentName:e},"".concat(e,"-moon-").concat(a)));return(0,n.jsxs)(n.Fragment,{children:[!g&&(0,n.jsx)(i.B,{ref:E,makeDefault:!g,maxDistance:9e4,smoothTime:.8,truckSpeed:1,rotateSpeed:1,minDistance:Math.min(1,w)}),(0,n.jsx)(v.Z,{}),(0,n.jsx)(M,{name:"Earth",textures:T}),(0,n.jsx)(M,{name:"Mars",textures:z}),(0,n.jsx)(M,{name:"Venus",textures:S}),(0,n.jsx)(M,{name:"Mercury",textures:_}),(0,n.jsx)(M,{name:"Jupiter",textures:R}),(0,n.jsx)(M,{name:"Saturn",textures:L}),(0,n.jsx)(M,{name:"Uranus",textures:C}),(0,n.jsx)(M,{name:"Neptune",textures:D}),Object.entries(c._d).map(e=>{let[t]=e;return F(t)}),(0,n.jsx)(m.Z,{position:e.position,resetCamera:k},"Sun-plain")]})},w=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(E,{})})},5533:function(e,t,r){"use strict";r.d(t,{c:function(){return u}});var n=r(2988),a=r(2265),s=r(15),o=r(7776);let i=e=>"function"==typeof e,u=a.forwardRef(({envMap:e,resolution:t=256,frames:r=1/0,makeDefault:u,children:l,...c},p)=>{let m=(0,s.z)(({set:e})=>e),d=(0,s.z)(({camera:e})=>e),h=(0,s.z)(({size:e})=>e),f=a.useRef(null);a.useImperativeHandle(p,()=>f.current,[]);let x=a.useRef(null),g=function(e,t,r){let n=(0,s.z)(e=>e.size),i=(0,s.z)(e=>e.viewport),u="number"==typeof e?e:n.width*i.dpr,l=n.height*i.dpr,{samples:c=0,depth:p,...m}=("number"==typeof e?void 0:e)||{},d=a.useMemo(()=>{let e=new o.WebGLRenderTarget(u,l,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.HalfFloatType,...m});return p&&(e.depthTexture=new o.DepthTexture(u,l,o.FloatType)),e.samples=c,e},[]);return a.useLayoutEffect(()=>{d.setSize(u,l),c&&(d.samples=c)},[c,d,u,l]),a.useEffect(()=>()=>d.dispose(),[]),d}(t);a.useLayoutEffect(()=>{c.manual||(f.current.aspect=h.width/h.height)},[h,c]),a.useLayoutEffect(()=>{f.current.updateProjectionMatrix()});let y=0,j=null,M=i(l);return(0,s.A)(t=>{M&&(r===1/0||y<r)&&(x.current.visible=!1,t.gl.setRenderTarget(g),j=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,f.current),t.scene.background=j,t.gl.setRenderTarget(null),x.current.visible=!0,y++)}),a.useLayoutEffect(()=>{if(u)return m(()=>({camera:f.current})),()=>m(()=>({camera:d}))},[f,u,m]),a.createElement(a.Fragment,null,a.createElement("perspectiveCamera",(0,n.Z)({ref:f},c),!M&&l),a.createElement("group",{ref:x},M&&l(g.texture)))})}},function(e){e.O(0,[393,689,723,965,882,971,190,744],function(){return e(e.s=756)}),_N_E=e.O()}]);