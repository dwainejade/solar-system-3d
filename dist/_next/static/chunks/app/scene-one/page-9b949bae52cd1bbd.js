(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{4507:function(e,t,r){Promise.resolve().then(r.bind(r,4626))},4626:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(3827),a=r(2532),o=r(4090),s=r(7475),u=r(7808),i=r(2110),c=r(1653),l=r(6376);let p=e=>"function"==typeof e,m=o.forwardRef((e,t)=>{var r;let{envMap:n,resolution:a=256,frames:s=1/0,makeDefault:u,children:m,...f}=e,d=(0,c.z)(e=>{let{set:t}=e;return t}),x=(0,c.z)(e=>{let{camera:t}=e;return t}),y=(0,c.z)(e=>{let{size:t}=e;return t}),h=o.useRef(null),g=o.useRef(null),j=function(e,t,r){let n=(0,c.z)(e=>e.size),a=(0,c.z)(e=>e.viewport),s="number"==typeof e?e:n.width*a.dpr,u="number"==typeof t?t:n.height*a.dpr,{samples:i=0,depth:p,...m}=("number"==typeof e?void 0:e)||{},f=o.useMemo(()=>{let e=new l.WebGLRenderTarget(s,u,{minFilter:l.LinearFilter,magFilter:l.LinearFilter,type:l.HalfFloatType,...m});return p&&(e.depthTexture=new l.DepthTexture(s,u,l.FloatType)),e.samples=i,e},[]);return o.useLayoutEffect(()=>{f.setSize(s,u),i&&(f.samples=i)},[i,f,s,u]),o.useEffect(()=>()=>f.dispose(),[]),f}(a);o.useLayoutEffect(()=>{f.manual||(h.current.aspect=y.width/y.height)},[y,f]),o.useLayoutEffect(()=>{h.current.updateProjectionMatrix()});let P=0,b=null,z=p(m);return(0,c.A)(e=>{z&&(s===1/0||P<s)&&(g.current.visible=!1,e.gl.setRenderTarget(j),b=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,h.current),e.scene.background=b,e.gl.setRenderTarget(null),g.current.visible=!0,P++)}),o.useLayoutEffect(()=>{if(u)return d(()=>({camera:h.current})),()=>d(()=>({camera:x}))},[h,u,d]),o.createElement(o.Fragment,null,o.createElement("perspectiveCamera",(0,i.Z)({ref:(r=[h,t],function(e){r.forEach(function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)})})},f),!z&&m),o.createElement("group",{ref:g},z&&m(j.texture)))});var f=r(7912),d=r(424),x=r(440),y=r(5556),h=r(8675),g=r(2509),j=r(2311),P=r(6959);r(5468);let b=d.ZP.Earth,z=(0,o.forwardRef)((e,t)=>{let{bodyData:r,textures:a}=e,s={...b,...r},{name:u,mass:i,radius:p,orbitalOrigin:m,orbitalRadius:x,orbitalSpeed:y,orbitalPeriod:h,orbitalInclination:z,axialTilt:M,rotationPeriod:k,surfaceTemp:v,color:w,gravity:_,initialOrbitalAngle:E}=s,{simSpeed:D,updateRotationCount:Z,incrementDate:S,simulationDate:T,orbitPaths:R}=(0,f.ZP)(),{planetAngles:C,updatePlanetPosition:F,selectedPlanet:I,setSelectedPlanet:O,displayLabels:V,planetPositions:L}=(0,f.d2)(),{setSurfacePoint:N,surfacePoint:A,isSurfaceCameraActive:B,setCameraSurfacePoint:U}=(0,f.g5)(),Y=t||(0,o.useRef)(),G=(0,o.useRef)(C[u]||0),H=x*(B?1e-4:d.Hm),K=p*d.YB;d.E_;let X=I&&I.name===u,[q,J]=(0,o.useState)(null),[W,Q]=(0,o.useState)({x:0,y:0,z:0}),[$,ee]=(0,o.useState)(!1),et=(0,o.useRef)({x:0,y:0}),[er,en]=(0,o.useState)(null),{raycaster:ea,mouse:eo,camera:es}=(0,c.z)(),eu=(0,o.useRef)();(0,c.A)((e,t)=>{let r=t*D;0===G.current?G.current=Math.PI/180*E:G.current-=2*Math.PI/(86400*h)*r;let n=H*Math.cos(G.current),a=H*Math.sin(G.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*H*Math.sin(G.current);Y.current.position.set(n,e,a),F(u,{x:n,y:e,z:a}),k&&(Y.current.rotation.y+=2*Math.PI/(3600*k)*r,Q({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(u,1),"Earth"===u&&S()))}});let[ei,ec]=(0,o.useState)(!1);(0,c.A)(e=>{let{camera:t}=e;Y.current&&ec(8e3>t.position.distanceTo(Y.current.position))});let el=e=>{if(e.stopPropagation(),$)return;O(s),ea.setFromCamera(eo,es);let t=ea.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;N([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),U([r.x,r.y,r.z]);let n=new l.Vector3().subVectors(e,new l.Vector3).normalize();en([n.x,n.y,n.z])}},ep=e=>{e.stopPropagation(),ee(!1),et.current={x:e.clientX,y:e.clientY}},em=e=>{Math.sqrt(Math.pow(e.clientX-et.current.x,2)+Math.pow(e.clientY-et.current.y,2))>5&&ee(!0)},ef=e=>{ee(!1)},ed=e=>{e.stopPropagation(),document.body.style.cursor="pointer",J(u)},ex=e=>{e.stopPropagation(),document.body.style.cursor="auto",J(null)},ey=B?128:X?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ef,onPointerOver:ed,onPointerOut:ex,children:[(0,n.jsx)("sphereGeometry",{args:[K,ey,ey]}),a?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:a.map}):(0,n.jsx)("meshStandardMaterial",{color:w})]}),"Saturn"===u&&(0,n.jsxs)("group",{children:[(0,n.jsx)(j.KC,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(j.KC,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),V?(0,n.jsx)(P.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:w},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ef,onPointerOver:ed,onPointerOut:ex,children:u})}):(0,n.jsx)(P.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:w},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ef,onPointerOver:ed,onPointerOut:ex})})]}),R&&(0,n.jsx)(g.Z,{origin:m,radius:H,orbitalInclination:z,color:w,name:u})]})});var M=r(3833),k=()=>{let{sunSettings:e,rotationCounts:t,simulationDate:r}=(0,f.ZP)(),{planetPositions:a,selectedPlanet:i,setSelectedPlanet:p,selectedMoon:g,setSelectedMoon:j}=(0,f.d2)(),{surfacePoint:P,isSurfaceCameraActive:b,triggerReset:k,setTriggerReset:v}=(0,f.g5)(),w=(0,o.useRef)(),_=(0,o.useRef)(),[E,D]=(0,o.useState)(200),Z=()=>{if(!_.current)return;p(null),j(null),D(200),_.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};_.current.setPosition(t.x,t.y,t.z,!0)};(0,o.useEffect)(()=>{if(i&&_.current){let e=a[i.name];if(e){let t=d.ZP[i.name].radius*d.YB*4;D(t/2),_.current.setTarget(e.x,e.y,e.z,!0),_.current.dollyTo(t,!0)}"Sun"===i.name&&(D(200),_.current.setTarget(0,0,0,!0),_.current.dollyTo(200,!0))}},[i,a]),(0,o.useEffect)(()=>{if(g&&_.current){let e=g.position;if(e){let t=g.bodyData.radius*x.sh*4;D(t/2),_.current.setTarget(e.x,e.y,e.z,!0),_.current.dollyTo(t,!0)}}},[g,x._d]),(0,o.useEffect)(()=>{Z&&(Z(),v(!1))},[k]),(0,c.A)(()=>{if(b&&P&&i){let e=a[i.name];if(e){let t=new l.Vector3(e.x,e.y,e.z),r=new l.Vector3(P.x,P.y,P.z).sub(t).normalize(),n=new l.Vector3(P.x,P.y,P.z).add(r.multiplyScalar(.1));w.current.position.copy(n);let a=n.clone().add(r);w.current.lookAt(a),w.current.up.copy(r)}}});let S=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),T=(0,s.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),R=(0,s.m)({map:"../assets/mercury/2k_mercury.jpg"}),C=(0,s.m)({map:"../assets/mars/2k_mars.jpg"}),F=(0,s.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),I=(0,s.m)({map:"../assets/saturn/2k_saturn.jpg"}),O=(0,s.m)({map:"../assets/uranus/2k_uranus.jpg"}),V=(0,s.m)({map:"../assets/neptune/2k_neptune.jpg"}),L=(e,t)=>(x._d[e]||[]).map((t,r)=>(0,n.jsx)(y.Z,{bodyData:t,parentPosition:a[e],parentName:e},"".concat(e,"-moon-").concat(r)));return(0,n.jsxs)(n.Fragment,{children:[!b&&(0,n.jsx)(u.B,{ref:_,makeDefault:!0,maxDistance:9e4,smoothTime:.8,truckSpeed:1,rotateSpeed:1,zoomSpeed:.1,minDistance:Math.max(.02,E)}),P&&b&&(0,n.jsx)(m,{ref:w,makeDefault:!0,position:[P.x,P.y+10,P.z],fov:70,near:.01,far:1e6}),(0,n.jsx)(M.Z,{}),(0,n.jsx)(z,{bodyData:d.ZP.Earth,textures:S}),(0,n.jsx)(z,{bodyData:d.ZP.Mars,textures:C}),(0,n.jsx)(z,{bodyData:d.ZP.Venus,textures:T}),(0,n.jsx)(z,{bodyData:d.ZP.Mercury,textures:R}),(0,n.jsx)(z,{bodyData:d.ZP.Jupiter,textures:F}),(0,n.jsx)(z,{bodyData:d.ZP.Saturn,textures:I}),(0,n.jsx)(z,{bodyData:d.ZP.Uranus,textures:O}),(0,n.jsx)(z,{bodyData:d.ZP.Neptune,textures:V}),Object.entries(x._d).map(e=>{let[t,r]=e;return L(t,r)}),(0,n.jsx)(h.Z,{position:e.position,resetCamera:Z},"Sun-plain")]})},v=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(k,{})})},5468:function(e,t,r){"use strict";r(3827),r(4090),r(7912)}},function(e){e.O(0,[689,723,800,176,351,971,468,744],function(){return e(e.s=4507)}),_N_E=e.O()}]);