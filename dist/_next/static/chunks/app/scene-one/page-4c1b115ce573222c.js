(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{6669:function(e,t,r){Promise.resolve().then(r.bind(r,7302))},7302:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var n=r(7437),a=r(3757),s=r(2265),o=r(7871),u=r(3719),i=r(5533),c=r(8384),l=r(2079),p=r(8942),m=r(7776),d=r(15),f=r(625),x=r(5375),y=r(878),h=r(4823),g=r(2325);r(940);let j=l.ZP.Earth,P=(0,s.forwardRef)((e,t)=>{let{bodyData:r,textures:a}=e,o={...j,...r},{name:u,mass:i,radius:p,orbitalOrigin:f,orbitalRadius:x,orbitalSpeed:P,orbitalPeriod:b,orbitalInclination:z,axialTilt:M,rotationPeriod:k,surfaceTemp:v,color:w,gravity:_,initialOrbitalAngle:E}=o,{simSpeed:D,updateRotationCount:Z,incrementDate:S,simulationDate:T,orbitPaths:R}=(0,c.ZP)(),{planetAngles:C,updatePlanetPosition:F,selectedPlanet:I,setSelectedPlanet:O,displayLabels:V,planetPositions:L}=(0,c.d2)(),{setSurfacePoint:N,surfacePoint:A,isSurfaceCameraActive:B,setCameraSurfacePoint:U}=(0,c.g5)(),Y=t||(0,s.useRef)(),H=(0,s.useRef)(C[u]||0),G=x*(B?1e-4:l.Hm),K=p*l.YB;l.E_;let X=I&&I.name===u,[q,J]=(0,s.useState)(null),[W,Q]=(0,s.useState)({x:0,y:0,z:0}),[$,ee]=(0,s.useState)(!1),et=(0,s.useRef)({x:0,y:0}),[er,en]=(0,s.useState)(null),{raycaster:ea,mouse:es,camera:eo}=(0,d.z)(),eu=(0,s.useRef)();(0,d.A)((e,t)=>{let r=t*D;0===H.current?H.current=Math.PI/180*E:H.current-=2*Math.PI/(86400*b)*r;let n=G*Math.cos(H.current),a=G*Math.sin(H.current);if(Y.current){let e=Math.sin(Math.PI/180*z)*G*Math.sin(H.current);Y.current.position.set(n,e,a),F(u,{x:n,y:e,z:a}),k&&(Y.current.rotation.y+=2*Math.PI/(3600*k)*r,Q({x:Y.current.rotation.x,y:Y.current.rotation.y,z:Y.current.rotation.z}),Y.current.rotation.y>=2*Math.PI&&(Y.current.rotation.y%=2*Math.PI,Z(u,1),"Earth"===u&&S()))}});let[ei,ec]=(0,s.useState)(!1);(0,d.A)(e=>{let{camera:t}=e;Y.current&&ec(8e3>t.position.distanceTo(Y.current.position))});let el=e=>{if(e.stopPropagation(),$)return;O(o),ea.setFromCamera(es,eo);let t=ea.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;N([(e=Y.current.worldToLocal(e.clone())).x,e.y,e.z]),U([r.x,r.y,r.z]);let n=new m.Vector3().subVectors(e,new m.Vector3).normalize();en([n.x,n.y,n.z])}},ep=e=>{e.stopPropagation(),ee(!1),et.current={x:e.clientX,y:e.clientY}},em=e=>{Math.sqrt(Math.pow(e.clientX-et.current.x,2)+Math.pow(e.clientY-et.current.y,2))>5&&ee(!0)},ed=e=>{ee(!1)},ef=e=>{e.stopPropagation(),document.body.style.cursor="pointer",J(u)},ex=e=>{e.stopPropagation(),document.body.style.cursor="auto",J(null)},ey=B?128:X?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:Y,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ef,onPointerOut:ex,children:[(0,n.jsx)("sphereGeometry",{args:[K,ey,ey]}),a?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:a.map}):(0,n.jsx)("meshStandardMaterial",{color:w})]}),"Saturn"===u&&(0,n.jsxs)("group",{children:[(0,n.jsx)(h.KC,{args:[2*K,.15*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(h.KC,{args:[1.5*K,.3*K,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),V?(0,n.jsx)(g.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":K+.25*K,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:w},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ef,onPointerOut:ex,children:u})}):(0,n.jsx)(g.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:w},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ef,onPointerOut:ex})})]}),R&&(0,n.jsx)(y.Z,{origin:f,radius:G,orbitalInclination:z,color:w,name:u})]})});var b=r(3920),z=()=>{let{sunSettings:e,rotationCounts:t,simulationDate:r}=(0,c.ZP)(),{planetPositions:a,selectedPlanet:y,setSelectedPlanet:h,selectedMoon:g,setSelectedMoon:j}=(0,c.d2)(),{surfacePoint:z,isSurfaceCameraActive:M,triggerReset:k,setTriggerReset:v}=(0,c.g5)(),w=(0,s.useRef)(),_=(0,s.useRef)(),[E,D]=(0,s.useState)(200),Z=()=>{if(!_.current)return;h(null),j(null),D(200),_.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};_.current.setPosition(t.x,t.y,t.z,!0)};(0,s.useEffect)(()=>{if(y&&_.current){let e=a[y.name];if(e){let t=l.ZP[y.name].radius*l.YB*4;D(t/2),_.current.setTarget(e.x,e.y,e.z,!0),_.current.dollyTo(t,!0)}"Sun"===y.name&&(D(200),_.current.setTarget(0,0,0,!0),_.current.dollyTo(200,!0))}},[y,a]),(0,s.useEffect)(()=>{if(g&&_.current){let e=g.position;if(e){let t=g.bodyData.radius*p.sh*4;D(t/2),_.current.setTarget(e.x,e.y,e.z,!0),_.current.dollyTo(t,!0)}}},[g,p._d]),(0,s.useEffect)(()=>{Z&&(Z(),v(!1))},[k]),(0,d.A)(()=>{if(M&&z&&y){let e=a[y.name];if(e){let t=new m.Vector3(e.x,e.y,e.z),r=new m.Vector3(z.x,z.y,z.z).sub(t).normalize(),n=new m.Vector3(z.x,z.y,z.z).add(r.multiplyScalar(.1));w.current.position.copy(n);let a=n.clone().add(r);w.current.lookAt(a),w.current.up.copy(r)}}});let S=(0,o.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),T=(0,o.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),R=(0,o.m)({map:"../assets/mercury/2k_mercury.jpg"}),C=(0,o.m)({map:"../assets/mars/2k_mars.jpg"}),F=(0,o.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),I=(0,o.m)({map:"../assets/saturn/2k_saturn.jpg"}),O=(0,o.m)({map:"../assets/uranus/2k_uranus.jpg"}),V=(0,o.m)({map:"../assets/neptune/2k_neptune.jpg"}),L=(e,t)=>(p._d[e]||[]).map((t,r)=>(0,n.jsx)(f.Z,{bodyData:t,parentPosition:a[e],parentName:e},"".concat(e,"-moon-").concat(r)));return(0,n.jsxs)(n.Fragment,{children:[!M&&(0,n.jsx)(u.B,{ref:_,makeDefault:!0,maxDistance:9e4,smoothTime:.8,truckSpeed:1,rotateSpeed:1,zoomSpeed:.1,minDistance:Math.max(.02,E)}),z&&M&&(0,n.jsx)(i.c,{ref:w,makeDefault:!0,position:[z.x,z.y+10,z.z],fov:70,near:.01,far:1e6}),(0,n.jsx)(b.Z,{}),(0,n.jsx)(P,{bodyData:l.ZP.Earth,textures:S}),(0,n.jsx)(P,{bodyData:l.ZP.Mars,textures:C}),(0,n.jsx)(P,{bodyData:l.ZP.Venus,textures:T}),(0,n.jsx)(P,{bodyData:l.ZP.Mercury,textures:R}),(0,n.jsx)(P,{bodyData:l.ZP.Jupiter,textures:F}),(0,n.jsx)(P,{bodyData:l.ZP.Saturn,textures:I}),(0,n.jsx)(P,{bodyData:l.ZP.Uranus,textures:O}),(0,n.jsx)(P,{bodyData:l.ZP.Neptune,textures:V}),Object.entries(p._d).map(e=>{let[t,r]=e;return L(t,r)}),(0,n.jsx)(x.Z,{position:e.position,resetCamera:Z},"Sun-plain")]})},M=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(z,{})})},5533:function(e,t,r){"use strict";r.d(t,{c:function(){return i}});var n=r(2988),a=r(2265),s=r(15),o=r(7776);let u=e=>"function"==typeof e,i=a.forwardRef(({envMap:e,resolution:t=256,frames:r=1/0,makeDefault:i,children:c,...l},p)=>{let m=(0,s.z)(({set:e})=>e),d=(0,s.z)(({camera:e})=>e),f=(0,s.z)(({size:e})=>e),x=a.useRef(null);a.useImperativeHandle(p,()=>x.current,[]);let y=a.useRef(null),h=function(e,t,r){let n=(0,s.z)(e=>e.size),u=(0,s.z)(e=>e.viewport),i="number"==typeof e?e:n.width*u.dpr,c=n.height*u.dpr,{samples:l=0,depth:p,...m}=("number"==typeof e?void 0:e)||{},d=a.useMemo(()=>{let e=new o.WebGLRenderTarget(i,c,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,type:o.HalfFloatType,...m});return p&&(e.depthTexture=new o.DepthTexture(i,c,o.FloatType)),e.samples=l,e},[]);return a.useLayoutEffect(()=>{d.setSize(i,c),l&&(d.samples=l)},[l,d,i,c]),a.useEffect(()=>()=>d.dispose(),[]),d}(t);a.useLayoutEffect(()=>{l.manual||(x.current.aspect=f.width/f.height)},[f,l]),a.useLayoutEffect(()=>{x.current.updateProjectionMatrix()});let g=0,j=null,P=u(c);return(0,s.A)(t=>{P&&(r===1/0||g<r)&&(y.current.visible=!1,t.gl.setRenderTarget(h),j=t.scene.background,e&&(t.scene.background=e),t.gl.render(t.scene,x.current),t.scene.background=j,t.gl.setRenderTarget(null),y.current.visible=!0,g++)}),a.useLayoutEffect(()=>{if(i)return m(()=>({camera:x.current})),()=>m(()=>({camera:d}))},[x,i,m]),a.createElement(a.Fragment,null,a.createElement("perspectiveCamera",(0,n.Z)({ref:x},l),!P&&c),a.createElement("group",{ref:y},P&&c(h.texture)))})},940:function(e,t,r){"use strict";r(7437),r(2265),r(8384)}},function(e){e.O(0,[393,689,723,921,882,971,190,744],function(){return e(e.s=6669)}),_N_E=e.O()}]);