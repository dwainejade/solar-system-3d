(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{4507:function(e,t,r){Promise.resolve().then(r.bind(r,9244))},9244:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _}});var n=r(3827),o=r(6629),a=r(4090),s=r(7475),i=r(7808),u=r(4541),c=r(7912),l=r(424),p=r(440),m=r(6376),x=r(1653),d=r(5556),y=r(8675),f=r(2509),h=r(2311),j=r(6959),P=r(5468);let g=l.ZP.Earth,M=(0,a.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,s={...g,...r},{name:i,mass:u,radius:p,orbitalOrigin:d,orbitalRadius:y,orbitalSpeed:M,orbitalPeriod:b,orbitalInclination:z,axialTilt:_,rotationPeriod:k,surfaceTemp:Z,color:D,gravity:v,initialOrbitalAngle:w}=s,{simSpeed:S,updateRotationCount:C,incrementDate:E,simulationDate:I,orbitPaths:O}=(0,c.ZP)(),{planetAngles:R,updatePlanetPosition:T,selectedPlanet:V,setSelectedPlanet:N,displayLabels:B,planetPositions:F}=(0,c.d2)(),{setSurfacePoint:A,surfacePoint:U,isSurfaceCameraActive:Y,setCameraSurfacePoint:K}=(0,c.g5)(),X=t||(0,a.useRef)(),q=(0,a.useRef)(R[i]||0),G=y*(Y?1e-4:l.Hm),H=p*l.YB;l.E_;let J=V&&V.name===i,[L,Q]=(0,a.useState)(null),[W,$]=(0,a.useState)({x:0,y:0,z:0}),[ee,et]=(0,a.useState)(!1),er=(0,a.useRef)({x:0,y:0}),[en,eo]=(0,a.useState)(null),{raycaster:ea,mouse:es,camera:ei}=(0,x.z)(),eu=(0,a.useRef)();(0,x.A)((e,t)=>{let r=t*S;0===q.current?q.current=Math.PI/180*w:q.current-=2*Math.PI/(86400*b)*r;let n=G*Math.cos(q.current),o=G*Math.sin(q.current);if(X.current){let e=Math.sin(Math.PI/180*z)*G*Math.sin(q.current);X.current.position.set(n,e,o),T(i,{x:n,y:e,z:o}),k&&(X.current.rotation.y+=2*Math.PI/(3600*k)*r,$({x:X.current.rotation.x,y:X.current.rotation.y,z:X.current.rotation.z}),X.current.rotation.y>=2*Math.PI&&(X.current.rotation.y%=2*Math.PI,C(i,1),"Earth"===i&&E()))}});let[ec,el]=(0,a.useState)(!1);(0,x.A)(e=>{let{camera:t}=e;X.current&&el(8e3>t.position.distanceTo(X.current.position))});let ep=e=>{if(e.stopPropagation(),ee)return;N(s),ea.setFromCamera(es,ei);let t=ea.intersectObject(eu.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;A([(e=X.current.worldToLocal(e.clone())).x,e.y,e.z]),K([r.x,r.y,r.z]);let n=new m.Vector3().subVectors(e,new m.Vector3).normalize();eo([n.x,n.y,n.z])}},em=e=>{e.stopPropagation(),et(!1),er.current={x:e.clientX,y:e.clientY}},ex=e=>{Math.sqrt(Math.pow(e.clientX-er.current.x,2)+Math.pow(e.clientY-er.current.y,2))>5&&et(!0)},ed=e=>{et(!1)},ey=e=>{e.stopPropagation(),document.body.style.cursor="pointer",Q(i)},ef=e=>{e.stopPropagation(),document.body.style.cursor="auto",Q(null)},eh=Y?128:J?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:X,children:[(0,n.jsxs)("mesh",{ref:eu,onClick:ep,onPointerDown:em,onPointerMove:ex,onPointerUp:ed,onPointerOver:ey,onPointerOut:ef,children:[(0,n.jsx)("sphereGeometry",{args:[H,eh,eh]}),o?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map}):(0,n.jsx)("meshStandardMaterial",{color:D})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(h.KC,{args:[2*H,.15*H,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(h.KC,{args:[1.5*H,.3*H,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),B?(0,n.jsx)(j.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":H+.25*H,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:D},onClick:ep,onPointerDown:em,onPointerMove:ex,onPointerUp:ed,onPointerOver:ey,onPointerOut:ef,children:i})}):(0,n.jsx)(j.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:D},onClick:ep,onPointerDown:em,onPointerMove:ex,onPointerUp:ed,onPointerOver:ey,onPointerOut:ef})}),U&&en&&J&&(0,n.jsx)(P.Z,{position:U,normal:en,planetRef:X,surfaceColor:D,radius:H},i)]}),O&&(0,n.jsx)(f.Z,{origin:d,radius:G,orbitalInclination:z,color:D,name:i})]})});var b=r(3833),z=()=>{let{sunSettings:e,rotationCounts:t,simulationDate:r}=(0,c.ZP)(),{planetPositions:o,selectedPlanet:f,selectedMoon:h}=(0,c.d2)(),{surfacePoint:j,isSurfaceCameraActive:P}=(0,c.g5)(),g=(0,a.useRef)(),z=(0,a.useRef)(),[_,k]=(0,a.useState)(200),Z=()=>{if(!z.current)return;k(200),z.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};z.current.setPosition(t.x,t.y,t.z,!0)};(0,a.useEffect)(()=>{if(f&&z.current){let e=o[f.name];if(e){let t=l.ZP[f.name].radius*l.YB*4;k(t/2),z.current.setTarget(e.x,e.y,e.z,!0),z.current.dollyTo(t,!0)}"Sun"===f.name&&(k(200),z.current.setTarget(0,0,0,!0),z.current.dollyTo(200,!0))}},[f,o]),(0,a.useEffect)(()=>{if(h&&z.current){let e=h.position;if(e){let t=h.bodyData.radius*p.sh*4;k(t/2),z.current.setTarget(e.x,e.y,e.z,!0),z.current.dollyTo(t,!0)}}},[h,p._d]),(0,a.useEffect)(()=>{!f&&z.current&&Z()},[f,e.position]),(0,x.A)(()=>{if(P&&j&&f){let e=o[f.name];if(e){let t=new m.Vector3(e.x,e.y,e.z),r=new m.Vector3(j.x,j.y,j.z).sub(t).normalize(),n=new m.Vector3(j.x,j.y,j.z).add(r.multiplyScalar(.1));g.current.position.copy(n);let o=n.clone().add(r);g.current.lookAt(o),g.current.up.copy(r)}}});let D=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),v=(0,s.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),w=(0,s.m)({map:"../assets/mercury/2k_mercury.jpg"}),S=(0,s.m)({map:"../assets/mars/2k_mars.jpg"}),C=(0,s.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),E=(0,s.m)({map:"../assets/saturn/2k_saturn.jpg"}),I=(0,s.m)({map:"../assets/uranus/2k_uranus.jpg"}),O=(0,s.m)({map:"../assets/neptune/2k_neptune.jpg"}),R=(e,t)=>(p._d[e]||[]).map((t,r)=>(0,n.jsx)(d.Z,{bodyData:t,parentPosition:o[e],parentName:e},"".concat(e,"-moon-").concat(r)));return(0,n.jsxs)(n.Fragment,{children:[!P&&(0,n.jsx)(i.B,{ref:z,makeDefault:!0,maxDistance:9e4,smoothTime:.1,truckSpeed:1,rotateSpeed:1,zoomSpeed:.1,minDistance:Math.max(.02,_)}),j&&P&&(0,n.jsx)(u.c,{ref:g,makeDefault:!0,position:[j.x,j.y+10,j.z],fov:70,near:.01,far:1e6}),(0,n.jsx)(b.Z,{}),(0,n.jsx)(M,{bodyData:l.ZP.Earth,textures:D}),(0,n.jsx)(M,{bodyData:l.ZP.Mars,textures:S}),(0,n.jsx)(M,{bodyData:l.ZP.Venus,textures:v}),(0,n.jsx)(M,{bodyData:l.ZP.Mercury,textures:w}),(0,n.jsx)(M,{bodyData:l.ZP.Jupiter,textures:C}),(0,n.jsx)(M,{bodyData:l.ZP.Saturn,textures:E}),(0,n.jsx)(M,{bodyData:l.ZP.Uranus,textures:I}),(0,n.jsx)(M,{bodyData:l.ZP.Neptune,textures:O}),Object.entries(p._d).map(e=>{let[t,r]=e;return R(t,r)}),(0,n.jsx)(y.Z,{position:e.position,resetCamera:Z},"Sun-plain")]})},_=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(z,{})})}},function(e){e.O(0,[689,723,800,577,531,971,468,744],function(){return e(e.s=4507)}),_N_E=e.O()}]);