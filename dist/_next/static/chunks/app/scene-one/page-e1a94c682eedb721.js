(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{6669:function(e,t,r){Promise.resolve().then(r.bind(r,7302))},7302:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(7437),o=r(9362),s=r(2265),a=r(7871),i=r(3719),u=r(5533),c=r(8384),l=r(2079),p=r(8942),m=r(7776),x=r(15),d=r(625),y=r(5375),f=r(878),h=r(4823),j=r(2325);r(940);let P=l.ZP.Earth,g=(0,s.forwardRef)((e,t)=>{let{bodyData:r,textures:o}=e,a={...P,...r},{name:i,mass:u,radius:p,orbitalOrigin:d,orbitalRadius:y,orbitalSpeed:g,orbitalPeriod:M,orbitalInclination:b,axialTilt:z,rotationPeriod:_,surfaceTemp:k,color:D,gravity:Z,initialOrbitalAngle:v}=a,{simSpeed:w,updateRotationCount:S,incrementDate:C,simulationDate:E,orbitPaths:I}=(0,c.ZP)(),{planetAngles:O,updatePlanetPosition:T,selectedPlanet:R,setSelectedPlanet:V,displayLabels:N,planetPositions:B}=(0,c.d2)(),{setSurfacePoint:F,surfacePoint:A,isSurfaceCameraActive:U,setCameraSurfacePoint:Y}=(0,c.g5)(),K=t||(0,s.useRef)(),X=(0,s.useRef)(O[i]||0),q=y*(U?1e-4:l.Hm),G=p*l.YB;l.E_;let H=R&&R.name===i,[J,L]=(0,s.useState)(null),[Q,W]=(0,s.useState)({x:0,y:0,z:0}),[$,ee]=(0,s.useState)(!1),et=(0,s.useRef)({x:0,y:0}),[er,en]=(0,s.useState)(null),{raycaster:eo,mouse:es,camera:ea}=(0,x.z)(),ei=(0,s.useRef)();(0,x.A)((e,t)=>{let r=t*w;0===X.current?X.current=Math.PI/180*v:X.current-=2*Math.PI/(86400*M)*r;let n=q*Math.cos(X.current),o=q*Math.sin(X.current);if(K.current){let e=Math.sin(Math.PI/180*b)*q*Math.sin(X.current);K.current.position.set(n,e,o),T(i,{x:n,y:e,z:o}),_&&(K.current.rotation.y+=2*Math.PI/(3600*_)*r,W({x:K.current.rotation.x,y:K.current.rotation.y,z:K.current.rotation.z}),K.current.rotation.y>=2*Math.PI&&(K.current.rotation.y%=2*Math.PI,S(i,1),"Earth"===i&&C()))}});let[eu,ec]=(0,s.useState)(!1);(0,x.A)(e=>{let{camera:t}=e;K.current&&ec(8e3>t.position.distanceTo(K.current.position))});let el=e=>{if(e.stopPropagation(),$)return;V(a),eo.setFromCamera(es,ea);let t=eo.intersectObject(ei.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;F([(e=K.current.worldToLocal(e.clone())).x,e.y,e.z]),Y([r.x,r.y,r.z]);let n=new m.Vector3().subVectors(e,new m.Vector3).normalize();en([n.x,n.y,n.z])}},ep=e=>{e.stopPropagation(),ee(!1),et.current={x:e.clientX,y:e.clientY}},em=e=>{Math.sqrt(Math.pow(e.clientX-et.current.x,2)+Math.pow(e.clientY-et.current.y,2))>5&&ee(!0)},ex=e=>{ee(!1)},ed=e=>{e.stopPropagation(),document.body.style.cursor="pointer",L(i)},ey=e=>{e.stopPropagation(),document.body.style.cursor="auto",L(null)},ef=U?128:H?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:K,children:[(0,n.jsxs)("mesh",{ref:ei,onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ex,onPointerOver:ed,onPointerOut:ey,children:[(0,n.jsx)("sphereGeometry",{args:[G,ef,ef]}),o?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:o.map}):(0,n.jsx)("meshStandardMaterial",{color:D})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(h.KC,{args:[2*G,.15*G,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(h.KC,{args:[1.5*G,.3*G,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),N?(0,n.jsx)(j.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":G+.25*G,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:D},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ex,onPointerOver:ed,onPointerOut:ey,children:i})}):(0,n.jsx)(j.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:D},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ex,onPointerOver:ed,onPointerOut:ey})})]}),I&&(0,n.jsx)(f.Z,{origin:d,radius:q,orbitalInclination:b,color:D,name:i})]})});var M=r(3920),b=()=>{let{sunSettings:e,rotationCounts:t,simulationDate:r}=(0,c.ZP)(),{planetPositions:o,selectedPlanet:f,setSelectedPlanet:h,selectedMoon:j,setSelectedMoon:P}=(0,c.d2)(),{surfacePoint:b,isSurfaceCameraActive:z,triggerReset:_,setTriggerReset:k}=(0,c.g5)(),D=(0,s.useRef)(),Z=(0,s.useRef)(),[v,w]=(0,s.useState)(200),S=()=>{if(!Z.current)return;h(null),P(null),w(200),Z.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};Z.current.setPosition(t.x,t.y,t.z,!0)};(0,s.useEffect)(()=>{if(f&&Z.current){let e=o[f.name];if(e){let t=l.ZP[f.name].radius*l.YB*4;w(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}"Sun"===f.name&&(w(200),Z.current.setTarget(0,0,0,!0),Z.current.dollyTo(200,!0))}},[f,o]),(0,s.useEffect)(()=>{if(j&&Z.current){let e=j.position;if(e){let t=j.bodyData.radius*p.sh*4;w(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}}},[j,p._d]),(0,s.useEffect)(()=>{S&&(S(),k(!1))},[_]),(0,x.A)(()=>{if(z&&b&&f){let e=o[f.name];if(e){let t=new m.Vector3(e.x,e.y,e.z),r=new m.Vector3(b.x,b.y,b.z).sub(t).normalize(),n=new m.Vector3(b.x,b.y,b.z).add(r.multiplyScalar(.1));D.current.position.copy(n);let o=n.clone().add(r);D.current.lookAt(o),D.current.up.copy(r)}}});let C=(0,a.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),E=(0,a.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),I=(0,a.m)({map:"../assets/mercury/2k_mercury.jpg"}),O=(0,a.m)({map:"../assets/mars/2k_mars.jpg"}),T=(0,a.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),R=(0,a.m)({map:"../assets/saturn/2k_saturn.jpg"}),V=(0,a.m)({map:"../assets/uranus/2k_uranus.jpg"}),N=(0,a.m)({map:"../assets/neptune/2k_neptune.jpg"}),B=(e,t)=>(p._d[e]||[]).map((t,r)=>(0,n.jsx)(d.Z,{bodyData:t,parentPosition:o[e],parentName:e},"".concat(e,"-moon-").concat(r)));return(0,n.jsxs)(n.Fragment,{children:[!z&&(0,n.jsx)(i.B,{ref:Z,makeDefault:!0,maxDistance:9e4,smoothTime:.8,truckSpeed:1,rotateSpeed:1,zoomSpeed:.1,minDistance:Math.max(.02,v)}),b&&z&&(0,n.jsx)(u.c,{ref:D,makeDefault:!0,position:[b.x,b.y+10,b.z],fov:70,near:.01,far:1e6}),(0,n.jsx)(M.Z,{}),(0,n.jsx)(g,{bodyData:l.ZP.Earth,textures:C}),(0,n.jsx)(g,{bodyData:l.ZP.Mars,textures:O}),(0,n.jsx)(g,{bodyData:l.ZP.Venus,textures:E}),(0,n.jsx)(g,{bodyData:l.ZP.Mercury,textures:I}),(0,n.jsx)(g,{bodyData:l.ZP.Jupiter,textures:T}),(0,n.jsx)(g,{bodyData:l.ZP.Saturn,textures:R}),(0,n.jsx)(g,{bodyData:l.ZP.Uranus,textures:V}),(0,n.jsx)(g,{bodyData:l.ZP.Neptune,textures:N}),Object.entries(p._d).map(e=>{let[t,r]=e;return B(t,r)}),(0,n.jsx)(y.Z,{position:e.position,resetCamera:S},"Sun-plain")]})},z=()=>(0,n.jsx)(o.Z,{children:(0,n.jsx)(b,{})})},940:function(e,t,r){"use strict";r(7437),r(2265),r(8384)}},function(e){e.O(0,[393,689,326,350,971,190,744],function(){return e(e.s=6669)}),_N_E=e.O()}]);