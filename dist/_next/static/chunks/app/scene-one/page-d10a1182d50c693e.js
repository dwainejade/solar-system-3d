(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[948],{6669:function(e,t,r){Promise.resolve().then(r.bind(r,7302))},7302:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(7437),a=r(9362),o=r(2265),s=r(7871),i=r(3719),u=r(5533),c=r(8384),l=r(2079),p=r(8942),m=r(7776),d=r(9373),x=r(625),f=r(5375),y=r(878),h=r(4823),j=r(2325);r(940);let P=l.ZP.Earth,g=(0,o.forwardRef)((e,t)=>{let{bodyData:r,textures:a}=e,s={...P,...r},{name:i,mass:u,radius:p,orbitalOrigin:x,orbitalRadius:f,orbitalSpeed:g,orbitalPeriod:M,orbitalInclination:b,axialTilt:z,rotationPeriod:_,surfaceTemp:k,color:v,gravity:Z,initialOrbitalAngle:w}=s,{simSpeed:D,updateRotationCount:S,incrementDate:E,simulationDate:C}=(0,c.ZP)(),{planetAngles:I,updatePlanetPosition:R,selectedPlanet:O,setSelectedPlanet:T,displayLabels:V,planetPositions:N,orbitPaths:B}=(0,c.d2)(),{setSurfacePoint:F,surfacePoint:A,isSurfaceCameraActive:U,setCameraSurfacePoint:Y}=(0,c.g5)(),K=t||(0,o.useRef)(),G=(0,o.useRef)(I[i]||0),H=f*(U?1e-4:l.Hm),L=p*l.YB;l.E_;let X=O&&O.name===i,[q,J]=(0,o.useState)(null),[Q,W]=(0,o.useState)({x:0,y:0,z:0}),[$,ee]=(0,o.useState)(!1),et=(0,o.useRef)({x:0,y:0}),[er,en]=(0,o.useState)(null),{raycaster:ea,mouse:eo,camera:es}=(0,d.z)(),ei=(0,o.useRef)();(0,d.A)((e,t)=>{let r=t*D;0===G.current?G.current=Math.PI/180*w:G.current-=2*Math.PI/(86400*M)*r;let n=H*Math.cos(G.current),a=H*Math.sin(G.current);if(K.current){let e=Math.sin(Math.PI/180*b)*H*Math.sin(G.current);K.current.position.set(n,e,a),R(i,{x:n,y:e,z:a}),_&&(K.current.rotation.y+=2*Math.PI/(3600*_)*r,W({x:K.current.rotation.x,y:K.current.rotation.y,z:K.current.rotation.z}),K.current.rotation.y>=2*Math.PI&&(K.current.rotation.y%=2*Math.PI,S(i,1),"Earth"===i&&E()))}});let[eu,ec]=(0,o.useState)(!1);(0,d.A)(e=>{let{camera:t}=e;K.current&&ec(8e3>t.position.distanceTo(K.current.position))});let el=e=>{if(e.stopPropagation(),$)return;T(s),ea.setFromCamera(eo,es);let t=ea.intersectObject(ei.current,!0);if(t.length>0){let e=t[0].point,r=t[0].point;F([(e=K.current.worldToLocal(e.clone())).x,e.y,e.z]),Y([r.x,r.y,r.z]);let n=new m.Vector3().subVectors(e,new m.Vector3).normalize();en([n.x,n.y,n.z])}},ep=e=>{e.stopPropagation(),ee(!1),et.current={x:e.clientX,y:e.clientY}},em=e=>{Math.sqrt(Math.pow(e.clientX-et.current.x,2)+Math.pow(e.clientY-et.current.y,2))>5&&ee(!0)},ed=e=>{ee(!1)},ex=e=>{e.stopPropagation(),document.body.style.cursor="pointer",J(i)},ef=e=>{e.stopPropagation(),document.body.style.cursor="auto",J(null)},ey=U?128:X?64:32;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{ref:K,children:[(0,n.jsxs)("mesh",{ref:ei,onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ex,onPointerOut:ef,children:[(0,n.jsx)("sphereGeometry",{args:[L,ey,ey]}),a?(0,n.jsx)("meshStandardMaterial",{metalness:.3,roughness:.65,map:a.map}):(0,n.jsx)("meshStandardMaterial",{color:v})]}),"Saturn"===i&&(0,n.jsxs)("group",{children:[(0,n.jsx)(h.KC,{args:[2*L,.15*L,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#Ffffff",transparent:!0,opacity:.6})}),(0,n.jsx)(h.KC,{args:[1.5*L,.3*L,2,80],position:[0,0,0],rotation:[Math.PI/2,0,0],children:(0,n.jsx)("meshBasicMaterial",{color:"#F4E1C1",transparent:!0,opacity:.6})})]}),V?(0,n.jsx)(j.V,{as:"span",wrapperClass:"label-wrapper",center:!0,occlude:!0,"position-y":L+.25*L,zIndexRange:[100,0],children:(0,n.jsx)("span",{className:"planet-label",style:{color:v},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ex,onPointerOut:ef,children:i})}):(0,n.jsx)(j.V,{as:"div",center:!0,zIndexRange:[100,0],children:(0,n.jsx)("div",{className:"planet-point",style:{backgroundColor:v},onClick:el,onPointerDown:ep,onPointerMove:em,onPointerUp:ed,onPointerOver:ex,onPointerOut:ef})})]}),B&&(0,n.jsx)(y.Z,{origin:x,radius:H,orbitalInclination:b,color:v,name:i})]})});var M=r(3920),b=()=>{let{sunSettings:e,rotationCounts:t,simulationDate:r}=(0,c.ZP)(),{planetPositions:a,selectedPlanet:y,setSelectedPlanet:h,selectedMoon:j,setSelectedMoon:P}=(0,c.d2)(),{surfacePoint:b,isSurfaceCameraActive:z,triggerReset:_,setTriggerReset:k}=(0,c.g5)(),v=(0,o.useRef)(),Z=(0,o.useRef)(),[w,D]=(0,o.useState)(200),S=()=>{if(!Z.current)return;h(null),P(null),D(200),Z.current.setTarget(e.position.x,e.position.y,e.position.z,!0);let t={x:e.position.x+-2e3,y:e.position.y+1e3,z:e.position.z+1e3};Z.current.setPosition(t.x,t.y,t.z,!0)};(0,o.useEffect)(()=>{if(y&&Z.current){let e=a[y.name];if(e){let t=l.ZP[y.name].radius*l.YB*4;D(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}"Sun"===y.name&&(D(200),Z.current.setTarget(0,0,0,!0),Z.current.dollyTo(200,!0))}},[y,a]),(0,o.useEffect)(()=>{if(j&&Z.current){let e=j.position;if(e){let t=j.bodyData.radius*p.sh*4;D(t/2),Z.current.setTarget(e.x,e.y,e.z,!0),Z.current.dollyTo(t,!0)}}},[j,p._d]),(0,o.useEffect)(()=>{S&&(S(),k(!1))},[_]),(0,d.A)(()=>{if(z&&b&&y){let e=a[y.name];if(e){let t=new m.Vector3(e.x,e.y,e.z),r=new m.Vector3(b.x,b.y,b.z).sub(t).normalize(),n=new m.Vector3(b.x,b.y,b.z).add(r.multiplyScalar(.1));v.current.position.copy(n);let a=n.clone().add(r);v.current.lookAt(a),v.current.up.copy(r)}}});let E=(0,s.m)({map:"../assets/earth/2k_earth_daymap.jpg"}),C=(0,s.m)({map:"../assets/venus/2k_venus_surface.jpg",surface:"../assets/venus/2k_venus_atmosphere.jpg"}),I=(0,s.m)({map:"../assets/mercury/2k_mercury.jpg"}),R=(0,s.m)({map:"../assets/mars/2k_mars.jpg"}),O=(0,s.m)({map:"../assets/jupiter/2k_jupiter.jpg"}),T=(0,s.m)({map:"../assets/saturn/2k_saturn.jpg"}),V=(0,s.m)({map:"../assets/uranus/2k_uranus.jpg"}),N=(0,s.m)({map:"../assets/neptune/2k_neptune.jpg"}),B=(e,t)=>(p._d[e]||[]).map((t,r)=>(0,n.jsx)(x.Z,{bodyData:t,parentPosition:a[e],parentName:e},"".concat(e,"-moon-").concat(r)));return(0,n.jsxs)(n.Fragment,{children:[!z&&(0,n.jsx)(i.B,{ref:Z,makeDefault:!0,maxDistance:9e4,smoothTime:.8,truckSpeed:1,rotateSpeed:1,zoomSpeed:.1,minDistance:Math.max(.02,w)}),b&&z&&(0,n.jsx)(u.c,{ref:v,makeDefault:!0,position:[b.x,b.y+10,b.z],fov:70,near:.01,far:1e6}),(0,n.jsx)(M.Z,{}),(0,n.jsx)(g,{bodyData:l.ZP.Earth,textures:E}),(0,n.jsx)(g,{bodyData:l.ZP.Mars,textures:R}),(0,n.jsx)(g,{bodyData:l.ZP.Venus,textures:C}),(0,n.jsx)(g,{bodyData:l.ZP.Mercury,textures:I}),(0,n.jsx)(g,{bodyData:l.ZP.Jupiter,textures:O}),(0,n.jsx)(g,{bodyData:l.ZP.Saturn,textures:T}),(0,n.jsx)(g,{bodyData:l.ZP.Uranus,textures:V}),(0,n.jsx)(g,{bodyData:l.ZP.Neptune,textures:N}),Object.entries(p._d).map(e=>{let[t,r]=e;return B(t,r)}),(0,n.jsx)(f.Z,{position:e.position,resetCamera:S},"Sun-plain")]})},z=()=>(0,n.jsx)(a.Z,{children:(0,n.jsx)(b,{})})},4823:function(e,t,r){"use strict";r.d(t,{KC:function(){return o}});var n=r(2988),a=r(2265);let o=function(e,t){let r=e+"Geometry";return a.forwardRef(({args:e,children:t,...o},s)=>{let i=a.useRef(null);return a.useImperativeHandle(s,()=>i.current),a.useLayoutEffect(()=>void 0),a.createElement("mesh",(0,n.Z)({ref:i},o),a.createElement(r,{attach:"geometry",args:e}),t)})}("torus")},940:function(e,t,r){"use strict";r(7437),r(2265),r(8384)}},function(e){e.O(0,[393,689,175,350,971,190,744],function(){return e(e.s=6669)}),_N_E=e.O()}]);