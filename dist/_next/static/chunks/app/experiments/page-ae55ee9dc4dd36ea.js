(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{206:function(e,t,r){Promise.resolve().then(r.bind(r,46))},46:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var n=r(7437),a=r(2265),s=r(2344),u=r(7871),o=r(3719),i=r(8384),c=r(2803),l=r(2079),m=r(5375),h=r(7776),p=r(9373),d=r(2325),x=r(8942),f=r(878),g=r(1675),M=r(2167);r(1577);var y=r(1045),j=r(8236),v=r(4851);let P=e=>(e%(2*Math.PI)+2*Math.PI)%(2*Math.PI);var w=e=>{let{planetName:t="Earth",planetRef:r,angleRef:s,numTriangles:u=5,radius:o,eccentricity:l=0,orbitalInclination:m}=e,{planetsData:h,updatePlanetAngle:d,updatePlanetData:x}=(0,i.d2)(),{experimentStatus:f}=(0,c.Z)(),[g,M]=(0,a.useState)(null),[y,j]=(0,a.useState)([]),[w,E]=(0,a.useState)(0),[b,k]=(0,a.useState)(null),T=(0,a.useRef)([]),R=(0,a.useRef)(!1);(0,a.useEffect)(()=>{j([]),E(0),M(null),k(null),T.current=[],R.current=!0},[t,o,h[t].eccentricity,m,u,x]),(0,a.useEffect)(()=>{null===f&&(j([]),E(0),M(null),k(null),T.current=[],R.current=!0)},[f]);let S=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=[];e=P(e),t=P(t);for(let e=0;e<20;e++)n.push([0,0,0]);let a=t-e;a<0&&(a+=2*Math.PI);for(let t=0;t<=r;t++){let s=e+t/r*a;n.push(Z(s))}for(let e=0;e<20;e++)n.push([0,0,0]);return n},_=(0,a.useMemo)(()=>{let e=[];for(let t=0;t<=u;t++){let r=t/u*2*Math.PI,n=r;for(let e=0;e<10;e++){let e=(n-l*Math.sin(n)-r)/(1-l*Math.cos(n));if(n-=e,1e-6>Math.abs(e))break}let a=2*Math.atan(Math.sqrt((1+l)/(1-l))*Math.tan(n/2));e.push(P(a))}return e},[u,l]),Z=e=>{let t=o*(1-l*l)/(1+l*Math.cos(e)),r=t*Math.sin(e),n=Math.PI/180*m;return[t*Math.cos(e),Math.sin(n)*r,Math.cos(n)*r]},L=(e,t,r)=>(e=P(e),(t=P(t))<=(r=P(r)))?e>=t&&e<=r:e>=t||e<=r;return(0,p.A)(()=>{if(!r.current)return;let e=r.current.position,t=P(Math.atan2(e.z,e.x));if(T.current.push(t),T.current.length>3&&T.current.shift(),null===b){k(t);return}let n=T.current,a=n.some(e=>e>5),s=n.some(e=>e<1);if(a&&s&&t<b){j([]),E(0),M(null),k(t),T.current=[t];return}if(w<u){let e=_[w],r=_[w+1];g?!L(t,e,r)&&L(b,e,r)?(j(t=>[...t,{points:S(e,r),color:g.color}]),w<u-1?(E(e=>e+1),M({startAngle:r,endAngle:t,color:`hsl(${(w+1)*360/u}, 70%, 50%)`})):M(null)):M(e=>({...e,endAngle:t})):M({startAngle:e,endAngle:t,color:`hsl(${360*w/u}, 70%, 50%)`})}k(t)}),(0,n.jsxs)("group",{children:[y.map((e,t)=>(0,n.jsx)(v.x,{points:e.points,color:e.color,lineWidth:3},`complete-${t}`)),g&&(0,n.jsx)(v.x,{points:S(g.startAngle,g.endAngle),color:g.color,lineWidth:4})]},t)},E=r(8955),b=e=>{let{name:t="Earth",textures:r}=e,{planetsData:s}=(0,i.d2)(),{experimentType:u,experimentPlanet:o,experimentStatus:m}=(0,c.Z)(),v={...s[t]},{radius:P=1,orbitalOrigin:b,orbitalRadius:k=1,orbitalPeriod:T=1,orbitalInclination:R=0,axialTilt:S=0,rotationPeriod:_=1,color:Z="#ffffff",initialOrbitalAngle:L=0,eccentricity:A=0}=v,{simSpeed:C,toggleDetailsMenu:D}=(0,i.ZP)(),{planetAngles:I,updatePlanetPosition:Y,selectedPlanet:V,setSelectedPlanet:z,displayLabels:U,selectedMoon:X,setSelectedMoon:N,orbitPaths:B}=(0,i.d2)(),{isSurfaceCameraActive:W,satelliteCamera:$,toggleSatelliteCamera:F,setAutoRotate:O,autoRotate:G,activeCamera:q,switchToPlanetCamera:Q}=(0,i.g5)(),J=(0,a.useRef)(),H=(0,a.useRef)(0),K=(0,a.useRef)(),ee=(0,a.useRef)(null),[et,er]=(0,a.useState)(!1),[en,ea]=(0,a.useState)(!1),[es,eu]=(0,a.useState)(!1),eo=(0,a.useRef)({x:0,y:0}),ei=Math.max(.1,k*(W?1e-4:l.Hm)),ec=Math.max(.1,P*l.YB);l.E_;let el=V&&V.name===t,em=()=>!!el||X?.parentName===t,eh=el||em()?64:16,[ep,ed]=(0,a.useState)(ec),ex=(0,a.useRef)(1),[ef,eg]=(0,a.useState)(!1),[eM,ey]=(0,a.useState)(1),[ej,ev]=(0,a.useState)(0);(0,a.useEffect)(()=>{null===m&&(H.current=-.000001,ev(0))},[m]),(0,p.A)((e,r)=>{let n=r*C;if("completed"===m)return;H.current-=2*Math.PI/(86400*T)*n;let a=H.current;for(let e=0;e<10;e++){let e=(a-A*Math.sin(a)-H.current)/(1-A*Math.cos(a));if(a-=e,1e-6>Math.abs(e))break}let s=2*Math.atan(Math.sqrt((1+A)/(1-A))*Math.tan(a/2)),u=ei*(1-A*A)/(1+A*Math.cos(s)),o=u*Math.cos(-s),i=u*Math.sin(-s);if(J.current){let r=Math.PI/180*R,a=Math.sin(r)*i,s=Math.cos(r)*i;if(J.current.position.set(o,a,s),Y(t,{x:o,y:a,z:s}),_&&ee.current){let e=2*Math.PI/(3600*_)*n,t=new h.Vector3(0,1,0);ee.current.rotateOnAxis(t,e);let r=n/86400;ev(e=>e+r),J.current.rotation.y>=2*Math.PI&&el&&(J.current.rotation.y%=2*Math.PI),K.current&&(K.current.rotation.y+=1.1*e)}let u=J.current.position.distanceTo(e.camera.position);ed(Math.max(.1,u/1e3<=ec?ec:u/1e3)),eg("moon"===q.type||u<500);let c=100*ec,l=1*ec;ey(Math.max(0,Math.min(1,(u-l)/(c-l)))),ex.current&&(ex.current=Math.max(.1,.02*u))}}),(0,a.useEffect)(()=>{ee.current&&(ee.current.rotation.order="YXZ",ee.current.rotation.y=0,ee.current.rotation.x=h.MathUtils.degToRad(S))},[S,V]);let eP=e=>{e.stopPropagation(),en||q.name===t||(D(!0),N(null),z(v),Q(t))},ew=e=>{e.stopPropagation(),ea(!1),eo.current={x:e.clientX,y:e.clientY}},eE=e=>{Math.sqrt(Math.pow(e.clientX-eo.current.x,2)+Math.pow(e.clientY-eo.current.y,2))>5&&ea(!0)},eb=e=>{ea(!1)},ek=e=>{e.stopPropagation(),document.body.style.cursor="pointer",eu(!0)},eT=e=>{e.stopPropagation(),document.body.style.cursor="auto",eu(!1)},eR=x.ZP[t]||[],eS=Math.max(.1,em()?ec:8*ep),e_=Math.max(.1,em()?ec:8*ep),eZ=Math.max(.1,1.008*ec),eL=Math.max(.1,1.02*ec);return(0,n.jsxs)(n.Fragment,{children:[q?.name===t&&J.current&&(0,n.jsx)(g.Z,{target:J.current,targetName:t,size:ec}),(0,n.jsxs)("group",{ref:J,children:[(0,n.jsx)("mesh",{visible:!1,onClick:eP,onPointerDown:ew,onPointerMove:eE,onPointerUp:eb,onPointerOver:ek,onPointerOut:eT,children:q?.name!==t&&(0,n.jsx)("sphereGeometry",{args:[eS,8,8]})}),(0,n.jsxs)("mesh",{ref:ee,onDoubleClick:e=>{e.stopPropagation(),O(!G)},children:[(0,n.jsx)("sphereGeometry",{args:[e_,eh,eh/2]}),el||em()||!et?(0,n.jsxs)(n.Fragment,{children:["Earth"===t&&el&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("mesh",{ref:K,children:[(0,n.jsx)("sphereGeometry",{args:[eZ,eh,eh/2]}),(0,n.jsx)("meshStandardMaterial",{alphaMap:r?.clouds,transparent:!0,opacity:.8})]},`${t}-cloud_texture`),(0,n.jsxs)("mesh",{children:[(0,n.jsx)("sphereGeometry",{args:[eL,eh,eh/2]}),(0,n.jsx)("shaderMaterial",{args:[y.et]})]},`${t}-atmosphere_texture`)]}),(0,n.jsx)("meshStandardMaterial",{metalness:.6,roughness:.8,map:r?.map,onBuild:()=>er(!0)})]}):(0,n.jsx)("meshBasicMaterial",{color:Z})]},el?t+"-textured":t+"-basic"),"Saturn"===t&&ef&&(0,n.jsx)(j.Z,{innerRadius:Math.max(.1,1.2*ec),outerRadius:Math.max(.1,2*ec),height:0,rotation:[h.MathUtils.degToRad(S),0,0],texture:el?r?.ringTexture:null,detail:Math.max(eh,32)},eh+t+"-ring"),"Uranus"===t&&ef&&(0,n.jsx)(j.Z,{innerRadius:Math.max(.1,1.5*ec),outerRadius:Math.max(.1,1.9*ec),height:0,texture:el?r?.ringTexture:null,detail:Math.max(eh,32),rotation:[h.MathUtils.degToRad(S),0,0]},eh+t+"-ring"),U&&el&&(0,n.jsx)(d.V,{as:"span",wrapperClass:"label-wrapper",center:!0,"position-y":el?ep+.25*ep:4*ep,zIndexRange:[100,0],style:{pointerEvents:"none"},children:(0,n.jsx)("span",{className:"planet-label",style:{color:Z},onClick:eP,onPointerDown:ew,onPointerMove:eE,onPointerUp:eb,onPointerOver:ek,onPointerOut:eT,children:t})}),em()&&eR.map((e,r)=>{let a=["Saturn","Uranus"].includes(t);return(0,n.jsx)("group",{rotation:a?[h.MathUtils.degToRad(S),0,0]:[0,0,0],children:(0,n.jsx)(M.Z,{moonData:e,planetRef:J,parentName:t,scaledPlanetRadius:ec},`${t}-moon-${r}`)},`${t}-moon-group-${r}`)})]}),B&&(0,n.jsx)(f.Z,{origin:b,radius:ei,eccentricity:A,orbitalInclination:R,color:"white",name:t+"-orbit-path",opacity:eM,hiRes:!0,lineWidth:1,depthWrite:!1}),"kepler-2"===u&&(0,n.jsx)(w,{planetName:t,planetRef:J,angleRef:H,numTriangles:6,radius:ei,eccentricity:A,orbitalInclination:R},t),"newton-1"===u&&(0,n.jsx)(E.Z,{planetRef:J})]})},k=r(3920),T=()=>{let{sunSettings:e,simSpeed:t,setSimSpeed:r,prevSpeed:s,setPrevSpeed:d,setViewOnlyMode:x}=(0,i.ZP)(),{planetPositions:f,selectedPlanet:g,selectedMoon:M,setSelectedMoon:y,planetsData:j,moonsData:v,moonPositions:P,resetPlanetsData:w}=(0,i.d2)(),{satelliteCamera:E,isCameraTransitioning:T,toggleCameraTransitioning:R,isZoomingToSun:S,resetCamera:_,toggleZoomingToSun:Z,activeCamera:L,setActiveCamera:A,setSceneCameras:C,sceneCameras:D,satelliteCameraState:I,setSatelliteCameraState:Y}=(0,i.g5)(),{experimentPlanet:V}=(0,c.Z)(),z=(0,a.useRef)(),[U,X]=(0,a.useState)(200),[N,B]=(0,a.useState)(!1),W=[1e5,1e5,1e5],$=[2e4,2e4,2e4],F=[0,0,0];(0,a.useEffect)(()=>{z.current&&!N&&(z.current.setPosition(...W,!1),z.current.setTarget(...F,!1),setTimeout(()=>{z.current.setPosition(...$,!0),z.current.setTarget(...F,!0),B(!0)},100))},[z.current]);let O=e=>"moon"===L.type?Math.max(.5*e,.01):4.2*e,G=(e,t)=>{let r=v[t];return r?r.find(t=>t.name===e):null};(0,p.A)(()=>{if(z.current){if(I?.position&&T){let{position:e,targetPosition:t}=I;z.current.setPosition(e.x,e.y,e.z,!1),z.current.setTarget(t.x,t.y,t.z,!1),z.current.updateCameraUp(),z.current.update(),Y(null)}if("planet"===L.type&&"Sun"!==L.name){let e=f[g.name];if(y(null),e){let t=O(j[g.name].radius*l.YB);X(t/2),z.current.setTarget(e.x,e.y,e.z,!0),z.current.dollyTo(t,!0),Z(!1)}}if("moon"===L.type){let e=P[L.name],t=G(L.name,L.parentName);if(e&&t){let r=t.radius*l.YB,n=O(r);X(2*r),z.current.setTarget(e.x,e.y,e.z,!0),z.current.dollyTo(4*n,!0);let a=new h.Vector3;z.current.getTarget(a),.1>a.distanceTo(new h.Vector3(e.x,e.y,e.z))&&R(!1)}}if("Sun"===L.name&&"planet"===L.type&&(X(200),z.current.setTarget(0,0,0,!0),z.current.maxDistance=1e3,R(!1),z.current.distance>300&&S?z.current.dollyTo(200,!0):Z(!1)),"Asteroid Belt"===L.name){let e=L.position;if(e&&"number"==typeof e.x){z.current.setPosition(e.x,e.y,e.z,!0),z.current.setTarget(0,0,0,!0),X(4250),z.current.maxDistance=9e3;let t=new h.Vector3;z.current.getPosition(t),100>t.distanceTo(new h.Vector3(e.x,e.y,e.z))&&R(!1)}}if("default"===L.name&&T){let e=L.position,t=L.lookAt,r=new h.Vector3,n=new h.Vector3;z.current.getPosition(r),z.current.getTarget(n),r.distanceTo(e)>100&&z.current.setLookAt(e.x,e.y,e.z,t.x,t.y,t.z,!0),R(!1),X(200)}"orbit"!==L.type||T||(X(200),z.current.maxDistance=16e4)}}),(0,a.useEffect)(()=>{z.current&&!N&&(z.current.setPosition(...W,!1),z.current.setTarget(...F,!1),z.current.camera.updateProjectionMatrix(),setTimeout(()=>{_(),B(!0)},100))},[z.current]),(0,a.useEffect)(()=>{L.name,("planet"===L.type||"moon"===L.type)&&(console.log("Transitioning camera"),R(!0),d(t),r(0)),"orbit"===L.type&&"default"===L.name&&0===t&&r(s),g||M||0!==t||r(s),"Sun"===L.name&&(Z(!0),0===t&&r(s)),z.current?.camera.updateProjectionMatrix()},[g,M,L]),(0,a.useEffect)(()=>{let e=e=>{1===e.button&&e.preventDefault(),z.current&&(z.current.mouseButtons.right=1)};return window.addEventListener("mousedown",e),()=>{window.removeEventListener("mousedown",e)}},[]);let q=(0,u.m)({map:"../assets/earth/8k_earth_daymap.jpg",clouds:"../assets/earth/8k_earth_clouds.jpg"}),Q=(0,u.m)({map:"../assets/sun/8k_sun.jpg"}),J=(0,u.m)({map:"../assets/venus/2k_venus_surface.jpg"}),H=(0,u.m)({map:"../assets/mercury/2k_mercury.jpg"}),K=(0,u.m)({map:"../assets/mars/1k_mars.jpg"}),ee=(0,u.m)({map:"../assets/jupiter/8k_jupiter.jpg"}),et=(0,u.m)({map:"../assets/saturn/2k_saturn.jpg",ringTexture:"../assets/saturn/saturn-rings.png"}),er=(0,u.m)({map:"../assets/uranus/2k_uranus.jpg",ringTexture:"../assets/uranus/uranus-rings-2.png"}),en=(0,u.m)({map:"../assets/neptune/2k_neptune.jpg"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.B,{ref:z,makeDefault:!E,maxDistance:12e5,minDistance:U,smoothTime:.6,enableDamping:!0,near:.01,far:15e5,autoRotate:!0,enabled:!E}),(0,n.jsx)(k.Z,{}),(()=>{switch(V){case"Earth":default:return(0,n.jsx)(b,{name:"Earth",textures:q});case"Mars":return(0,n.jsx)(b,{name:"Mars",textures:K});case"Venus":return(0,n.jsx)(b,{name:"Venus",textures:J});case"Mercury":return(0,n.jsx)(b,{name:"Mercury",textures:H});case"Jupiter":return(0,n.jsx)(b,{name:"Jupiter",textures:ee});case"Saturn":return(0,n.jsx)(b,{name:"Saturn",textures:et});case"Uranus":return(0,n.jsx)(b,{name:"Uranus",textures:er});case"Neptune":return(0,n.jsx)(b,{name:"Neptune",textures:en})}})(),(0,n.jsx)(m.Z,{textures:Q,position:e.position,resetCamera:_},"Sun-plain")]})};r(7045);var R=()=>{let{experimentMode:e,toggleExperimentMode:t}=(0,c.Z)();return(0,a.useEffect)(()=>{t(!0)},[]),(0,n.jsx)(s.Z,{mode:e?"experiments":"main",children:(0,n.jsx)(T,{})})}},8236:function(e,t,r){"use strict";var n=r(7437),a=r(2265),s=r(7776);t.Z=e=>{let{innerRadius:t,outerRadius:r,height:u=0,rotation:o,texture:i,detail:c=16}=e,l=(0,a.useMemo)(()=>{let e=new s.CylinderGeometry(r,t,u,c,1,!0),n=e.attributes.uv;for(let e=0;e<n.count;e++){let t=n.getX(e),r=n.getY(e);n.setXY(e,t,r)}return e},[t,r,u]),m=(0,a.useMemo)(()=>new s.MeshBasicMaterial({map:i,side:s.DoubleSide,transparent:!0}),[i]);return(0,n.jsx)("mesh",{geometry:l,material:m,rotation:o})}},1675:function(e,t,r){"use strict";var n=r(7437),a=r(2265),s=r(9373),u=r(5533),o=r(7776),i=r(8384);t.Z=e=>{let{target:t,size:r,targetName:c,bodyType:l="planet"}=e,{toggleCameraTransitioning:m,setAutoRotate:h,autoRotate:p,toggleSatelliteCamera:d,satelliteCamera:x,activeCamera:f,setSatelliteCameraState:g}=(0,i.g5)(),{prevSpeed:M,setSimSpeed:y}=(0,i.ZP)(),{gl:j,camera:v}=(0,s.z)(),P=(0,a.useRef)(),w=(0,a.useRef)(!1),E=(0,a.useRef)({x:0,y:0}),b=(0,a.useRef)(new o.Spherical(6*r,Math.PI/2,0)),k=(0,a.useCallback)(()=>{h(!1)},[h]),T=(0,a.useCallback)(e=>{w.current=!0,E.current={x:e.clientX,y:e.clientY}},[]),R=(0,a.useCallback)(()=>{w.current=!1},[]),S=(0,a.useCallback)(e=>{if(!w.current)return;k();let t=e.clientX-E.current.x,r=e.clientY-E.current.y,n=b.current.phi-.45*r*.01,a=b.current.theta-.45*t*.01;b.current.phi=Math.max(.1,Math.min(Math.PI-.1,n)),b.current.theta=a,E.current={x:e.clientX,y:e.clientY}},[k]),_=(0,a.useCallback)(e=>{if(!x)return;let t=.01*e.deltaY,r=o.MathUtils.clamp(b.current.radius+t,2,500);b.current.radius=r,k()},[x,r,k]),Z=(0,a.useCallback)(e=>{w.current=!0,e.touches?(e.preventDefault(),E.current={x:e.touches[0].clientX,y:e.touches[0].clientY}):E.current={x:e.clientX,y:e.clientY}},[]),L=(0,a.useCallback)(e=>{if(!w.current)return;k();let t=e.touches?e.touches[0].clientX:e.clientX,r=e.touches?e.touches[0].clientY:e.clientY,n=t-E.current.x,a=r-E.current.y,s=b.current.phi-.003*a,u=b.current.theta-.003*n;b.current.phi=Math.max(.1,Math.min(Math.PI-.1,s)),b.current.theta=u,E.current={x:t,y:r}},[k]);(0,s.A)((e,n)=>{if(!P.current||!t)return;let a=new o.Vector3;t.getWorldPosition(a);let s=t.position.clone();p&&(b.current.theta+=.05*n);let u=new o.Vector3().setFromSpherical(b.current).add(s);if(P.current.position.copy(u),P.current.lookAt(s),P.current.updateMatrixWorld(),x){let e=new o.Vector3;P.current.getWorldPosition(e);let t=new o.Quaternion;P.current.getWorldQuaternion(t),g(e,new o.Euler().setFromQuaternion(t),a)}f.name===c&&!x&&v.position.distanceTo(a)<=Math.max(4.5*r,.1)&&A(v,a)});let A=(0,a.useCallback)((e,r)=>{let n=e.position.clone(),a=t.parent.matrixWorld.clone().invert(),s=n.applyMatrix4(a),u=t.position.clone(),o=s.sub(u);b.current.setFromVector3(o),P.current.position.copy(s),P.current.lookAt(u),d(!0),m(!1),y(M)},[t,d,m,y,M]);return(0,a.useEffect)(()=>{let e=j.domElement;return e.addEventListener("mousedown",T),window.addEventListener("mousemove",S),window.addEventListener("mouseup",R),e.addEventListener("wheel",_,{passive:!0}),e.addEventListener("touchstart",Z),e.addEventListener("touchmove",L),e.addEventListener("touchend",R),e.addEventListener("contextmenu",e=>e.preventDefault()),()=>{e.removeEventListener("mousedown",T),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",R),e.removeEventListener("wheel",_),e.removeEventListener("touchstart",Z),e.removeEventListener("touchmove",L),e.removeEventListener("touchend",R),e.removeEventListener("contextmenu",e=>e.preventDefault()),x&&d(!1)}},[T,S,R,_,Z,L,j.domElement,x,d]),(0,n.jsx)(u.c,{ref:P,name:"satellite-camera-"+c,makeDefault:x,fov:50,near:.01,far:12e5},c)}},7045:function(){}},function(e){e.O(0,[433,689,942,855,971,190,744],function(){return e(e.s=206)}),_N_E=e.O()}]);